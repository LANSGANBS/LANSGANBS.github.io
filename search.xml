<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>中岛美嘉《僕が死のうと思ったのは》歌词及罗马音发音</title>
      <link href="/posts/b342039f.html"/>
      <url>/posts/b342039f.html</url>
      
        <content type="html"><![CDATA[<p>【歌词及罗马音发音】『僕が死のうと思ったのは（曾经我也想过一了百了）』 - 中岛美嘉</p><p>填词：秋田弘</p><p>谱曲：秋田弘</p><p>编曲：出羽良彰</p><p>歌曲原唱：中岛美嘉</p><p><img src="http://image.lansganbs.cn/e4e64c4befc3c7cc41f0bd8015f3b49d.png" alt=""></p><p><a href="https://music.apple.com/cn/album/%E5%83%95%E3%81%8C%E6%AD%BB%E3%81%AE%E3%81%86%E3%81%A8%E6%80%9D%E3%81%A3%E3%81%9F%E3%81%AE%E3%81%AF-from-the-first-take/1598331321?i=1598331322">僕が死のうと思ったのは - From THE FIRST TAKE</a></p><hr><p>bo ku ga &emsp; <u>shi no</u> o to &emsp; <u>o mo</u> tta no wa</p><p>僕（ぼく）が死（し）のうと思（おも）ったのは</p><p>曾经我也想过一了百了 </p><p><u>u mi ne ko ga sa nn~ba shi de</u> &emsp; na i ta ka ra</p><p>ウミネコが桟桥（さんばし）で鸣（な）いたから</p><p>因为有海猫在码头悲鸣</p><p>na mi no~<u>ma ni</u> <u>ma ni</u> &emsp; u ka nn de ki e ru</p><p>波（なみ）の随意（まにま）に浮（う）かんで消（き）える</p><p>随着浪花起伏消没</p><p>ka ko mo tu i <u>ba nn</u>~de &emsp; to nn~de yo ke</p><p>过去（かこ）も啄（つい）ばんで飞（と）んでいけ</p><p>叼啄着往昔飞离不见</p><p>bo ku ga &emsp; <u>shi no</u> o to &emsp; <u>o mo</u> tta no wa</p><p>仆（ぼく）が死（し）のうと思（おも）ったのは</p><p>曾经我也想过一了百了</p><p>ta nn <u>jyo o bi ni</u> <u>a nn</u> zu no <u>ha na ga sa i ta ka ra</u></p><p>诞生日（たんじょうび）に杏（あんず）の花（はな）が咲（さ）いたから</p><p>因为生日那天杏花开放</p><p>so no ko <u>mo re</u> <u>bi de</u> &emsp; u <u>ta ta</u> ne shi ta ra</p><p>その木漏（こも）れ日（び）でうたた寝（ね）したら</p><p>若是在那洒下的阳光里打盹</p><p>mu shi no shi <u>ga i</u> to &emsp; <u>tsu chi ni na re</u>~ru ka na</p><p>虫（むし）の死骸（しがい）と土（つち）になれるかな </p><p>能否与虫之死骸一同化为尘土呢</p><p>ha &emsp; <u>kka a</u> me &emsp; gyo <u>ko o</u> no <u>to o</u> <u>da i</u></p><p>薄荷饴（はっかあめ）渔港（ぎょこう）の灯台（とうだい）</p><p>薄荷糖 渔港的灯塔 </p><p>sa bi ta <span style="color: red;">a</span> <u>chi kyo o</u> &emsp; <u>su te ta</u> ji te nn sya</p><p>锖（さ）びたアーチ桥（きょう） 舍（す）てた自転车（じてんしゃ）</p><p>生锈的拱桥 丢弃的自行车</p><p>mo ku <u>zo o</u> <u>no e ki no</u> <u>su to o</u> bu no ma e de</p><p>木造（もくぞう）の駅（えき）のストーブの前（まえ）で</p><p>木造车站的暖炉前 </p><p><u>do ko ni mo</u> &emsp; <u>ta bi da te</u> &emsp; <u><span style="color: red;">na i</span> ko ko ro</u></p><p>どこにも旅立（たびだ）てない心（こころ）</p><p>无处可去的心灵</p><p><u>kyo o wa ma ru de</u> &emsp; <u>ki no <span style="opacity: 0.5;">o</span> mi ta i da</u></p><p>今日（きょう）はまるで昨日（きのう）みたいだ</p><p>今天与昨天如此相像</p><p><u>a su wo</u> &emsp; <u>ka e ru na ra</u> &emsp; <u>kyo o <span style="opacity: 0.5;">wo</span></u> &emsp; <u>ka e na kya</u></p><p>明日（あす）を変（か）えるなら 今日（きょう）を変（か）えなきゃ</p><p>想改变明天 须改变今天</p><p><u>wa ka</u> tte ru &emsp; <u>wa ka</u> tte ru &emsp; <u>ke re</u> do</p><p>分（わ）かってる 分（わ）かってる    けれど</p><p>我知道  我知道  但是  </p><p>bo ku ga &emsp; <u>shi no</u> o to &emsp; <u>o mo</u> tta no wa</p><p>仆（ぼく）が死（し）のうと思（おも）ったのは</p><p>曾经我也想过一了百了</p><p>ko ko ro ga ka ra &emsp; ppo ni &emsp; na &emsp; tta ka ra</p><p>心（こころ）が空（から）っぽになったから</p><p>因为心中已空无一物  </p><p>mi ta sa re na i to &emsp; na <u>i te</u> &emsp; <u>i ru</u> <u>no wa</u></p><p>満（み）たされないと泣（な）いているのは</p><p>感到空虚而哭泣 </p><p>ki <u>tto mi ta sa re ta i to</u> &emsp; <u>ne ga</u> u ka ra</p><p>きっと満（み）たされたいと愿（ねが）うから</p><p>一定是渴望得到充实</p><hr><p>bo ku ga &emsp; <u>shi no</u> o to &emsp; <u>o mo</u> tta no wa</p><p>仆（ぼく）が死（し）のうと思（おも）ったのは</p><p>曾经我也想过一了百了 </p><p>ku <u>tsu hi mo ga</u> &emsp; ho do ke &emsp; ta ka ra</p><p>靴纽（くつひも）が解（と）けたから</p><p>因为鞋带松开了 </p><p>mu su bi na o <span style="opacity: 0.5;">su</span> no wa &emsp; ni ga te na nn da yo</p><p>結（むす）びなおすのは苦手（にがて）なんだよ</p><p>不擅长重新系起 </p><p>hi to to no &emsp; <u>tsu na ga ri mo ma ta</u> &emsp; <u>shi ka ri</u></p><p>人（ひ）との繋（つな）がりもまた然（しか）り</p><p>与人的牵绊亦是如此</p><p>bo ku ga &emsp; <u>shi no</u> o to &emsp; <u>o mo</u> tta no wa</p><p>仆（ぼく）が死（し）のうと思（おも）ったのは</p><p>曾经我也想过一了百了 </p><p>syo o ne nn <u>ga bo ku wo</u> &emsp; <u>mi tsu me te i</u> ta ka ra</p><p>少年（しょうねん）が僕（ぼく）を見（み）つめていたから</p><p>因为少年深情凝视着我</p><p>be~ddo no u e de &emsp; do ge za shi te ru yo</p><p>ベッドの上（うえ）で土下座（どげざ）してるよ</p><p>抱膝跪在床上 </p><p><u>a no hi no bo ku ni</u> &emsp; go me nn na sa i to</p><p>あの日（ひ）の僕（ぼく）にごめんなさいと</p><p>向那天的我说抱歉</p><p>pa so <u>ko nn</u> no &emsp; <u>u su</u> a ka ri</p><p>パソコンの薄明（うすあ）かり</p><p>屏幕的微光 </p><p><u>jyo o</u> <u>ka i</u> <u>no he ya no</u> <u>se e</u> ka tsu o nn</p><p>上階（じょうかい）の部屋（へや）の生活音（せいかつおん）<br>楼上的噪音</p><p>i nn ta-<u>fo nn</u> no <u>cha i</u> mu no o to</p><p>インターフォンのチャイムの音（おと）</p><p>电话的铃声 </p><p><u>mi mi wo</u> &emsp; <u>hu sa gu to ri</u> &emsp; <u>ka go no</u> &emsp; <u>syo o ne nn</u></p><p>耳（みみ）を塞（ふさ）ぐ鳥（とり）かごの少年（しょうねん）</p><p>紧塞住双耳 那笼中的少年</p><p><u>mi e na i te ki to</u> &emsp; <u>ta ta ka~tte ru</u></p><p>見（み）えない敵（てき）と戦（たたか）ってる </p><p>与看不见的敌人战斗着</p><p><u>ro ku jyo <span style="opacity: 0.5;">o</span> </u> &emsp; <u>hi to ma no</u> &emsp; <u>do nn ki ho-te</u></p><p>六畳一間（ろくじょうひとま）のドンキホーテ</p><p>六畳一间的堂吉诃德</p><p>go-ru wa &emsp; <u>do <span style="opacity: 0.5;">o</span>~se mi ni ku i</u> &emsp; mo no sa</p><p>ゴールはどうせ醜（みにく）いものさ </p><p>反正目的也是一样丑陋 </p><p>bo ku ga &emsp; <u>shi no</u> o to &emsp; <u>o mo</u> tta no wa</p><p>僕（ぼく）が死（し）のうと思（おも）ったのは</p><p>曾经我也想过一了百了</p><p>tsu me ta i hi to to &emsp; <u>i wa re</u> &emsp; ta ka ra</p><p>冷（つめ）たい人（ひと）と言（い）われたから </p><p>因为被人说是冷血</p><p>a i sa re ta i to &emsp; na i te i ru no wa</p><p>愛（あい）されたいと泣（な）いているのは</p><p>想要被爱而哭泣</p><p>hi to no nu ku mo ri wo shi &emsp; <u>tte shi ma</u> tta ka ra</p><p>人（ひと）の温（ぬく）もりを知（し）ってしまったから</p><p>是因为尝到了人的温暖</p><hr><p>bo ku ga &emsp; <u>shi no</u> o to &emsp; <u>o mo</u> tta no wa</p><p>僕（ぼく）が死（し）のうと思（おも）ったのは</p><p>曾经我也想过一了百了</p><p>a na ta ga &emsp; ki <u>re e</u> ni &emsp; wa ra u ka ra</p><p>あなたが綺麗（きれい）に笑（わら）うから</p><p>因为你灿烂的笑容</p><p>shi nu ko to ba ka ri &emsp; <u>ka nn ga <span style="opacity: 0.5;">e</span> </u> te shi ma <span style="opacity: 0.5;">u</span> no wa </p><p>死（し）ぬことばかり考（かんが）えてしまうのは</p><p>尽考虑着死的事</p><p>ki <u>tto i ki ru ko to ni</u> &emsp; <u>ma ji me</u> <u>su gi ru ka ra</u></p><p>きっと生（い）きる事（こと）に真面目（まじめ）すぎるから</p><p>一定是因为太过认真地活</p><p>bo ku ga &emsp; <u>shi no</u> o to &emsp; <u>o mo</u> tta no wa</p><p>僕（ぼく）が死（し）のうと思（おも）ったのは </p><p>曾经我也想过一了百了</p><p>ma da a na ta ni de a tte &emsp; na ka &emsp; tta ka ra</p><p>まだあなたに出会（であ）ってなかったから</p><p>因为还未与你相遇</p><p>a na ta~no yo o na &emsp; hi to ga~u ma re ta </p><p>あなたのような人（ひと）が生（う）まれた </p><p>因为有像你这样的人出生</p><p><u>se ka i wo su ko shi</u> &emsp; <u>su ki ni</u> na tta yo</p><p>世界（せかい）を少（すこ）し好（す）きになったよ</p><p>我对世界稍微有了好感</p><p>a na ta no yo o na &emsp; hi to ga i ki te ru</p><p>あなたのような人（ひと）が生（い）きてる </p><p>因为有像你这样的人活在这个世上</p><p>se ka <u>i ni su ko shi</u> &emsp; ki ta i~&emsp; su ru &emsp; yo~</p><p>世界（せかい）に少（すこ）し期待（きたい）するよ </p><p>我对世界稍微有了期待</p>]]></content>
      
      
      
        <tags>
            
            <tag> 歌曲 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一些常用的外挂标签</title>
      <link href="/posts/a709fab5.html"/>
      <url>/posts/a709fab5.html</url>
      
        <content type="html"><![CDATA[<h1 id="分栏"><a href="#分栏" class="headerlink" title="分栏"></a>分栏</h1><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs 分栏 %&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 第一个Tab的名字 --&gt;</span><br><span class="line"></span><br><span class="line">第一个Tab的内容</span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 第二个Tab的名字 --&gt;</span><br><span class="line"></span><br><span class="line">第二个Tab的内容</span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 第三个Tab的名字 --&gt;</span><br><span class="line"></span><br><span class="line">第三个Tab的内容</span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><p>例如：</p><details class="folding-tag" ><summary> 查看代码 </summary>              <div class='content'>              <figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs 分栏 %&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab C++ --&gt;</span><br><span class="line"></span><br><span class="line"><span class="code">```C++</span></span><br><span class="line"><span class="code">#include &lt;iostream&gt;</span></span><br><span class="line"><span class="code">int main() &#123;</span></span><br><span class="line"><span class="code">    std::cout &lt;&lt; &quot;Hello, World!&quot; &lt;&lt; std::endl;</span></span><br><span class="line"><span class="code">    return 0;</span></span><br><span class="line"><span class="code">&#125;</span></span><br><span class="line"><span class="code">```</span></span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab Java --&gt;</span><br><span class="line"></span><br><span class="line"><span class="code">```Java</span></span><br><span class="line"><span class="code">public class HelloWorld &#123;</span></span><br><span class="line"><span class="code">    public static void main(String[] args) &#123;</span></span><br><span class="line"><span class="code">        System.out.println(&quot;Hello, World!&quot;);</span></span><br><span class="line"><span class="code">    &#125;</span></span><br><span class="line"><span class="code">&#125;</span></span><br><span class="line"><span class="code">```</span></span><br><span class="line"></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab Kotlin --&gt;</span><br><span class="line"></span><br><span class="line"><span class="code">```Kotlin</span></span><br><span class="line"><span class="code">fun main() &#123;</span></span><br><span class="line"><span class="code">    println(&quot;Hello, World!&quot;)</span></span><br><span class="line"><span class="code">&#125;</span></span><br><span class="line"><span class="code">```</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>              </div>            </details><div class="tabs" id="分栏"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#分栏-1">C++</button></li><li class="tab"><button type="button" data-href="#分栏-2">Java</button></li><li class="tab"><button type="button" data-href="#分栏-3">Kotlin</button></li><li class="tab"><button type="button" data-href="#分栏-4">Python</button></li><li class="tab"><button type="button" data-href="#分栏-5">Go</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Hello, World!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWorld</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello, World!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-3"><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    println(<span class="string">&quot;Hello, World!&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-4"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Hello, World!&quot;</span>)</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="分栏-5"><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;Hello, World!&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="行内文本-span"><a href="#行内文本-span" class="headerlink" title="行内文本 span"></a>行内文本 span</h1><div class="tabs" id="行内文本-span"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#行内文本-span-1">标签语法</button></li><li class="tab"><button type="button" data-href="#行内文本-span-2">配置参数</button></li><li class="tab"><button type="button" data-href="#行内文本-span-3">样式预览</button></li><li class="tab"><button type="button" data-href="#行内文本-span-4">示例代码</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="行内文本-span-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% span 样式参数(参数以空格划分), 文本内容 %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="行内文本-span-2"><ul><li><p>字体: logo, code</p></li><li><p>颜色: red,yellow,green,cyan,blue,gray</p></li><li><p>大小: small, h4, h3, h2, h1, large, huge, ultra</p></li><li><p>left, center, right</p></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="行内文本-span-3"><ul><li>彩色文字<br>在一段话中方便插入各种颜色的标签，包括：<span class='p red'>红色</span>、<span class='p yellow'>黄色</span>、<span class='p green'>绿色</span>、<span class='p cyan'>青色</span>、<span class='p blue'>蓝色</span>、<span class='p gray'>灰色</span>。</li><li>超大号文字<br>文档「开始」页面中的标题部分就是超大号文字。<br><span class='p center logo large'>Volantis</span><br><span class='p center small'>A Wonderful Theme for Hexo</span></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="行内文本-span-4"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> 彩色文字</span><br><span class="line">  在一段话中方便插入各种颜色的标签，包括：&#123;% span red, 红色 %&#125;、&#123;% span yellow, 黄色 %&#125;、&#123;% span green, 绿色 %&#125;、&#123;% span cyan, 青色 %&#125;、&#123;% span blue, 蓝色 %&#125;、&#123;% span gray, 灰色 %&#125;。</span><br><span class="line"><span class="bullet">-</span> 超大号文字</span><br><span class="line">  文档「开始」页面中的标题部分就是超大号文字。</span><br><span class="line">  &#123;% span center logo large, Volantis %&#125;</span><br><span class="line">  &#123;% span center small, A Wonderful Theme for Hexo %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="label-标签"><a href="#label-标签" class="headerlink" title="label 标签"></a>label 标签</h1><div class="tabs" id="label-标签"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#label-标签-1">标签语法</button></li><li class="tab"><button type="button" data-href="#label-标签-2">配置参数</button></li><li class="tab"><button type="button" data-href="#label-标签-3">样式预览</button></li><li class="tab"><button type="button" data-href="#label-标签-4">示例代码</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="label-标签-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% label text color %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="label-标签-2"><div class="table-container"><table><thead><tr><th style="text-align:center">参数</th><th>含义</th></tr></thead><tbody><tr><td style="text-align:center">text</td><td>文字</td></tr><tr><td style="text-align:center">color</td><td>【可选】背景颜色，默认为 default，default/blue/pink/red/purple/orange/green</td></tr></tbody></table></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="label-标签-3"><p>臣亮言：<mark class="hl-label default">先帝</mark> 创业未半，而<mark class="hl-label blue">中道崩殂</mark> 。今天下三分，<mark class="hl-label pink">益州疲敝</mark> ，此诚<mark class="hl-label red">危急存亡之秋</mark> 也！然侍衞之臣，不懈于内；<mark class="hl-label purple">忠志之士</mark> ，忘身于外者，盖追先帝之殊遇，欲报之于陛下也。诚宜开张圣听，以光先帝遗德，恢弘志士之气；不宜妄自菲薄，引喻失义，以塞忠谏之路也。<br>宫中、府中，俱为一体；陟罚臧否，不宜异同。若有<mark class="hl-label orange">作奸</mark> 、<mark class="hl-label green">犯科</mark> ，及为忠善者，宜付有司，论其刑赏，以昭陛下平明之治；不宜偏私，使内外异法也。</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="label-标签-4"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">臣亮言：&#123;% label 先帝 %&#125;创业未半，而&#123;% label 中道崩殂 blue %&#125;。今天下三分，&#123;% label 益州疲敝 pink %&#125;，此诚&#123;% label 危急存亡之秋 red %&#125;也！然侍衞之臣，不懈于内；&#123;% label 忠志之士 purple %&#125;，忘身于外者，盖追先帝之殊遇，欲报之于陛下也。诚宜开张圣听，以光先帝遗德，恢弘志士之气；不宜妄自菲薄，引喻失义，以塞忠谏之路也。</span><br><span class="line">宫中、府中，俱为一体；陟罚臧否，不宜异同。若有&#123;% label 作奸 orange %&#125;、&#123;% label 犯科 green %&#125;，及为忠善者，宜付有司，论其刑赏，以昭陛下平明之治；不宜偏私，使内外异法也。</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="折叠框-folding"><a href="#折叠框-folding" class="headerlink" title="折叠框 folding"></a>折叠框 folding</h1><div class="tabs" id="折叠框-folding"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#折叠框-folding-1">标签语法</button></li><li class="tab"><button type="button" data-href="#折叠框-folding-2">配置参数</button></li><li class="tab"><button type="button" data-href="#折叠框-folding-3">样式预览</button></li><li class="tab"><button type="button" data-href="#折叠框-folding-4">示例代码</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="折叠框-folding-1"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% folding 参数（可选）, 标题 %&#125;</span><br><span class="line">![](<span class="link">https://bu.dusays.com/2023/06/01/64788d71c832d.webp</span>)</span><br><span class="line">&#123;% endfolding %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="折叠框-folding-2"><ul><li><p>颜色：blue, cyan, green, yellow, red</p></li><li><p>状态：状态填写 open 代表默认打开。</p></li></ul><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="折叠框-folding-3"><details class="folding-tag" ><summary> 查看图片测试 </summary>              <div class='content'>              <p><img src="https://bu.dusays.com/2023/06/01/64788d71c832d.webp" alt=""></p>              </div>            </details><details class="folding-tag" cyan open><summary> 查看默认打开的折叠框 </summary>              <div class='content'>              <p>这是一个默认打开的折叠框。</p>              </div>            </details><details class="folding-tag" green><summary> 查看代码测试 </summary>              <div class='content'>              <p>假装这里有代码块（代码块没法嵌套代码块）</p>              </div>            </details><details class="folding-tag" yellow><summary> 查看列表测试 </summary>              <div class='content'>              <ul><li>haha</li><li>hehe</li></ul>              </div>            </details><details class="folding-tag" red><summary> 查看嵌套测试 </summary>              <div class='content'>              <details class="folding-tag" ><summary> 查看嵌套测试2 </summary>              <div class='content'>              <details class="folding-tag" ><summary> 查看嵌套测试3 </summary>              <div class='content'>              <p>hahaha <span><img src='https://bu.dusays.com/2023/06/01/64788cd5a356b.png' style='height:24px'></span></p>              </div>            </details>              </div>            </details>              </div>            </details><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="折叠框-folding-4"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&#123;% folding 查看图片测试 %&#125;</span><br><span class="line"></span><br><span class="line">![](<span class="link">https://bu.dusays.com/2023/06/01/64788d71c832d.webp</span>)</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding cyan open, 查看默认打开的折叠框 %&#125;</span><br><span class="line"></span><br><span class="line">这是一个默认打开的折叠框。</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding green, 查看代码测试 %&#125;</span><br><span class="line">假装这里有代码块（代码块没法嵌套代码块）</span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding yellow, 查看列表测试 %&#125;</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> haha</span><br><span class="line"><span class="bullet">-</span> hehe</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding red, 查看嵌套测试 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding, 查看嵌套测试2 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding 查看嵌套测试3 %&#125;</span><br><span class="line"></span><br><span class="line">hahaha <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;https://bu.dusays.com/2023/06/01/64788cd5a356b.png&#x27;</span> <span class="attr">style</span>=<span class="string">&#x27;height:24px&#x27;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>]]></content>
      
      
      
        <tags>
            
            <tag> 杂谈 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SEU 2025 SUMMER PRETEST STD</title>
      <link href="/posts/ca0a9da5.html"/>
      <url>/posts/ca0a9da5.html</url>
      
        <content type="html"><![CDATA[<p><a href="https://codeforces.com/gym/105895">The 21st Southeast University Programming Contest (Summer)</a></p><p><strong>下文链接均为验题链接</strong>，题目序号并<strong>不与正赛题目一一对应</strong>，请在上述正赛链接中<strong>自行对照</strong>。</p><p><strong>题目难度</strong>：</p><p>A &lt; E J M &lt; I &lt; N F &lt; D G B &lt; L H</p><p><strong>Created And Written By</strong>:</p><font color="orange">Huan_YP2002</font>, <font color="orange">limithym</font>, <font color="orange">jackylova_fan_fan_fan</font><p><strong>Tester</strong>:</p><font color="Red">Tobo</font>, <font color="Red">Anonyme</font>, <font color="Orange">thisislike_fan</font>, <font color="Purple">LANSGANBS</font>, <font color="Blue">sakuya_maid_fans</font>, <font color="Blue">xukuan</font>, <font color="#03A89E">9756</font>, <font color="#03A89E">king_of_gamers</font><p><strong>Std</strong>:</p><p><font color="Red">Anonyme</font>:</p><ul><li><a href="https://codeforces.com/gym/574109/problem/D">Kings Game (Hard Version)</a></li><li><a href="https://codeforces.com/gym/574109/problem/I">So Far Away</a></li></ul><p><font color="Red">Tobo</font>:</p><ul><li><a href="https://codeforces.com/gym/574109/problem/L">LRU is Best? (Hard Version)</a></li><li><a href="https://codeforces.com/gym/574109/problem/N">混沌数字</a></li></ul><p><font color="orange">thisislike_fan</font>:</p><ul><li><a href="https://codeforces.com/gym/574109/problem/B">Royale Bataille</a></li><li><a href="https://codeforces.com/gym/574109/problem/F">Yuhina City</a></li></ul><p><font color="purple">LANSGANBS</font>:</p><ul><li><a href="https://codeforces.com/gym/574109/problem/A">一卡通</a></li><li><a href="https://codeforces.com/gym/574109/problem/M">猫娘部署</a></li><li><a href="https://codeforces.com/gym/574109/problem/E">十六行诗</a></li><li><a href="https://codeforces.com/gym/574109/problem/J">MEX Should Be Same</a></li></ul><h1 id="一卡通"><a href="#一卡通" class="headerlink" title="一卡通"></a><a href="https://codeforces.com/gym/574109/problem/A">一卡通</a></h1><details class="folding-tag" ><summary> Coding By <font color=purple>LANSGANBS</font> </summary>              <div class='content'>              <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  string s;</span><br><span class="line">  cin &gt;&gt; s;</span><br><span class="line">  <span class="function">regex <span class="title">ss</span><span class="params">(<span class="string">&quot;^21[34]\\d&#123;2&#125;(?!0000)\\d&#123;4&#125;$&quot;</span>)</span></span>;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">regex_match</span>(s, ss)) &#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;YES&quot;</span> &lt;&lt; endl;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;NO&quot;</span> &lt;&lt; endl;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><h1 id="Royale-Bataille"><a href="#Royale-Bataille" class="headerlink" title="Royale Bataille"></a><a href="https://codeforces.com/gym/574109/problem/B">Royale Bataille</a></h1><details class="folding-tag" ><summary> Coding By <font color=orange>thisislike_fan</font> </summary>              <div class='content'>              <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n, m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="function">vector&lt;string&gt; <span class="title">a</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) cin &gt;&gt; a[i];</span><br><span class="line">    </span><br><span class="line">    <span class="type">const</span> <span class="type">int</span> mod = <span class="number">998244353</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">auto</span> process = [&amp;](vector&lt;tuple&lt;<span class="type">int</span>, <span class="type">int</span>, <span class="type">int</span>, <span class="type">int</span>, <span class="type">int</span>, <span class="type">int</span>&gt;&gt; lim, <span class="type">int</span> n, <span class="type">int</span> m) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">        <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">auto</span> check = [&amp;](<span class="type">int</span> s, <span class="type">int</span> t, <span class="type">int</span> l, <span class="type">int</span> r) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> l &lt;= s &amp;&amp; r &lt;= t &amp;&amp; s &lt;= r;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="type">int</span> flag1 = <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> flag2 = <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> last = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; lim.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">            <span class="keyword">auto</span> [left, right, left_inner, right_inner, all_r, all_g] = lim[i];</span><br><span class="line">            <span class="keyword">if</span> (!all_g) last = i + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">f</span>(m, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(m));</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; lim.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">            <span class="keyword">auto</span> [left, right, left_inner, right_inner, all_r, all_g] = lim[i];</span><br><span class="line">            </span><br><span class="line">            vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">tf</span>(m, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(m));</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> l1 = <span class="number">0</span>; l1 &lt; m; l1++) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> r1 = l1; r1 &lt; m; r1++) &#123;</span><br><span class="line">                    <span class="comment">//l1 &lt;= r2 &lt;= r1</span></span><br><span class="line">                    <span class="comment">//l2 &lt;= l1</span></span><br><span class="line">                    (tf[l1][r1] += f[l1][r1]) %= mod;</span><br><span class="line">                    <span class="keyword">if</span> (l1) (tf[l1][l1 - <span class="number">1</span>] -= f[l1][r1]) %= mod;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> l = m - <span class="number">1</span>; l &gt;= <span class="number">0</span>; l--) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> r = m - <span class="number">1</span>; r &gt;= <span class="number">0</span>; r--) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (l + <span class="number">1</span> &lt; m) (tf[l][r] += tf[l + <span class="number">1</span>][r]) %= mod;</span><br><span class="line">                    <span class="keyword">if</span> (r + <span class="number">1</span> &lt; m) (tf[l][r] += tf[l][r + <span class="number">1</span>]) %= mod;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="built_in">max</span>(l, r) + <span class="number">1</span> &lt; m) (tf[l][r] -= tf[l + <span class="number">1</span>][r + <span class="number">1</span>]) %= mod;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> l = <span class="number">0</span>; l &lt; m; l++) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> r = l; r &lt; m; r++) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (left &lt;= l &amp;&amp; l &lt;= left_inner &amp;&amp; right_inner &lt;= r &amp;&amp; r &lt;= right) &#123;</span><br><span class="line">                        </span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        tf[l][r] = <span class="number">0</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (flag1) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> l = left; l &lt;= left_inner; l++) &#123;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="type">int</span> r = <span class="built_in">max</span>(l, right_inner); r &lt;= right; r++) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (i &amp;&amp; r + <span class="number">1</span> &lt; m) <span class="keyword">continue</span>;</span><br><span class="line">                        tf[l][r]++;</span><br><span class="line">                        tf[l][r] %= mod;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (i + <span class="number">1</span> &gt;= last) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> l = <span class="number">0</span>; l &lt; m; l++) &#123;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="type">int</span> r = l; r &lt; m; r++) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (i + <span class="number">1</span> &lt; n &amp;&amp; l) <span class="keyword">continue</span>;</span><br><span class="line">                        ans += tf[l][r];</span><br><span class="line">                        ans %= mod;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            flag1 &amp;= all_r;</span><br><span class="line">            flag2 &amp;= all_g;</span><br><span class="line">            f.<span class="built_in">swap</span>(tf);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//out2(flag1, flag2);</span></span><br><span class="line">        ans += flag1 + flag2;</span><br><span class="line">        ans %= mod;</span><br><span class="line">        ans += mod;</span><br><span class="line">        ans %= mod;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">auto</span> solve_row = [&amp;]() -&gt; <span class="type">void</span> &#123;</span><br><span class="line">        vector&lt;tuple&lt;<span class="type">int</span>, <span class="type">int</span>, <span class="type">int</span>, <span class="type">int</span>, <span class="type">int</span>, <span class="type">int</span>&gt;&gt; ans;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">            <span class="type">int</span> left = <span class="number">0</span>, right = n - <span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span> left_inner = n - <span class="number">1</span>, right_inner = <span class="number">0</span>;</span><br><span class="line">            <span class="type">int</span> flag = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (a[j][i] != <span class="string">&#x27;?&#x27;</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (a[j][i] == <span class="string">&#x27;0&#x27;</span>) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (!flag) &#123;</span><br><span class="line">                            left_inner = right_inner = j;</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            right_inner = j;</span><br><span class="line">                        &#125;</span><br><span class="line">                        flag = <span class="number">1</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a[j][i] == <span class="string">&#x27;1&#x27;</span>) &#123;</span><br><span class="line">                        left = <span class="built_in">max</span>(left, j + <span class="number">1</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a[j][i] == <span class="string">&#x27;2&#x27;</span>) &#123;</span><br><span class="line">                        right = <span class="built_in">min</span>(right, j - <span class="number">1</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            ans.<span class="built_in">emplace_back</span>(left, right, left_inner, right_inner, !flag &amp;&amp; right == n - <span class="number">1</span>, !flag &amp;&amp; left == <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="built_in">process</span>(ans, m, n) &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">auto</span> solve_col = [&amp;]() -&gt; <span class="type">void</span> &#123;</span><br><span class="line">        vector&lt;tuple&lt;<span class="type">int</span>, <span class="type">int</span>, <span class="type">int</span>, <span class="type">int</span>, <span class="type">int</span>, <span class="type">int</span>&gt;&gt; ans;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="type">int</span> left = <span class="number">0</span>, right = m - <span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span> left_inner = m - <span class="number">1</span>, right_inner = <span class="number">0</span>;</span><br><span class="line">            <span class="type">int</span> flag = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (a[i][j] != <span class="string">&#x27;?&#x27;</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (a[i][j] == <span class="string">&#x27;0&#x27;</span>) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (!flag) &#123;</span><br><span class="line">                            left_inner = right_inner = j;</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            right_inner = j;</span><br><span class="line">                        &#125;</span><br><span class="line">                        flag = <span class="number">1</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a[i][j] == <span class="string">&#x27;1&#x27;</span>) &#123;</span><br><span class="line">                        left = <span class="built_in">max</span>(left, j + <span class="number">1</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a[i][j] == <span class="string">&#x27;2&#x27;</span>) &#123;</span><br><span class="line">                        right = <span class="built_in">min</span>(right, j - <span class="number">1</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            ans.<span class="built_in">emplace_back</span>(left, right, left_inner, right_inner, !flag &amp;&amp; right == m - <span class="number">1</span>, !flag &amp;&amp; left == <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="built_in">process</span>(ans, n, m) &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">if</span> (m &lt;= n) <span class="built_in">solve_col</span>();</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">solve_row</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><h1 id="Kings-Game-Hard-Version"><a href="#Kings-Game-Hard-Version" class="headerlink" title="Kings Game (Hard Version)"></a><a href="https://codeforces.com/gym/574109/problem/D">Kings Game (Hard Version)</a></h1><details class="folding-tag" ><summary> Coding By <font color=Red>Anonyme</font> </summary>              <div class='content'>              <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// #undef LOCAL</span></span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> LOCAL</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> NDEBUG</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;numeric&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cassert&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stack&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bitset&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;array&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;random&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;chrono&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> LOCAL</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;D:\c++\Algo\Debug.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> DEBUG <span class="keyword">if</span> (true)</span></span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> debug(...) (void)0</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> DEBUG <span class="keyword">if</span> (false)</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="keyword">namespace</span> Anonyme &#123;</span><br><span class="line"><span class="function">mt19937_64 <span class="title">rnd</span><span class="params">(chrono::steady_clock::now().time_since_epoch().count())</span></span>;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> range(x, l, r) begin(x) + l, begin(x) + r + 1</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> all(x) begin(x), end(x)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> sz(x) (int)x.size()</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> file(x) freopen(x <span class="string">&quot;.in&quot;</span>, <span class="string">&quot;r&quot;</span>, stdin), freopen(x <span class="string">&quot;.out&quot;</span>, <span class="string">&quot;w&quot;</span>, stdout)</span></span><br><span class="line"><span class="keyword">using</span> u32 = <span class="type">unsigned</span> <span class="type">int</span>;</span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="keyword">using</span> u64 = <span class="type">unsigned</span> <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="keyword">using</span> i128 = __int128;</span><br><span class="line"><span class="keyword">using</span> u128 = <span class="type">unsigned</span> __int128;</span><br><span class="line"><span class="keyword">using</span> d32 = <span class="type">double</span>;</span><br><span class="line"><span class="keyword">using</span> d64 = <span class="type">long</span> <span class="type">double</span>;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt; <span class="keyword">using</span> vc = vector&lt;T&gt;;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt; <span class="keyword">inline</span> <span class="type">void</span> <span class="keyword">operator</span> += (vc&lt;T&gt; &amp;x, <span class="type">const</span> T &amp;y) &#123;x.<span class="built_in">push_back</span>(y);&#125;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>, <span class="keyword">class</span> <span class="title class_">U</span>&gt; <span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">ckmax</span><span class="params">(T &amp;x, U &amp;&amp;y)</span> </span>&#123;<span class="keyword">return</span> x &lt; y ? (x = y, <span class="literal">true</span>) : <span class="literal">false</span>;&#125;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>, <span class="keyword">class</span> <span class="title class_">U</span>&gt; <span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">ckmin</span><span class="params">(T &amp;x, U &amp;&amp;y)</span> </span>&#123;<span class="keyword">return</span> y &lt; x ? (x = y, <span class="literal">true</span>) : <span class="literal">false</span>;&#125;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> inf32 = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="type">const</span> i64 inf64 = <span class="number">0x3f3f3f3f3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line">vc&lt;<span class="type">int</span>&gt; pr, vis, mn;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">vis.<span class="built_in">assign</span>(n + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">mn.<span class="built_in">assign</span>(n + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (!vis[i]) pr += i, mn[i] = i;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> j : pr) &#123;</span><br><span class="line"><span class="keyword">if</span> (i * j &gt; n) <span class="keyword">break</span>;</span><br><span class="line">vis[i * j] = <span class="number">1</span>;</span><br><span class="line">mn[i * j] = j;</span><br><span class="line"><span class="keyword">if</span> (i % j == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod = <span class="number">998244353</span>;</span><br><span class="line"><span class="keyword">namespace</span> MTool &#123;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">Cadd</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;<span class="keyword">return</span> (i64)a + b &gt;= mod ? (i64)a + b - mod : a + b;&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">Cdel</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;<span class="keyword">return</span> a - b &lt; <span class="number">0</span> ? a - b + mod : a - b;&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">Cmul</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123;<span class="keyword">return</span> <span class="number">1ll</span> * a * b % mod;&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">sqr</span><span class="params">(<span class="type">int</span> a)</span> </span>&#123;<span class="keyword">return</span> <span class="number">1ll</span> * a * a % mod;&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Madd</span><span class="params">(<span class="type">int</span> &amp;a, <span class="type">int</span> b)</span> </span>&#123;a = (i64)a + b &gt;= mod ? (i64)a + b - mod : a + b;&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Mdel</span><span class="params">(<span class="type">int</span> &amp;a, <span class="type">int</span> b)</span> </span>&#123;a = a - b &lt; <span class="number">0</span> ? a - b + mod : a - b;&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Mmul</span><span class="params">(<span class="type">int</span> &amp;a, <span class="type">int</span> b)</span> </span>&#123;a = <span class="number">1ll</span> * a * b % mod;&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">neg</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;<span class="keyword">return</span> !x ? <span class="number">0</span> : mod - x;&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">norm</span><span class="params">(i64 x)</span> </span>&#123;<span class="keyword">return</span> (x % mod + mod) % mod;&#125;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> ...Args&gt; <span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">Cadd</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b, Args ...args)</span> </span>&#123;<span class="keyword">return</span> <span class="built_in">Cadd</span>(<span class="built_in">Cadd</span>(a, b), args...);&#125;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> ...Args&gt; <span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">Cdel</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b, Args ...args)</span> </span>&#123;<span class="keyword">return</span> <span class="built_in">Cdel</span>(<span class="built_in">Cdel</span>(a, b), args...);&#125;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> ...Args&gt; <span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">Cmul</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b, Args ...args)</span> </span>&#123;<span class="keyword">return</span> <span class="built_in">Cmul</span>(<span class="built_in">Cmul</span>(a, b), args...);&#125;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> ...Args&gt; <span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Madd</span><span class="params">(<span class="type">int</span> &amp;a, <span class="type">int</span> b, Args ...args)</span> </span>&#123;<span class="built_in">Madd</span>(a, b), <span class="built_in">Madd</span>(a, args...);&#125;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> ...Args&gt; <span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Mdel</span><span class="params">(<span class="type">int</span> &amp;a, <span class="type">int</span> b, Args ...args)</span> </span>&#123;<span class="built_in">Mdel</span>(a, b), <span class="built_in">Mdel</span>(a, args...);&#125;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> ...Args&gt; <span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">Mmul</span><span class="params">(<span class="type">int</span> &amp;a, <span class="type">int</span> b, Args ...args)</span> </span>&#123;<span class="built_in">Mmul</span>(a, b), <span class="built_in">Mmul</span>(a, args...);&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">ksm</span><span class="params">(<span class="type">int</span> a, i64 b, <span class="type">int</span> Mod = mod)</span> </span>&#123;<span class="type">int</span> ans = <span class="number">1</span>; <span class="keyword">for</span> (; b; b &gt;&gt;= <span class="number">1</span>, a = <span class="number">1ll</span> * a * a % Mod) <span class="keyword">if</span> (b &amp; <span class="number">1</span>) ans = <span class="number">1ll</span> * ans * a % Mod; <span class="keyword">return</span> ans;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> MTool;</span><br><span class="line"></span><br><span class="line">vc&lt;<span class="type">int</span>&gt; p, tim;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ins</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> id)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">5</span>; i &gt;= <span class="number">0</span>; i--) <span class="keyword">if</span> (x &gt;&gt; i &amp; <span class="number">1</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (!p[i]) &#123;</span><br><span class="line">p[i] = x, tim[i] = id;</span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (tim[i] &lt; id) &#123;</span><br><span class="line"><span class="built_in">swap</span>(p[i], x), <span class="built_in">swap</span>(tim[i], id);</span><br><span class="line">&#125;</span><br><span class="line">x ^= p[i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">vc&lt;<span class="type">int</span>&gt; pw;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="type">int</span> n, q;</span><br><span class="line">cin &gt;&gt; n &gt;&gt; q;</span><br><span class="line"><span class="function">vc&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n)</span></span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>, x; i &lt; n; i++) &#123;</span><br><span class="line">cin &gt;&gt; x;</span><br><span class="line"><span class="keyword">while</span> (x != <span class="number">1</span>) &#123;</span><br><span class="line">a[i]++;</span><br><span class="line">x /= mn[x];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">debug</span>(a);</span><br><span class="line"></span><br><span class="line"><span class="function">vc&lt;<span class="type">int</span>&gt; <span class="title">sum</span><span class="params">(n)</span></span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">sum[i] = (i ? sum[i - <span class="number">1</span>] : <span class="number">0</span>) + (a[i] == <span class="number">1</span>);</span><br><span class="line"><span class="function">vc&lt;<span class="type">int</span>&gt; <span class="title">rsum</span><span class="params">(n)</span></span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">rsum[i] = (i ? rsum[i - <span class="number">1</span>] : <span class="number">0</span>) + (a[i] == <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="function">vc&lt;<span class="type">int</span>&gt; <span class="title">ans</span><span class="params">(q)</span></span>;</span><br><span class="line">vc&lt;vc&lt;array&lt;<span class="type">int</span>, 2&gt;&gt;&gt; <span class="built_in">ask</span>(n);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; q; i++) &#123;</span><br><span class="line"><span class="type">int</span> l, r;</span><br><span class="line">cin &gt;&gt; l &gt;&gt; r;</span><br><span class="line">l--, r--;</span><br><span class="line"><span class="type">int</span> rc = rsum[r] - (l ? rsum[l - <span class="number">1</span>] : <span class="number">0</span>), c = sum[r] - (l ? sum[l - <span class="number">1</span>] : <span class="number">0</span>);</span><br><span class="line"><span class="built_in">Madd</span>(ans[i], pw[r - l + <span class="number">1</span>]);</span><br><span class="line"><span class="built_in">Mdel</span>(ans[i], <span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span> (!c) <span class="built_in">Madd</span>(ans[i], <span class="built_in">Cdel</span>(pw[rc], <span class="number">1</span>));</span><br><span class="line"><span class="keyword">else</span> <span class="built_in">Mdel</span>(ans[i], <span class="number">1</span>);</span><br><span class="line">ask[r] += &#123;l, i&#125;;</span><br><span class="line">&#125;</span><br><span class="line">p.<span class="built_in">assign</span>(<span class="number">6</span>, <span class="number">0</span>), tim.<span class="built_in">assign</span>(<span class="number">6</span>, <span class="number">-1</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line"><span class="built_in">ins</span>(a[i], i);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> [l, id] : ask[i]) &#123;</span><br><span class="line"><span class="type">int</span> c = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt;= <span class="number">5</span>; j++)</span><br><span class="line"><span class="keyword">if</span> (tim[j] &gt;= l) c++;</span><br><span class="line"><span class="built_in">Mdel</span>(ans[id], <span class="built_in">Cdel</span>(pw[i - l + <span class="number">1</span> - c], <span class="number">1</span>));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; q; i++) cout &lt;&lt; ans[i] &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main01</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> LOCAL</span></span><br><span class="line"><span class="built_in">file</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>) -&gt; <span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line"><span class="built_in">init</span>(<span class="number">1e7</span>);</span><br><span class="line">pw.<span class="built_in">resize</span>(<span class="number">1000005</span>);</span><br><span class="line">pw[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; <span class="built_in">sz</span>(pw); i++) pw[i] = <span class="built_in">Cadd</span>(pw[i - <span class="number">1</span>], pw[i - <span class="number">1</span>]);</span><br><span class="line"><span class="type">int</span> t = <span class="number">1</span>;</span><br><span class="line">cin &gt;&gt; t;</span><br><span class="line"><span class="keyword">while</span> (t--) <span class="built_in">solve</span>();</span><br><span class="line">&#125;&#125;</span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;<span class="keyword">return</span> Anonyme::<span class="built_in">main01</span>(), <span class="number">0</span>;&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><h1 id="十六行诗"><a href="#十六行诗" class="headerlink" title="十六行诗"></a><a href="https://codeforces.com/gym/574109/problem/E">十六行诗</a></h1><details class="folding-tag" ><summary> Coding By <font color=purple>LANSGANBS</font> </summary>              <div class='content'>              <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="type">int</span> n;</span><br><span class="line">  cin &gt;&gt; n;</span><br><span class="line">  <span class="function">V&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    cin &gt;&gt; a[i];</span><br><span class="line">  &#125;</span><br><span class="line">  V&lt;<span class="type">int</span>&gt; tmp = a;</span><br><span class="line">  <span class="built_in">remDup</span>(tmp);</span><br><span class="line">  <span class="type">int</span> d = tmp.<span class="built_in">size</span>();</span><br><span class="line">  <span class="keyword">auto</span> get = [&amp;](<span class="type">int</span> x) &#123;</span><br><span class="line">    <span class="built_in">return</span> (<span class="built_in">lower_bound</span>(tmp.<span class="built_in">begin</span>() + <span class="number">1</span>, tmp.<span class="built_in">end</span>(), x) - (tmp.<span class="built_in">begin</span>()));</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    a[i] = <span class="built_in">get</span>(a[i]);</span><br><span class="line">  &#125;</span><br><span class="line">  V&lt;V&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">nxt</span>(n + <span class="number">2</span>, <span class="built_in">V</span>&lt;<span class="type">int</span>&gt;(d + <span class="number">1</span>, n + <span class="number">1</span>));</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> v = <span class="number">1</span>; v &lt;= d; v++) &#123;</span><br><span class="line">    nxt[n + <span class="number">1</span>][v] = n + <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = n; i &gt;= <span class="number">1</span>; i--) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> v = <span class="number">1</span>; v &lt;= d; v++) &#123;</span><br><span class="line">      nxt[i][v] = nxt[i + <span class="number">1</span>][v];</span><br><span class="line">    &#125;</span><br><span class="line">    nxt[i][a[i]] = i;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function">V&lt;<span class="type">int</span>&gt; <span class="title">dp</span><span class="params">(n + <span class="number">2</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = n; i &gt;= <span class="number">1</span>; i--) &#123;</span><br><span class="line">    dp[i] = dp[i + <span class="number">1</span>];</span><br><span class="line">    <span class="type">int</span> j = nxt[i + <span class="number">1</span>][a[i]];</span><br><span class="line">    <span class="keyword">if</span> (j &lt;= n) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> b = <span class="number">1</span>; b &lt;= d; b++) &#123;</span><br><span class="line">        <span class="type">int</span> k = nxt[j + <span class="number">1</span>][b];</span><br><span class="line">        <span class="keyword">if</span> (k &gt; n) &#123;</span><br><span class="line">          <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> l = nxt[k + <span class="number">1</span>][b];</span><br><span class="line">        <span class="keyword">if</span> (l &gt; n) &#123;</span><br><span class="line">          <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        dp[i] = <span class="built_in">max</span>(dp[i], <span class="number">1</span> + dp[l + <span class="number">1</span>]);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = i + <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">      <span class="type">int</span> k = nxt[j + <span class="number">1</span>][a[i]];</span><br><span class="line">      <span class="keyword">if</span> (k &gt; n) &#123;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="type">int</span> l = nxt[k + <span class="number">1</span>][a[j]];</span><br><span class="line">      <span class="keyword">if</span> (l &gt; n) &#123;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      dp[i] = <span class="built_in">max</span>(dp[i], <span class="number">1</span> + dp[l + <span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = i + <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">      <span class="type">int</span> k = nxt[j + <span class="number">1</span>][a[j]];</span><br><span class="line">      <span class="keyword">if</span> (k &gt; n) &#123;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="type">int</span> l = nxt[k + <span class="number">1</span>][a[i]];</span><br><span class="line">      <span class="keyword">if</span> (l &gt; n) &#123;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      dp[i] = <span class="built_in">max</span>(dp[i], <span class="number">1</span> + dp[l + <span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  cout &lt;&lt; dp[<span class="number">1</span>] &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><h1 id="Yuhina-City"><a href="#Yuhina-City" class="headerlink" title="Yuhina City"></a><a href="https://codeforces.com/gym/574109/problem/F">Yuhina City</a></h1><details class="folding-tag" ><summary> Coding By <font color=orange>thisislike_fan</font> </summary>              <div class='content'>              <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n, m, q;</span><br><span class="line">    n = <span class="built_in">read</span>(), m = <span class="built_in">read</span>(), q = <span class="built_in">read</span>();</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">r</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) r[i] = <span class="built_in">read_ll</span>();</span><br><span class="line">    </span><br><span class="line">    vector&lt;vector&lt;pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;&gt;&gt; <span class="built_in">g</span>(n + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">        <span class="type">int</span> u, v, w;</span><br><span class="line">        u = <span class="built_in">read</span>(), v = <span class="built_in">read</span>(), w = <span class="built_in">read</span>();</span><br><span class="line">        g[u].<span class="built_in">emplace_back</span>(v, w);</span><br><span class="line">        g[v].<span class="built_in">emplace_back</span>(u, w);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    &#123;</span><br><span class="line">        priority_queue&lt;pair&lt;ll, <span class="type">int</span>&gt;, vector&lt;pair&lt;ll, <span class="type">int</span>&gt;&gt;, less&lt;pair&lt;ll, <span class="type">int</span>&gt;&gt;&gt; q;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) q.<span class="built_in">push</span>(&#123;r[i], i&#125;);</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> (!q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">            <span class="keyword">auto</span> [d, u] = q.<span class="built_in">top</span>(); q.<span class="built_in">pop</span>();</span><br><span class="line">            <span class="keyword">if</span> (r[u] != d) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">auto</span> [v, w] : g[u]) &#123;</span><br><span class="line">                <span class="keyword">if</span> (d - w &gt; r[v]) &#123;</span><br><span class="line">                    r[v] = d - w;</span><br><span class="line">                    q.<span class="built_in">push</span>(&#123;r[v], v&#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">vector&lt;ll&gt; <span class="title">k</span><span class="params">(r)</span></span>;</span><br><span class="line">    <span class="built_in">sort</span>(k.<span class="built_in">begin</span>(), k.<span class="built_in">end</span>());</span><br><span class="line">    k.<span class="built_in">erase</span>(<span class="built_in">unique</span>(k.<span class="built_in">begin</span>(), k.<span class="built_in">end</span>()), k.<span class="built_in">end</span>());</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">auto</span> check = [&amp;](<span class="type">int</span> u, <span class="type">int</span> v, ll f, <span class="type">int</span> k) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">        vector&lt;<span class="type">int</span>&gt; <span class="built_in">dist</span>(n + <span class="number">1</span>, infi);</span><br><span class="line">        dist[u] = r[u] &gt; f;</span><br><span class="line">        deque&lt;pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;&gt; que;</span><br><span class="line">        que.<span class="built_in">push_back</span>(&#123;dist[u], u&#125;);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> (!que.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">            <span class="keyword">auto</span> [d, u] = que.<span class="built_in">front</span>(); que.<span class="built_in">pop_front</span>();</span><br><span class="line">            <span class="keyword">if</span> (dist[u] != d) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">auto</span> [v, _] : g[u]) &#123;</span><br><span class="line">                <span class="type">int</span> w = r[v] &gt; f;</span><br><span class="line">                <span class="keyword">if</span> (dist[v] &gt; d + w) &#123;</span><br><span class="line">                    dist[v] = d + w;</span><br><span class="line">                    <span class="keyword">if</span> (w) que.<span class="built_in">push_back</span>(&#123;dist[v], v&#125;);</span><br><span class="line">                    <span class="keyword">else</span> que.<span class="built_in">push_front</span>(&#123;dist[v], v&#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dist[v] &lt;= k;</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> (q--) &#123;</span><br><span class="line">        <span class="type">int</span> u, v, c;</span><br><span class="line">        u = <span class="built_in">read</span>(), v = <span class="built_in">read</span>(), c = <span class="built_in">read</span>();</span><br><span class="line">        <span class="type">int</span> left = <span class="number">0</span>, right = k.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">        ll ans = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">while</span> (left &lt;= right) &#123;</span><br><span class="line">            <span class="type">int</span> mid = left + (right - left) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">check</span>(u, v, k[mid], c)) &#123;</span><br><span class="line">                ans = k[mid];</span><br><span class="line">                right = mid - <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                left = mid + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">Print</span>(ans, <span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">Write</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><h1 id="So-Far-Away"><a href="#So-Far-Away" class="headerlink" title="So Far Away"></a><a href="https://codeforces.com/gym/574109/problem/I">So Far Away</a></h1><details class="folding-tag" ><summary> Coding By <font color=Red>Anonyme</font> </summary>              <div class='content'>              <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="type">int</span> n, q;</span><br><span class="line">cin &gt;&gt; n &gt;&gt; q;</span><br><span class="line"></span><br><span class="line"><span class="function">vc&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n)</span></span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> &amp;x : a) cin &gt;&gt; x;</span><br><span class="line">set&lt;array&lt;<span class="type">int</span>, 2&gt;&gt; s;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) s.<span class="built_in">insert</span>(&#123;a[i], i&#125;);</span><br><span class="line"> </span><br><span class="line"><span class="function">vc&lt;<span class="type">int</span>&gt; <span class="title">idx</span><span class="params">(n, <span class="number">-1</span>)</span></span>;</span><br><span class="line"><span class="keyword">while</span> (q--) &#123;</span><br><span class="line"><span class="type">int</span> op;</span><br><span class="line">cin &gt;&gt; op;</span><br><span class="line"><span class="keyword">if</span> (op == <span class="number">1</span>) &#123;</span><br><span class="line"><span class="type">int</span> x, w;</span><br><span class="line">cin &gt;&gt; x &gt;&gt; w;</span><br><span class="line">x--;</span><br><span class="line">s.<span class="built_in">erase</span>(&#123;a[x], x&#125;);</span><br><span class="line">a[x] = w;</span><br><span class="line">s.<span class="built_in">insert</span>(&#123;a[x], x&#125;);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="type">int</span> u, v, k;</span><br><span class="line">cin &gt;&gt; u &gt;&gt; v &gt;&gt; k;</span><br><span class="line">u--, v--;</span><br><span class="line"> </span><br><span class="line">vc&lt;<span class="type">int</span>&gt; pos;</span><br><span class="line">pos += u, pos += v;</span><br><span class="line">idx[u] = <span class="number">0</span>, idx[v] = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> [d, i] : s) <span class="keyword">if</span> (i != u &amp;&amp; i != v) &#123;</span><br><span class="line">idx[i] = <span class="built_in">sz</span>(pos), pos += i;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">sz</span>(pos) == <span class="number">12</span>) <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="type">int</span> m = <span class="built_in">sz</span>(pos);</span><br><span class="line">vc&lt;vc&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">f</span>(m, <span class="built_in">vc</span>&lt;<span class="type">int</span>&gt; (m, inf32));</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++) </span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; j++) </span><br><span class="line">f[i][j] = <span class="built_in">min</span>(a[pos[i]], a[pos[j]]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++) f[i][i] = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; k; i++) &#123;</span><br><span class="line"><span class="type">int</span> x, y;</span><br><span class="line">cin &gt;&gt; x &gt;&gt; y;</span><br><span class="line">x--, y--;</span><br><span class="line"><span class="keyword">if</span> (idx[x] == <span class="number">-1</span> || idx[y] == <span class="number">-1</span>) <span class="keyword">continue</span>;</span><br><span class="line">f[idx[x]][idx[y]] = f[idx[y]][idx[x]] = inf32;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++) </span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; j++) </span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">0</span>; k &lt; m; k++)</span><br><span class="line"><span class="built_in">ckmin</span>(f[j][k], f[j][i] + f[i][k]);</span><br><span class="line"> </span><br><span class="line">cout &lt;&lt; f[<span class="number">0</span>][<span class="number">1</span>] &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="built_in">sz</span>(pos); i++) idx[pos[i]] = <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><h1 id="MEX-Should-Be-Same"><a href="#MEX-Should-Be-Same" class="headerlink" title="MEX Should Be Same"></a><a href="https://codeforces.com/gym/574109/problem/J">MEX Should Be Same</a></h1><details class="folding-tag" ><summary> Coding By <font color=purple>LANSGANBS</font> </summary>              <div class='content'>              <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="type">int</span> n;</span><br><span class="line">  cin &gt;&gt; n;</span><br><span class="line">  V&lt;V&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">b</span>(n, <span class="built_in">V</span>&lt;<span class="type">int</span>&gt;(n, <span class="number">0</span>));</span><br><span class="line">  <span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;x : b) &#123;</span><br><span class="line">    cin &gt;&gt; x;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;x : b) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;y : x) &#123;</span><br><span class="line">      <span class="keyword">if</span> (y == <span class="number">0</span>) &#123;</span><br><span class="line">        cnt++;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="type">int</span> maxx = <span class="built_in">div</span>&lt;<span class="type">int</span>&gt;(n * n, <span class="number">2</span>, flase);</span><br><span class="line">  <span class="type">int</span> ok = (cnt &lt;= maxx ? <span class="number">1</span> : <span class="number">0</span>);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;x : b) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;y : x) &#123;</span><br><span class="line">      <span class="keyword">if</span> ((ok <span class="keyword">and</span> y == <span class="number">0</span>) <span class="built_in">or</span> (ok == <span class="number">0</span> <span class="keyword">and</span> y)) &#123;</span><br><span class="line">        y = ok;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;x : b) &#123;</span><br><span class="line">    cout &lt;&lt; x &lt;&lt; endl;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><h1 id="LRU-is-Best-Hard-Version"><a href="#LRU-is-Best-Hard-Version" class="headerlink" title="LRU is Best? (Hard Version)"></a><a href="https://codeforces.com/gym/574109/problem/L">LRU is Best? (Hard Version)</a></h1><details class="folding-tag" ><summary> Coding By <font color=Red>Tobo</font> </summary>              <div class='content'>              <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MAXN = <span class="number">800</span> * <span class="number">3</span>;</span><br><span class="line"><span class="type">const</span> i64 INF = <span class="number">1e18</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Edge</span> &#123;</span><br><span class="line">    <span class="type">int</span> to, cap, cost, rev;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">vector&lt;Edge&gt; G[MAXN];</span><br><span class="line">i64 dist[MAXN];</span><br><span class="line"><span class="type">int</span> prevv[MAXN], preve[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加边的函数</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add_edge</span><span class="params">(<span class="type">int</span> from, <span class="type">int</span> to, <span class="type">int</span> cap, <span class="type">int</span> cost)</span> </span>&#123;</span><br><span class="line">    G[from].<span class="built_in">push_back</span>(&#123;to, cap, cost, (<span class="type">int</span>)G[to].<span class="built_in">size</span>()&#125;);</span><br><span class="line">    G[to].<span class="built_in">push_back</span>(&#123;from, <span class="number">0</span>, -cost, (<span class="type">int</span>)G[from].<span class="built_in">size</span>() - <span class="number">1</span>&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 求解最大费用流</span></span><br><span class="line"><span class="function">pair&lt;<span class="type">int</span>, i64&gt; <span class="title">min_cost_flow</span><span class="params">(<span class="type">int</span> s, <span class="type">int</span> t, <span class="type">int</span> f)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> flow = <span class="number">0</span>;</span><br><span class="line">    i64 cost = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (flow &lt; f) &#123;</span><br><span class="line">        <span class="built_in">fill</span>(dist, dist + MAXN, -INF);</span><br><span class="line">        dist[s] = <span class="number">0</span>;</span><br><span class="line">        <span class="type">bool</span> update = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">while</span> (update) &#123;</span><br><span class="line">            update = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> v = <span class="number">0</span>; v &lt; MAXN; v++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (dist[v] == -INF) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; G[v].<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">                    Edge &amp;e = G[v][i];</span><br><span class="line">                    <span class="keyword">if</span> (e.cap &gt; <span class="number">0</span> &amp;&amp; dist[e.to] &lt; dist[v] + e.cost) &#123;</span><br><span class="line">                        dist[e.to] = dist[v] + e.cost;</span><br><span class="line">                        prevv[e.to] = v;</span><br><span class="line">                        preve[e.to] = i;</span><br><span class="line">                        update = <span class="literal">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (dist[t] == -INF) &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;flow, cost&#125;;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> d = f - flow;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> v = t; v != s; v = prevv[v]) &#123;</span><br><span class="line">            d = <span class="built_in">min</span>(d, G[prevv[v]][preve[v]].cap);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> v = t; v != s; v = prevv[v]) &#123;</span><br><span class="line">            Edge &amp;e = G[prevv[v]][preve[v]];</span><br><span class="line">            e.cap -= d;</span><br><span class="line">            G[v][e.rev].cap += d;</span><br><span class="line">            cost += <span class="number">1ll</span> * d * e.cost;</span><br><span class="line">        &#125;</span><br><span class="line">        flow += d;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;flow, cost&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>)-&gt;<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> t;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span> (t--) &#123;</span><br><span class="line">        <span class="type">int</span> n, m;</span><br><span class="line">        cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">        i64 ans = <span class="number">0</span>;</span><br><span class="line">        <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n + <span class="number">1</span>)</span>, x </span>= a, y = a, z = a;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            cin &gt;&gt; a[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            cin &gt;&gt; x[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            cin &gt;&gt; y[i];</span><br><span class="line">            ans -= y[i];</span><br><span class="line">            x[i] += y[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            cin &gt;&gt; z[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> tot = <span class="number">0</span>;</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">id</span>(n + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(n + <span class="number">1</span>));</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            id[i] = id[i - <span class="number">1</span>];</span><br><span class="line">            id[i][<span class="number">0</span>] = ++tot;</span><br><span class="line">            id[i][a[i]] = ++tot;</span><br><span class="line">            <span class="built_in">add_edge</span>(id[i][a[i]], id[i][<span class="number">0</span>], <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">            <span class="built_in">add_edge</span>(id[i][<span class="number">0</span>], id[i][a[i]], <span class="number">1</span>, -z[i]);</span><br><span class="line">            <span class="keyword">if</span> (i &gt; <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="built_in">add_edge</span>(id[i - <span class="number">1</span>][<span class="number">0</span>], id[i][<span class="number">0</span>], m, <span class="number">0</span>);</span><br><span class="line">                <span class="built_in">add_edge</span>(id[i - <span class="number">1</span>][a[i]], id[i][a[i]], <span class="number">1</span>, x[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; ans + <span class="built_in">min_cost_flow</span>(id[<span class="number">1</span>][<span class="number">0</span>], id[n][<span class="number">0</span>], m).second &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= tot; i++) &#123;</span><br><span class="line">            G[i].<span class="built_in">clear</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">1</span></span><br><span class="line"><span class="comment">2 2</span></span><br><span class="line"><span class="comment">1 2</span></span><br><span class="line"><span class="comment">1 1</span></span><br><span class="line"><span class="comment">0 0</span></span><br><span class="line"><span class="comment">0 0</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>              </div>            </details><h1 id="猫娘部署"><a href="#猫娘部署" class="headerlink" title="猫娘部署"></a><a href="https://codeforces.com/gym/574109/problem/M">猫娘部署</a></h1><details class="folding-tag" ><summary> Coding By <font color=purple>LANSGANBS</font> </summary>              <div class='content'>              <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="type">int</span> n, m;</span><br><span class="line">  cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">  <span class="function">V&lt;string&gt; <span class="title">a</span><span class="params">(n)</span></span>;</span><br><span class="line">  cin &gt;&gt; a;</span><br><span class="line">  <span class="function">V&lt;<span class="type">int</span>&gt; <span class="title">avi</span><span class="params">(n, <span class="number">0</span>)</span></span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">    <span class="type">int</span> so = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (a[i][j] == <span class="string">&#x27;Y&#x27;</span>) &#123;</span><br><span class="line">        so |= (<span class="number">1</span> &lt;&lt; j);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    avi[i] = so;</span><br><span class="line">  &#125;</span><br><span class="line">  V&lt;V&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">valid</span>(n);</span><br><span class="line">  V&lt;V&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">cnt</span>(n);</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; (<span class="number">1</span> &lt;&lt; m); j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> ((j &amp; avi[i]) != j) &#123;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (j &amp; (j &lt;&lt; <span class="number">1</span>)) &#123;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      valid[i].<span class="built_in">pb</span>(j);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="type">int</span> lim = (<span class="number">1</span> &lt;&lt; m);</span><br><span class="line">  V&lt;V&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">dp</span>(n, <span class="built_in">V</span>&lt;<span class="type">int</span>&gt;(lim, <span class="number">-1</span>));</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span> x : valid[<span class="number">0</span>]) &#123;</span><br><span class="line">    dp[<span class="number">0</span>][x] = __builtin_popcount(x);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;x : valid[i]) &#123;</span><br><span class="line">      <span class="type">int</span> cur = __builtin_popcount(x);</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;y : valid[i - <span class="number">1</span>]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (dp[i - <span class="number">1</span>][y] &lt; <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (x &amp; y) &#123;</span><br><span class="line">          <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        dp[i][x] = <span class="built_in">max</span>(dp[i][x], dp[i - <span class="number">1</span>][y] + cur);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; lim; i++) &#123;</span><br><span class="line">    <span class="built_in">ckmax</span>(ans, dp[n<span class="number">-1</span>][i]);</span><br><span class="line">  &#125;</span><br><span class="line">  cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><h1 id="混沌数字"><a href="#混沌数字" class="headerlink" title="混沌数字"></a><a href="https://codeforces.com/gym/574109/problem/N">混沌数字</a></h1><details class="folding-tag" ><summary> Coding By <font color=Red>Tobo</font> </summary>              <div class='content'>              <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>)-&gt;<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ifstream cin;</span></span><br><span class="line">    <span class="comment">// cin.open(&quot;0.in&quot;);</span></span><br><span class="line">    <span class="type">int</span> n, m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="function">vector <span class="title">a</span><span class="params">(n, vector(m, <span class="type">int</span>(<span class="number">0</span>)))</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;t : a) &#123;</span><br><span class="line">        string s;</span><br><span class="line">        cin &gt;&gt; s;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; j++) &#123;</span><br><span class="line">            t[j] = s[j] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// cin.close();</span></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">fa</span><span class="params">(n * m)</span>, <span class="title">siz</span><span class="params">(n * m, <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="built_in">iota</span>(fa.<span class="built_in">begin</span>(), fa.<span class="built_in">end</span>(), <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">auto</span> find = [&amp;](<span class="keyword">auto</span> &amp;find, <span class="type">int</span> x) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (x == fa[x]) <span class="keyword">return</span> x;</span><br><span class="line">        <span class="keyword">return</span> fa[x] = <span class="built_in">find</span>(find, fa[x]);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">auto</span> id = [&amp;](<span class="type">int</span> x, <span class="type">int</span> y) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> x * m + y;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!a[i][j]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span> (i <span class="keyword">and</span> a[i - <span class="number">1</span>][j]) &#123;</span><br><span class="line">                <span class="type">int</span> fx = <span class="built_in">find</span>(find, <span class="built_in">id</span>(i - <span class="number">1</span>, j));</span><br><span class="line">                <span class="type">int</span> fy = <span class="built_in">find</span>(find, <span class="built_in">id</span>(i, j));</span><br><span class="line">                <span class="keyword">if</span> (fx == fy) <span class="keyword">continue</span>;</span><br><span class="line">                fa[fy] = fx;</span><br><span class="line">                siz[fx] += siz[fy];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (j <span class="keyword">and</span> a[i][j - <span class="number">1</span>]) &#123;</span><br><span class="line">                <span class="type">int</span> fx = <span class="built_in">find</span>(find, <span class="built_in">id</span>(i, j - <span class="number">1</span>));</span><br><span class="line">                <span class="type">int</span> fy = <span class="built_in">find</span>(find, <span class="built_in">id</span>(i, j));</span><br><span class="line">                <span class="keyword">if</span> (fx == fy) <span class="keyword">continue</span>;</span><br><span class="line">                fa[fy] = fx;</span><br><span class="line">                siz[fx] += siz[fy];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    string ans;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; j++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!a[i][j]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="type">int</span> cur = <span class="built_in">id</span>(i, j);</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">find</span>(find, cur) != cur) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span> (siz[cur] &lt;= n * <span class="number">2</span>) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span> (siz[cur] &gt;= n * <span class="number">15</span>) ans.<span class="built_in">push_back</span>(<span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">            <span class="keyword">else</span> ans.<span class="built_in">push_back</span>(<span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; ans &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>              </div>            </details>]]></content>
      
      
      
        <tags>
            
            <tag> XCPC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>米津玄师《Lemon》歌词及罗马音发音</title>
      <link href="/posts/e7b1f3d7.html"/>
      <url>/posts/e7b1f3d7.html</url>
      
        <content type="html"><![CDATA[<p>【歌词及罗马音发音】《Lemon》 - 米津玄师</p><p>填词：米津玄师</p><p>谱曲：米津玄师</p><p>编曲：米津玄师</p><p>歌曲原唱：米津玄师</p><p><img src="https://image.lansganbs.cn/f0199c4cc60b97e55e6c671a8664e1f4.png" alt=""></p><p><a href="https://music.apple.com/cn/album/lemon/1537460610?i=1537460612">Lemon</a></p><hr><p>yu me na~ra ba &emsp; do~re ho do &emsp; yo~ka tta de sho o</p><p>梦（ゆめ）ならば &emsp; どれほど &emsp; よかったでしょう</p><p>如果这一切都是梦境该有多好</p><p>i ma da &emsp; ni~a na ta~no &emsp; ko to wo &emsp; <u>yu me</u>~ni mi ru</p><p>未（いま）だ &emsp; にあなた &emsp; のことを &emsp; 梦（ゆめ）にみる</p><p>至今仍能与你在梦中相遇</p><p>wa su re~ta mo &emsp; no~wo to ri &emsp; ni~ka e ru &emsp; yo o ni</p><p>忘（わす）れた物（もの） &emsp; を取（と）り &emsp; に 帰（かえ）る &emsp; ように</p><p>如同取回遗忘之物一般</p><p>fu ru bi~&emsp; ta o mo i de &emsp; no ho ko~ri wo &emsp; ha ra u</p><p>古（ふる）びた思（おも）い出（で）の埃（ほこり）  を払（はら）う</p><p>细细拂去将回忆覆盖的尘埃</p><p>mo do ra~na i &emsp; shi~a wa se &emsp; ga~a ru ko &emsp; to~wo</p><p>戻（もど）らない     幸（しあわ）せ    があることを</p><p>这世间亦有无法挽回的幸福</p><p>sa i go &emsp; ni~a na ta~ga &emsp; o shi e &emsp; te~ku re ta</p><p>最後（さいご）&emsp; にあなた &emsp; が教（おし）え &emsp; てくれた</p><p>最终是你让我懂得这一点</p><p>i e zu~ni ka &emsp; ku~shi te ta &emsp; ku~ra i ka &emsp; ko~mo</p><p>言（い）えずに隠（かく） &emsp; してた &emsp; 昏（くら）い過去（かこ）も</p><p>那些未对他人提及过的黑暗往事</p><p>a na ta &emsp; ga~i na kya &emsp; e i e n ni &emsp; ku ra~i ma ma </p><p>あなた &emsp; がいなきゃ 永远（えいえん）に &emsp; 昏（くら）いまま</p><p>如果不曾有你的话 它们将永远沉睡在黑暗中</p><p>ki tto mo o ko re i~jo o &emsp; ki~zu tsu ku ko to na do</p><p>きっともうこれ以上（いじょう）&emsp; 傷（きず）つくことなど</p><p>比这更令人难过的事情</p><p>a~ri wa shi na i~to wa &emsp; ka tte i ru</p><p>ありはしないとわ &emsp; かっている</p><p>我知道不可能存在</p><p>a no hi no ka na &emsp; shi mi sa e</p><p>あの日（ひ）の悲（かな） &emsp; しみさえ</p><p>那日的悲伤</p><p>a no hi no ku ru &emsp; shi mi sa e</p><p>あの日（ひ）の苦（くる） &emsp; しみさえ</p><p>与那日的痛苦</p><p>so no su be te wo &emsp; a i shi te ta &emsp; a na ta to to mo ni</p><p>そのすべてを &emsp; 爱（あい）してた &emsp; あなたとともに</p><p>连同深爱着这一切的你</p><p>mu ne ni no ko ri &emsp; ha na re na i</p><p>胸（むね）に残（のこ）り &emsp; 離（はな）れない</p><p>化作了深深烙印在我心中的</p><p>ni ga i re mo n &emsp; no ni o i</p><p>苦（にが）いレモン &emsp; の匂（にお）い</p><p>苦涩柠檬的香气</p><p>a me ga fu ri ya mu ma de wa ka e re na i</p><p>雨（あめ）が降（ふ）り止（や）むまでは      帰（かえ）れない</p><p>在雨过天晴前都无法归去</p><p>i ma de mo a na ta wa wa ta shi no hi ka ri</p><p>今（いま）でもあなたはわたしの光（ひかり）</p><p>时至今日 你仍是我的光芒</p><p>ku ra ya mi de &emsp; a na ta no &emsp; se wo na zo tta</p><p>暗闇（くらやみ）で &emsp; あなたの &emsp; 背（せ）をなぞった</p><p>在黑暗中追寻着你的身影</p><p>so no ri n &emsp; ka ku wo se n me i &emsp; ni o bo &emsp; e te i ru</p><p>その輪郭（りんかく）を鮮明（せんめい） &emsp; に 覚（おぼ） &emsp; えている</p><p>那轮廓至今仍鲜明地刻印于心</p><p>u ke to me ki &emsp; re na i mo no &emsp; to de a u ta bi</p><p>受（う）け止（と）めき &emsp; れないもの &emsp; と出会（であ）うたび</p><p>每当遇到无法承受的苦痛时</p><p>a fu re &emsp; te ya ma na i no wa &emsp; na mi da da ke</p><p>溢（あふ）れ &emsp; てやまないのは &emsp; 涙（なみだ）だけ</p><p>总不禁泪如泉涌</p><p>na ni wo shi te i ta no</p><p>何（なに）をしていたの</p><p>你都经历过什么</p><p>na ni wo mi te i ta no</p><p>何（なに）を見（み）ていたの</p><p>又目睹过什么呢</p><p>wa ta shi &emsp; no shi ra na i &emsp; yo ko ga o de</p><p>わたし &emsp; の知（し）らない &emsp; 横顔（よこがお）で</p><p>脸上浮现着我不曾见过的神情</p><p>do ko ka de a na &emsp; ta ga i ma</p><p>どこかであな &emsp; たが今（いま）</p><p>如果你正在什么地方</p><p>wa ta shi to o na &emsp; ji yo o na</p><p>わたしと同（おな） &emsp; じ 様（よう）な</p><p>与我一样</p><p>na mi da ni ku re &emsp; sa bi shi sa no &emsp; na ka ni i ru na ra</p><p>涙（なみだ）にくれ &emsp; 淋（さび）しさの &emsp; 中（なか）にいるなら</p><p>终日过着以泪洗面的寂寞生活的话</p><p>wa ta shi no ko to &emsp; na do do u &emsp; ka wa su re te ku da sa i</p><p>わたしのこと &emsp; などどう &emsp; か忘（わす）れてください</p><p>就请你将我的一切全部遗忘吧</p><p>so n na ko to wo &emsp; ko ko ro ka ra &emsp; ne ga u &emsp; ho do ni</p><p>そんなことを &emsp; 心（こころ）から &emsp; 願（ねが）う &emsp; ほどに</p><p>这是我发自内深处唯一的祈愿</p><p>i ma de mo &emsp; a na ta wa wa ta shi no hi ka ri</p><p>今（いま）でも &emsp; あなたはわたしの光（ひかり）</p><p>时至今日 你仍是我的光芒</p><p>ji bu n ga o mo u yo ri</p><p>自分（じぶん）が思（おも）うより</p><p>超出了我自己的想象</p><p>ko i wo shi te i ta a na ta ni</p><p>恋（こい）をしていたあなたに</p><p>我深深地恋慕着你</p><p>a re ka ra o mo u yo u ni &emsp; i ki ga de ki na i</p><p>あれから思（おも）うように &emsp; 息（いき）ができない</p><p>自此每当想起你 都如同窒息般痛苦</p><p>a n na ni &emsp; so ba ni i ta no ni &emsp; ma ru de u so mi ta i</p><p>あんなに &emsp; 侧（そば）にいたのに &emsp; まるで嘘（うそ）みたい</p><p>你曾亲密伴我身旁 如今却如烟云般消散</p><p>to te mo &emsp; wa su re ra re na i</p><p>とても &emsp; 忘（わす）れられない</p><p>我永远都不会将你遗忘</p><p>so re da ke ga ta shi ka</p><p>それだけが確（たし）か</p><p>这是唯一能确定的</p><p>a no hi no ka na shi mi sa e</p><p>あの日（ひ）の悲（かな）しみさえ</p><p>那日的悲伤</p><p>a no hi no ku ru shi mi sa e</p><p>あの日（ひ）の苦（くる）しみさえ</p><p>与那日的痛苦</p><p>so no su be te wo &emsp; a i shi te ta &emsp; a na ta to~ &emsp; to mo ni</p><p>そのすべてを &emsp; 爱（あい）してた &emsp; あなたと &emsp; ともに</p><p>连同深爱着这一切的你</p><p>mu ne ni no ko ri &emsp; ha na re na i</p><p>胸（むね）に残（のこ）り &emsp; 離（はな）れない</p><p>化作了深深烙印在我心中的</p><p>ni ga i re mo n no ni o i</p><p>苦（にが）いレモン   の匂（にお）い</p><p>苦涩柠檬的香气</p><p>a me ga &emsp; fu ri ya mu ma de wa &emsp; ka e re na i</p><p>雨（あめ）が &emsp; 降（ふ）り止（や）むまでは &emsp; 帰（かえ）れない</p><p>在雨过天晴前都无法归去</p><p>ki ri wa ke &emsp; ta ka ji tsu no ka &emsp; ta ho u no yo u ni</p><p>切（き）り分（わ）け &emsp; た果実（かじつ）の片方（かたほう）</p><p>の様（よう）に</p><p>如同被切开的半个柠檬一般</p><p>i ma de mo &emsp; a na ta wa wa ta shi no hi ka ri</p><p>今（いま）でも &emsp; あなたはわたしの光（ひかり）</p><p>时至今日 你仍是我的光芒</p>]]></content>
      
      
      
        <tags>
            
            <tag> 歌曲 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>葬送的芙莉莲ED《Anytime Anywhere》歌词及罗马音发音</title>
      <link href="/posts/1c6371d0.html"/>
      <url>/posts/1c6371d0.html</url>
      
        <content type="html"><![CDATA[<p>【歌词及罗马音发音】葬送的芙莉莲 ED 主题曲 - 「Anytime Anywhere」 / milet</p><p>填词：milet</p><p>谱曲：milet、中村泰辅、野村阳一郎</p><p>编曲：Evan Call</p><p>歌曲原唱：milet</p><p><img src="https://image.lansganbs.cn/28ae26dfbc7d14e6538d7de2aeb1fb15.png" alt=""></p><p><a href="https://music.apple.com/cn/album/anytime-anywhere/1708333821?i=1708333825">Anytime Anywhere</a></p><hr><p>And you alright</p><p>过得还好吗</p><p>Can you hear me</p><p>能看见我的声音吗</p><p>誰(だれ)もいない線路沿(せんろぞ)いをなぞってく</p><p>da re <u>mo~i</u> na i se <span style="color: red;">n</span> ro <u>zo~i</u> wo na zo~tte ku</p><p>沿着空无一人的轨道缓缓前行</p><p>大袈裟(おおげさ)に泣(な)いて</p><p><u>o o</u> ge sa ni na i te</p><p>希望你能痛快地哭泣</p><p>笑(わら)ってほしくて</p><p>wa ra &emsp; tte ho shi <span style="opacity: 0.5;">ku</span> te</p><p>能肆意的欢笑</p><p>鮮明(せんめい)でいたい思(おも)い出(で)を抱(だ)きしめてる</p><p><u>se n</u> <u>me e</u> <u>de i</u> <u>ta i</u> <u>o mo</u>~i <u>de wo</u>~da ki shi me~te~ru</p><p>我希望那些回忆能够永不褪色</p><p>さよならよりずっと大切(たいせつ)な</p><p>sa yo na ra yo ri zu tto <u>ta i se tsu na</u></p><p>比起那句再见</p><p>言葉(ことば)で伝(つた)えたいんだ</p><p>ko~to ba de <u>tsu ta</u> e ta i n da</p><p>我有更重要的话要传达与你</p><p>あり触(ふ)れて でも特別(とくべつ)で</p><p>a ri fu &emsp; re te &emsp; <u>de mo to ku be</u> &emsp; tsu de</p><p>如此平凡 却又如此特别</p><p>ほら この目(め)じゃなければ</p><p>ho ra &emsp; ko no me jya &emsp; na ke re ba</p><p>看啊 如果不是这双眼</p><p>見(み)えなかったものが</p><p>mi e na ka tta~mo no ga</p><p>那些看不见的事物…</p><p>どうして？溢(あふ)れてく</p><p>do o shi te &emsp; a fu re te ku</p><p>为什么喷涌而出？</p><p>だから</p><p>da ka ra</p><p>所以</p><p>もう一度(いちど) 生(う)まれ変(か)わろうとも</p><p>mo o i chi do &emsp; <span style="opacity: 0.5;">u</span> ma re <span style="opacity: 0.5;">ka</span> wa ro~o to mo</p><p>即使再一次转世</p><p>また 私(わたし)はここを選(えら)ぶんだろう</p><p><span style="color: red;">ma</span> ta &emsp; wa ta shi wa &emsp; ko ko wo &emsp; <u><span style="opacity: 0.5;">e</span> ra</u> bu~<span style="opacity: 0.5;">n</span> da ro o</p><p>我一定会再次选择此处吧</p><p>だから</p><p>da <span style="color: red;">ka</span> ra</p><p>所以</p><p>あなたと また巡(めぐ)り逢(あ)ったら</p><p>a na <u>ta to</u> &emsp; <u>ma ta me</u> &emsp; gu ri~<span style="color: red;">a</span> tta ra</p><p>兜兜转转与你再相逢的话</p><p>もう離(はな)さない 今(いま)を選(えら)ぶんだろう</p><p>mo o ha na sa <u>na i</u> &emsp; <u>i ma wo e ra</u> bu~<span style="opacity: 0.5;">n</span> da ro o</p><p>我一定会抓住现在不会放手吧</p><p>約束(やくそく)なんてなくても</p><p><u>ya ku so</u>~ku na n te na ku te mo</p><p>即使未曾有过任何约定</p><p>孤独(こどく)に迷(まよ)う日(ひ)でも</p><p><u>ko do ku ni</u> ma yo~u hi bi de mo</p><p>即便每日孤独迷茫</p><p>その涙(なみだ)だって大丈夫(だいじょうぶ)</p><p><u>so no</u> na mi da da tte da i jyo o <span style="opacity: 0.5;">bu</span></p><p>泪水挂于脸庞也无妨</p><p>きっと夜(よ)が明(あ)けるよ</p><p>ki tto &emsp; <u>yo ga a</u> ke ru yo</p><p>毕竟长夜终将破晓</p><p>And I&#39;m alright (I&#39;ll be alright)</p><p>我一切安好（我会安然无恙）</p><p>Yeah I hear you (I care about you)</p><p>我听见你的声音（我依旧牵挂着你）</p><p>伸(の)びた髪(かみ)を風(かぜ)がからかってる</p><p>no bi ta~<u>ka mi</u>~wo ka~ze ga~ka <u>ra ka</u>~tte ru</p><p>徐徐微风吹拂长发</p><p>全部意味(ぜんぶいみ)があるよ</p><p>ze n bu <u>i mi ga a ru yo</u></p><p>所有一切都是有意义的</p><p>立ち止(ど)ま<span style="color: red;">っ</span>た日々(ひび)も</p><p><u>ta chi do</u> ma <s>tsu</s> tta hi bi mo</p><p>连同那些停滞的时光也一样</p><p>今(いま)さらわかってあなたに追(お)いついたよ</p><p><u>i ma sa ra wa</u> ka~tte <span style="opacity: 0.5;">a</span> na~<u>ta ni</u> &emsp; o <span style="color: red;">i tsu i</span>~ta yo</p><p>直到现在我才想要追逐你的身影</p><p>ほら この目(め)じゃなければ</p><p>ho ra &emsp; ko no me jya &emsp; na ke re ba</p><p>看啊 如果不是这双眼</p><p>見(み)えなかったものが</p><p>mi~e na ka tta~mo <u>no ga</u></p><p>那些看不到的东西…</p><p>どうして？溢(あふ)れてく</p><p>do o shi te &emsp; a fu re te ku</p><p>为什么喷涌而出？</p><p>だから</p><p>da ka ra</p><p>所以</p><p>もう一度(いちど) 生(う)まれ変(か)わろうとも</p><p>mo o i chi do &emsp; <span style="opacity: 0.5;">u</span> ma re <span style="opacity: 0.5;">ka</span> wa ro~o to mo</p><p>即使再一次转世</p><p>また 私(わたし)はここを選(えら)ぶんだろう</p><p><span style="color: red;">ma</span> ta &emsp; wa ta shi wa &emsp; ko ko wo &emsp; <u>e ra</u> bu~<span style="opacity: 0.5;">n</span> da ro o</p><p>我一定会再次选择此处吧</p><p>だから</p><p>da <span style="color: red;">ka</span> ra</p><p>所以</p><p>あなたと また巡(めぐ)り逢(あ)ったら</p><p>a na <u>ta to</u> &emsp; <u>ma ta me</u> &emsp; gu ri~<span style="color: red;">a</span> tta ra</p><p>兜兜转转与你再相逢的话</p><p>もう離(はな)さない 今(いま)を選(えら)ぶんだろう</p><p>mo o ha na sa <u>na i</u> &emsp; <u>i ma wo e ra</u> bu~<span style="opacity: 0.5;">n</span> da ro o</p><p>我一定会抓住现在不会放手吧</p><p>（Anytime anywhere yah）  どこにいでも</p><p>do ko ni i~de mo</p><p>纵使在回忆中</p><p>（Anytime anywhere）      笑(わら)ってみせて</p><p>wa ra~<u>tte mi se</u>~te</p><p>也请对我微笑</p><p>（I&#39;ll be there）             目(め)を閉(と)じれば いつも</p><p><u>me <span style="color: red;">wo</span></u> to ji re~ba &emsp; i~<u>tsu mo</u></p><p>闭上双眼 无论何时</p><p>（Anytime anywhere yah）   歩(ある)き出(だ)した</p><p><u>a ru</u> <span style="color: red;">ki</span> da shi ta</p><p>都要迈出这一步</p><p>（Anytime anywhere）       私(わたし)を見(み)てて</p><p>wa ta shi wo mi te~te</p><p>请看好我吧</p><p>せめて 会(あ)いたいよ</p><p><span style="color: red;">se</span> me te &emsp; a i ta i yo</p><p>至少还想见你一面</p><p>なんて言(い)わないから</p><p>na n de <u>i wa</u>~na i ka ra</p><p>当然我不会说出口的</p><p>ねえ 今日(きょう)だけは</p><p>ne e &emsp; kyo~o da~<u>ke wa</u></p><p>呐 仅仅今天</p><p>思(おも)い出(だ)していいかな</p><p>o mo i <u>da shi te</u> <u>i i</u> ka na</p><p>能让我想起你吗</p><p>だから</p><p>da <span style="color: red;">ka</span> ra</p><p>所以</p><p>あなたと また巡(めぐ)り逢(あ)ったら</p><p>a na <u>ta to</u> &emsp; <u>ma ta me</u> &emsp; gu ri~<span style="color: red;">a</span> tta ra</p><p>兜兜转转与你再相逢的话</p><p>もう迷(まよ)わない今(いま)を選(えら)ぶんだろう</p><p>mo o~<u>ma yo</u> wa na i i <u>ma wo</u> <u>e ra</u> bu~<span style="opacity: 0.5;">n</span> da ro o</p><p>我一定会毫不犹豫的选择现在吧</p><p>約束(やくそく)なんてなくても</p><p>ya ku so ku na n te na <u>ku te</u> mo</p><p>即使未曾有过任何约定</p><p>孤独(こどく)に迷(まよ)う日(ひ)でも</p><p><u>ko do ku ni ma</u> yo~<span style="opacity: 0.5;">u</span> hi de mo</p><p>即便每日孤独迷茫</p><p>こんなに胸(むね)が痛(いた)いのは</p><p><u>ko n na ni mu</u> <span style="color: red;">ne</span> ga i ta i no wa</p><p>我胸口的痛楚</p><p>あなたといた証(あかし)かな</p><p><u>a na ta to i</u> <u>ta a</u> ka shi ka na</p><p>是你与我相伴过的证明吗</p><p>絶対(ぜったい)なんてなくても</p><p>ze tta i &emsp;<u>na a de i</u> na <span style="opacity: 0.5;">ku</span> de mo</p><p>即便那不是绝对的</p><p>いつでも届(とど)いてるから</p><p><u>i tsu de mo to do</u> <u>i te ru</u>~ka ra</p><p>我也切实感受到了你的心意</p><p>その涙(なみだ)だって大丈夫(だいじょうぶ)</p><p><u>so no</u> na mi da da tte da i jo o <span style="opacity: 0.5;">bu</span></p><p>泪水挂于脸庞也无妨</p><p>きっと夜(よ)が明(あ)けるよ</p><p>ki tto yo <u>ga a</u>~ke ru yo</p><p>毕竟长夜终将破晓</p><p>I&#39;m whispering our lullaby for you to come back home</p><p>我会轻声为你点亮灯火 照亮你回家的路</p>]]></content>
      
      
      
        <tags>
            
            <tag> 歌曲 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>BanG Dream! It&#39;s MyGO!!!!!插曲《春日影》平假名及罗马音发音</title>
      <link href="/posts/42dc3d9e.html"/>
      <url>/posts/42dc3d9e.html</url>
      
        <content type="html"><![CDATA[<p>【歌词及罗马音发音】BanG Dream! It’s MyGO!!!!!插曲 - 《春日影》 / MyGO!!!!!</p><p>填词：织田飞鸟</p><p>谱曲：藤田淳平</p><p>编曲：藤田淳平</p><p>歌曲原唱：CRYCHIC</p><p><img src="https://img.moegirl.tw/common/0/00/Haruhikage%28Crychic%29.png" alt=""></p><p><a href="https://music.apple.com/cn/album/%E6%98%A5%E6%97%A5%E5%BD%B1-mygo-ver/1783644603?i=1783644617">春日影（MyGO!!!!! ver.）</a></p><hr><p>悴（かじか）んだ心（こころ） ふるえる眼差（まなざ）し世界（せかい）で</p><p><u>ka ji kan da</u> ko ko ro fu ru e <u>ru ma na</u> za shi se~<u>ka i de</u></p><p>僕（ぼく）はひとりぼっちだった &emsp; 散（ち）ることしか &emsp; 知（し）らない春（はる）は</p><p>bo ku wa <u>hi to</u>~ri bo~chi da~tta &emsp; chi ru ko to~shi ka &emsp; shi ra na i ha~ru wa</p><p>毎年（まいとし）冷（つめ）たくあしらう</p><p>ma i to~<u>shi tsu</u> me ta ku~a shi ra u</p><p>暗（くら）がりの中（なか） 一方通行（いっぽうつうこうに）ただ ただ</p><p><u>ku ra ga ri</u> no na ka i ppo o <u>tsu u</u> ko o ni ta~<u>da ta da</u></p><p>言葉（ことば）を書（か）き殴（なぐ）って</p><p>ko to ba wo ka ki na gu~tte</p><p>期待（きたい）するだけ</p><p>ki ta i su ru da ke</p><p>むなしいと分かっていても</p><p>mu na shi i to wa ka~<u>tte i te mo</u></p><p>救（すく）いを求（もと）め続（つづ）けた</p><p>su ku i <u>wo mo to me tsu zu</u>~ke ta</p><p>せつなくて いとおしい</p><p><span style="opacity: 0.5;">se tsu na ku te i to~o shi i</span></p><p>今（いま）ならば分（わ）かる気（き）がする</p><p>i ma <u>na ra ba</u> wa ka ru ki~<u>ga su ru</u></p><p>しあわせで くるおしい</p><p><span style="opacity: 0.5;">shi a wa se de ku ru o shi i</span></p><p>あの日（ひ）泣（な）けなかった &emsp; 僕（ぼく）を</p><p>a no <u>hi na ke na</u> ka~tta &emsp; bo ku wo</p><p>光（ひかり）は &emsp; やさしく連（つ）れ立（だ）つよ</p><p>hi ka ri wa &emsp; ya sa shi <u>ku tsu re</u>~<u>da tsu yo</u></p><p>雲間（くもま）をぬって &emsp; きらり きらり &emsp; 心満（こころみ）たしては溢（あふ）れ</p><p><u>ku mo ma wo nu</u>~tte &emsp; <u>ki ra ri</u> <u>ki ra ri</u> &emsp; <u>ko ko ro</u> mi ta shi te wa~<u>a fu re</u></p><p>いつしか頬（ほお）を &emsp; きらり きらり &emsp; 熱（あつ）く 熱く 濡（ぬ）らしてゆく</p><p><u>i tsu shi ka ho ho wo</u> &emsp; <u>ki ra ri</u> <u>ki ra ri</u> &emsp; <u>a tsu ku</u> <u>a tsu ku</u> nu ra~<u>shi te yu ku</u></p><p>君（きみ）の手（て）は &emsp; どうして &emsp; こんなにも &emsp; 温（あたた）かいの？</p><p><u>ki mi no</u>~te wa &emsp; do u shi te &emsp; <u>ko n</u> na ni mo &emsp; <u>a ta ta</u>~ka i no ?</p><p>ねえ お願（ねが）い &emsp; どうかこのまま</p><p><u>ne e</u> o ne ga i &emsp; do o ka ko no ma ma~</p><p>離（はな）さないでいて</p><p>ha na sa na i <u>de i te</u></p><p>縁（えん）を結（むす）んでは &emsp; ほどきほどかれ誰（だれ）しもが</p><p>e n wo mu su n de wa &emsp; ho do <u>ki ho</u> do ka re da~<u>re shi mo ga</u></p><p>それを喜（よろこ）び &emsp; 悲（かな）しみながら &emsp; 愛（あい）を数（かぞ）えてゆく</p><p>so re wo yo~ro ko~bi <u>ka na shi</u> &emsp; mi na ga ra a i wo &emsp; ka zo e te~yu ku</p><p>鼓動（こどう）を &emsp; 確（たし）かめるように</p><p>ko do o wo &emsp; ta shi ka me~ru yo~o ni</p><p>うれしくてさびしくて</p><p><span style="opacity: 0.5;">u re shi ku te sa bi shi ku te</span></p><p>今（いま）だからわかる気（き）がした</p><p>i ma <u>da ka ra</u> wa ka ru ki~<u>ga shi ta</u></p><p>たいせつでこわくって</p><p><span style="opacity: 0.5;">ta i se tsu de ko wa ku~tte</span></p><p>あの日（ひ）泣（な）けなかった僕（ぼく）を</p><p>a no <u>hi na ke na ka</u>~tta bo ku wo</p><p>光（ひかり）は &emsp; やさしく抱（だ）きしめた</p><p>hi ka ri wa &emsp; ya sa shi <u>ku da ki</u>~shi me ta</p><hr><p>照（て）らされた世界（せかい）</p><p>te ra sa re ta se ka i</p><p>咲（さ）き誇（ほこ）る大切（たいせつ）な人（ひと）</p><p>sa ki ho ko ru ta i se <u>tsu na</u> hi to</p><p>あたたかさを知（し）った &emsp; </p><p>a ta ta ka sa wo shi tta &emsp;</p><p>春（はる）は 僕（ぼく）のため 君（きみ）のための &emsp; 涙（なみだ）を流（なが）すよ</p><p>ha ru wa bo ku no ta me &emsp; ki mi no ta me no &emsp; <u>na mi da</u> wo <u>na ga</u> su yo</p><p>あぁ なんて眩（まぶ）しいんだろう</p><p>a a &emsp; na n te &emsp; <u>ma bu shi</u> <u>i n</u> da ro o</p><p>あぁ なんて美（うつく）しいんだろう</p><p>a a &emsp; na n te &emsp; <u>u tsu ku shi</u> <u>i n</u> da ro o …</p><p>雲間（くもま）をぬって &emsp; きらり きらり &emsp; 心満（こころみ）たしては溢（あふ）れ</p><p><u>ku mo ma wo nu</u>~tte &emsp; <u>ki ra ri</u> <u>ki ra ri</u> &emsp; <u>ko ko ro</u> mi ta shi te wa~<u>a fu re</u></p><p>いつしか頬（ほお）を &emsp; きらり きらり &emsp; 熱（あつ）く 熱く 濡（ぬ）らしてゆく</p><p><u>i tsu shi ka ho ho wo</u> &emsp; <u>ki ra ri</u> <u>ki ra ri</u> &emsp; <u>a tsu ku</u> <u>a tsu ku</u> nu ra~<u>shi te yu ku</u></p><p>君（きみ）の手（て）は &emsp; どうして &emsp; こんなにも 温（あたた）かいの？</p><p><u>ki mi no</u>~te wa &emsp; do u shi te &emsp; <u>ko n</u> na ni mo &emsp; <u>a ta ta</u>~ka i no ?</p><p>ねえ お願（ねが）い &emsp; どうかこのまま</p><p><u>ne e</u> on e gai &emsp; do o ka ko no ma ma~</p><p>離（はな）さないでいて</p><p>ha na sa na i <u>de i te</u></p><p>ずっと ずっと</p><p>zu tto zu~tto</p><p>離（はな）さないでいて</p><p>ha na sa na i <u>de i te</u></p>]]></content>
      
      
      
        <tags>
            
            <tag> 歌曲 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Bitset Hash Pbds</title>
      <link href="/posts/fdad289b.html"/>
      <url>/posts/fdad289b.html</url>
      
        <content type="html"><![CDATA[<h1 id="Bitset"><a href="#Bitset" class="headerlink" title="Bitset"></a>Bitset</h1><p>类模板 <code>bitset</code> 表示一个 $N$ 位的固定大小序列。可以用标准逻辑运算符操作 <code>bitset</code>，并将它与字符串和整数相互转换。对于字符串表示和移位操作的列举方向来说，这个序列被当做最低索引元素位于右侧，类似于整数的二进制表示。</p><p>$bitset$ 满足可复制构造 ($CopyConstructible$) 及可复制赋值 ($CopyAssignable$) 的要求。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt; std::<span class="type">size_t</span> N &gt; <span class="keyword">class</span> <span class="title class_">bitset</span>;</span><br></pre></td></tr></table></figure><h2 id="模板形参"><a href="#模板形参" class="headerlink" title="模板形参"></a>模板形参</h2><p>$N$    - 要为 $bitset$ 分配存储的位数</p><p>eg: <code>bitset&lt;N&gt; ac</code>; 声明一个大小为$N$的<code>bitset</code>，名称为$ac$</p><ul><li><code>std::bitset</code> 的全部成员函数均为 $constexpr$：在常量表达式求值中创建并使用 <code>std::bitset</code> 对象是可能的。(C++23 起) 所以不要试图使用这种方式!!!</li></ul><h2 id="常用操作"><a href="#常用操作" class="headerlink" title="常用操作"></a>常用操作</h2><ol><li><code>count()</code> 返回 $1$ 的个数，时间复杂度为 $O(\frac{n}{w})$，其中 $w$ 为机器字长，一般为 $64$ 位，评测机一般为 $32$ 位；有一类似操作<code>__builtin_popcount(val)/__builtin_popcountll(val)</code>，时间复杂度相同（应该是）。</li><li><code>operator&lt;&lt;=</code> <code>operator&gt;&gt;=</code> <code>operator&lt;&lt;</code> <code>operator&gt;&gt;</code> 进行二进制左移和右移</li><li><code>operator=</code>  赋值</li><li><code>operator[]</code> 访问指定的位</li><li><code>operator&amp;=</code> <code>operator|=</code> <code>operator^=</code> <code>operator~</code> 进行二进制与、或、异或及非</li></ol><h2 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h2><p>若某个位集合在编译时大小未知，或者必须在运行时改变其大小，则可代之以使用 <code>std::vector&lt;bool&gt;</code> 或 <code>boost::dynamic_bitset</code> 之类的动态类型。</p><div class="table-container"><table><thead><tr><th>功能特性测试宏</th><th>值</th><th>标准</th><th>功能特性</th></tr></thead><tbody><tr><td>__cpp_lib_constexpr_bitset</td><td>202207L</td><td>(C++23)</td><td>使 std::bitset 更 constexpr</td></tr><tr><td>__cpp_lib_bitset</td><td>202306L</td><td>(C++26)</td><td>std::bitset 的 std::string_view 接口</td></tr><tr><td></td></tr></tbody></table></div><h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bitset&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cassert&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstddef&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">typedef</span> std::<span class="type">size_t</span> <span class="type">length_t</span>, <span class="type">position_t</span>; <span class="comment">// 提示</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">// 构造函数：</span></span><br><span class="line">    <span class="keyword">constexpr</span> std::bitset&lt;4&gt; b1;</span><br><span class="line">    <span class="keyword">constexpr</span> std::bitset&lt;4&gt; b2&#123;<span class="number">0xA</span>&#125;; <span class="comment">// == 0B1010</span></span><br><span class="line">    std::bitset&lt;4&gt; b3&#123;<span class="string">&quot;0011&quot;</span>&#125;; <span class="comment">// C++23 起也可以为 constexpr</span></span><br><span class="line">    std::bitset&lt;8&gt; b4&#123;<span class="string">&quot;ABBA&quot;</span>, <span class="built_in">length_t</span>(<span class="number">4</span>), <span class="comment">/*0:*/</span><span class="string">&#x27;A&#x27;</span>, <span class="comment">/*1:*/</span><span class="string">&#x27;B&#x27;</span>&#125;; <span class="comment">// == 0B0000&#x27;0110</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">// 能打印出 bitset 到流：</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;b1:&quot;</span> &lt;&lt; b1 &lt;&lt; <span class="string">&quot;; b2:&quot;</span> &lt;&lt; b2 &lt;&lt; <span class="string">&quot;; b3:&quot;</span> &lt;&lt; b3 &lt;&lt; <span class="string">&quot;; b4:&quot;</span> &lt;&lt; b4 &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// bitset 支持逐位运算：</span></span><br><span class="line">    b3 |= <span class="number">0b0100</span>; <span class="built_in">assert</span>(b3 == <span class="number">0b0111</span>);</span><br><span class="line">    b3 &amp;= <span class="number">0b0011</span>; <span class="built_in">assert</span>(b3 == <span class="number">0b0011</span>);</span><br><span class="line">    b3 ^= std::bitset&lt;<span class="number">4</span>&gt;&#123;<span class="number">0b1100</span>&#125;; <span class="built_in">assert</span>(b3 == <span class="number">0b1111</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// 整个集合上的操作：</span></span><br><span class="line">    b<span class="number">3.</span><span class="built_in">reset</span>(); <span class="built_in">assert</span>(b3 == <span class="number">0</span>);</span><br><span class="line">    b<span class="number">3.</span><span class="built_in">set</span>(); <span class="built_in">assert</span>(b3 == <span class="number">0b1111</span>);</span><br><span class="line">    <span class="built_in">assert</span>(b<span class="number">3.</span><span class="built_in">all</span>() &amp;&amp; b<span class="number">3.</span><span class="built_in">any</span>() &amp;&amp; !b<span class="number">3.</span><span class="built_in">none</span>());</span><br><span class="line">    b<span class="number">3.f</span>lip(); <span class="built_in">assert</span>(b3 == <span class="number">0</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// 单独位上的操作：</span></span><br><span class="line">    b<span class="number">3.</span><span class="built_in">set</span>(<span class="built_in">position_t</span>(<span class="number">1</span>), <span class="literal">true</span>); <span class="built_in">assert</span>(b3 == <span class="number">0b0010</span>);</span><br><span class="line">    b<span class="number">3.</span><span class="built_in">set</span>(<span class="built_in">position_t</span>(<span class="number">1</span>), <span class="literal">false</span>); <span class="built_in">assert</span>(b3 == <span class="number">0</span>);</span><br><span class="line">    b<span class="number">3.f</span>lip(<span class="built_in">position_t</span>(<span class="number">2</span>)); <span class="built_in">assert</span>(b3 == <span class="number">0b0100</span>);</span><br><span class="line">    b<span class="number">3.</span><span class="built_in">reset</span>(<span class="built_in">position_t</span>(<span class="number">2</span>)); <span class="built_in">assert</span>(b3 == <span class="number">0</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// 支持下标 operator[]：</span></span><br><span class="line">    b3[<span class="number">2</span>] = <span class="literal">true</span>; <span class="built_in">assert</span>(<span class="literal">true</span> == b3[<span class="number">2</span>]);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// 其他操作：</span></span><br><span class="line">    <span class="built_in">assert</span>(b<span class="number">3.</span><span class="built_in">count</span>() == <span class="number">1</span>);</span><br><span class="line">    <span class="built_in">assert</span>(b<span class="number">3.</span><span class="built_in">size</span>() == <span class="number">4</span>);</span><br><span class="line">    <span class="built_in">assert</span>(b<span class="number">3.</span><span class="built_in">to_ullong</span>() == <span class="number">0b0100ULL</span>);</span><br><span class="line">    <span class="built_in">assert</span>(b<span class="number">3.</span><span class="built_in">to_string</span>() == <span class="string">&quot;0100&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Output:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b1:0000; b2:1010; b3:0011; b4:00000110</span><br></pre></td></tr></table></figure></p><h1 id="Hash"><a href="#Hash" class="headerlink" title="Hash"></a>Hash</h1><h2 id="普通哈希的优化"><a href="#普通哈希的优化" class="headerlink" title="普通哈希的优化"></a>普通哈希的优化</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> tp1,<span class="keyword">typename</span> tp2,<span class="type">int</span> N&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Htb</span>&#123;</span><br><span class="line">    <span class="type">static</span> <span class="keyword">constexpr</span> <span class="type">int</span> M=<span class="number">1e7</span><span class="number">+19</span>;</span><br><span class="line">    <span class="type">int</span> hd[M<span class="number">+3</span>],to[N],ct;</span><br><span class="line">    tp1 ed[N];tp2 w[N];</span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">int</span> <span class="title">hc</span><span class="params">(ul v)</span></span>&#123;</span><br><span class="line">        v^=v&lt;&lt;<span class="number">13</span>,v^=v&gt;&gt;<span class="number">7</span>;</span><br><span class="line">        <span class="keyword">return</span> (v^(v&lt;&lt;<span class="number">17</span>))%M;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">ins</span><span class="params">(tp1 x,tp2 y)</span></span>&#123;</span><br><span class="line">        <span class="type">int</span> &amp;p=hd[<span class="built_in">hc</span>(x)];</span><br><span class="line">        ed[++ct]=x,to[ct]=p;</span><br><span class="line">        w[p=ct]=y;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">count</span><span class="params">(tp1 x)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=hd[<span class="built_in">hc</span>(x)];i;i=to[i])</span><br><span class="line">            <span class="keyword">if</span>(ed[i]==x)<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    pair&lt;tp2,<span class="type">bool</span>&gt;<span class="built_in">find</span>(tp1 x)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=hd[<span class="built_in">hc</span>(x)];i;i=to[i])</span><br><span class="line">            <span class="keyword">if</span>(ed[i]==x)<span class="keyword">return</span> <span class="built_in">mkp</span>(w[i],<span class="literal">true</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">mkp</span>(<span class="built_in">tp2</span>(),<span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="keyword">operator</span>[](tp1 x)&#123;</span><br><span class="line">        <span class="type">int</span> &amp;p=hd[<span class="built_in">hc</span>(x)];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=p;i;i=to[i])</span><br><span class="line">            <span class="keyword">if</span>(ed[i]==x)<span class="keyword">return</span> i;</span><br><span class="line">        ed[++ct]=x,to[ct]=p;</span><br><span class="line">        <span class="keyword">return</span> p=ct;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">clear</span><span class="params">()</span></span>&#123;<span class="keyword">while</span>(ct)hd[<span class="built_in">hc</span>(ed[ct--])]=<span class="number">0</span>;&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>这种多维哈希相对于普通哈希的优点：</p><ol><li>内存局部性更好，有助于缓存友好。</li><li>$clear$ 操作可以非常高效，只需遍历已有的节点更新 $hd$ 数组</li><li>代码中手动维护链表，便于对冲突处理和自定义哈希函数调优</li></ol><p>使用方法：</p><ol><li><code>struct hc</code>: $xorshift$ 随机映射，把一个ul类型随机映射到$0$ ~ $M-1$中的一个随机数</li><li><code>struct ins</code>类似邻接表插入</li><li><code>count</code>是否找到</li><li><code>pair&lt;tp2,bool&gt;</code> 第一位查询得到的值，bool是否找到了</li><li><code>operator[]</code> 用于寻找第一维的标号，未找到则创建一个</li></ol><p>缺点:</p><ol><li>由于是 $xorshift$，在 $cf$ 上写依然会被叉</li><li>第一维不能传 $string$，可以另写<code>static ul hc(string s) &#123;&#125;</code></li></ol><h2 id="Hash的再优化"><a href="#Hash的再优化" class="headerlink" title="Hash的再优化"></a>Hash的再优化</h2><p>为了解决上述 $Hash$ 的缺点，我们可以引入随机 $Hash$，同时引入 $Pbds$ 库中封装好的<code>gp_hash_table</code>。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">myhash</span> &#123;</span><br><span class="line">  <span class="function"><span class="type">static</span> <span class="type">uint64_t</span> <span class="title">hash</span><span class="params">(<span class="type">uint64_t</span> x)</span> </span>&#123;</span><br><span class="line">    x += <span class="number">0x9e3779b97f4a7c15</span>;</span><br><span class="line">    x = (x ^ (x &gt;&gt; <span class="number">30</span>)) * <span class="number">0xbf58476d1ce4e5b9</span>;</span><br><span class="line">    x = (x ^ (x &gt;&gt; <span class="number">27</span>)) * <span class="number">0x94d049bb133111eb</span>;</span><br><span class="line">    <span class="keyword">return</span> x ^ (x &gt;&gt; <span class="number">31</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="type">size_t</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">uint64_t</span> x)</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">const</span> <span class="type">uint64_t</span> SEED =</span><br><span class="line">        chrono::steady_clock::<span class="built_in">now</span>().<span class="built_in">time_since_epoch</span>().<span class="built_in">count</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">hash</span>(x + SEED);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="type">size_t</span> <span class="title">operator</span><span class="params">()</span><span class="params">(pair&lt;<span class="type">uint64_t</span>, <span class="type">uint64_t</span>&gt; x)</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">const</span> <span class="type">uint64_t</span> SEED =</span><br><span class="line">        chrono::steady_clock::<span class="built_in">now</span>().<span class="built_in">time_since_epoch</span>().<span class="built_in">count</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">hash</span>(x.first + SEED) ^ (<span class="built_in">hash</span>(x.second + SEED) &gt;&gt; <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">uint64_t</span> <span class="title">string_hash</span><span class="params">(<span class="type">const</span> string &amp;s)</span> </span>&#123;</span><br><span class="line">  <span class="type">const</span> <span class="type">uint64_t</span> BASE = <span class="number">131</span>;</span><br><span class="line">  <span class="type">uint64_t</span> h = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">char</span> c : s) &#123;</span><br><span class="line">    h = h * BASE + c;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> h;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mymap __gnu_pbds::gp_hash_table</span></span><br></pre></td></tr></table></figure><h3 id="定义方法"><a href="#定义方法" class="headerlink" title="定义方法"></a>定义方法</h3><p><code>mymap&lt;int, int, myhash&gt; dic;</code></p><p><code>mymap&lt;int, null_type, myhash&gt; dic;</code></p><p><code>unordered_map&lt;int, int, myhash&gt; dic;</code></p><p>第二维表示存或者不存，若为<code>null_type</code>则不关心是否存值。</p><h1 id="Pbds"><a href="#Pbds" class="headerlink" title="Pbds"></a>Pbds</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>什么是<code>__gnu_pbds</code>?$Policy$ $based$ $data$ $structures$！简称<del>平板电视</del> $pbds$。在使用$pbds$前，你需要：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;ext/pb_ds/assoc_container.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;ext/pb_ds/tree_policy.hpp&gt;</span><span class="comment">//用tree</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;ext/pb_ds/hash_policy.hpp&gt;</span><span class="comment">//用hash</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;ext/pb_ds/trie_policy.hpp&gt;</span><span class="comment">//用trie</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;ext/pb_ds/priority_queue.hpp&gt;</span><span class="comment">//用priority_queue</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_pbds;</span><br></pre></td></tr></table></figure><p>这么长？没事，有更简单的：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/extc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_pbds;</span><br></pre></td></tr></table></figure><p>$Pbds$中的所有内容均不在头文件<code>#include &lt;bits/stdc++.h&gt;</code>中，也不再 $std$ 命名空间中。</p><h3 id="pbds-hash"><a href="#pbds-hash" class="headerlink" title="pbds::hash"></a>pbds::hash</h3><p>上面已经介绍过。</p><p><a href="https://www.luogu.com.cn/problem/P1333">P1333 瑞瑞的木棍</a></p><p>该题使用$Pbds$中自带的$Hash$，时间复杂度仅为$O(n)$。</p><h3 id="tree"><a href="#tree" class="headerlink" title="tree"></a>tree</h3><p>平衡树：使得集中的元素始终保持有序，并且支持快速插入和删除某个数，和快速索引排名为 $x$ 的数，作增删改查操作。</p><p>显然，$set$ 无法实现快速索引某个数的排名和快速索引第 $k$ 位数。</p><p>通俗且不严谨的说，$set$ 不像数组一样拥有“下标”，而 $pbds$ 库中的平衡树既有 $set$ 的功能，也有数组的下标。</p><h4 id="平衡树的tag"><a href="#平衡树的tag" class="headerlink" title="平衡树的tag"></a>平衡树的tag</h4><ol><li><code>rb_tree_tag</code>：红黑树</li><li><code>splay_tree_tag</code>：伸展树</li><li><code>ov_tree_tag</code>：有序向量树（不建议使用）</li></ol><p>一般推荐使用rb_tree_tag</p><h4 id="定义方式"><a href="#定义方式" class="headerlink" title="定义方式"></a>定义方式</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tree&lt;<span class="type">int</span>, null_type, less&lt;<span class="type">int</span>&gt;, rb_tree_tag, tree_order_statistics_node_update&gt; tr;</span><br></pre></td></tr></table></figure><h4 id="重要函数"><a href="#重要函数" class="headerlink" title="重要函数"></a>重要函数</h4><ol><li><code>tr.find_by_order(k)</code> 返回下标为 $k$ 的对象的指针</li><li><code>tr.order_of_key(val)</code> 返回小于等于 $val$ 的对象的个数</li><li><code>tr.lower(upper)_bound(val)</code> 返回大于等于（大于）$val$ 的数的对象的指针</li><li><code>tr.insert(val)</code> 向 $tr$ 中插入 $val$</li><li><code>A.join(B)</code> 将 $B$ 整个并入$A$</li><li><code>tr.size</code> 查询 $tr$ 的大小</li><li><code>tr.erase(tr.lower_bound(val))</code> 删除 $tr$ 中大于等于 $val$ 的值</li><li><code>tr.erase(val)</code> 删除 $tr$ 中值为 $val$ 的元素</li></ol><h4 id="创建multiset"><a href="#创建multiset" class="headerlink" title="创建multiset"></a>创建multiset</h4><p>一般来说有如下两种方法：</p><ol><li>插入时左移 $20$ 位，并加上一个独一无二的值，删除时右移 $20$ 位取出</li><li>在创建时，将 <code>less&lt;int&gt;</code> 改为 <code>less_equal&lt;int&gt;</code> 方便但非常不推荐!!!</li></ol><h3 id="priority-queue"><a href="#priority-queue" class="headerlink" title="priority_queue"></a>priority_queue</h3><h4 id="堆的tag"><a href="#堆的tag" class="headerlink" title="堆的tag"></a>堆的tag</h4><ol><li><code>pairing_heap_tag</code>：使用配对堆（$Pairing Heap$）实现。配对堆是一种具有良好理论性能和实际性能的堆结构，通常在实践中表现优异。</li><li><code>binary_heap_tag</code>：使用二叉堆（$Binary Heap$）实现。二叉堆是一种经典的堆结构，通常用于实现优先队列。</li><li><code>binomial_heap_tag</code>：使用二项堆（$Binomial Heap$）实现。二项堆是一种支持高效合并操作的堆结构。</li><li><code>rc_binomial_heap_tag</code>：使用放宽的二项堆（$Relaxed Binomial Heap$）实现。这种堆结构在二项堆的基础上进行了优化，以提高某些操作的性能。</li><li><code>thin_heap_tag</code>：使用瘦堆（$Thin Heap$）实现。瘦堆是一种专门为$Dijkstra$算法设计的堆结构，适用于图算法中的优先队列。</li></ol><p>一般推荐使用<code>pairing_heap_tag</code></p><h4 id="定义方式-1"><a href="#定义方式-1" class="headerlink" title="定义方式"></a>定义方式</h4><p><code>priority_queue&lt;int, less&lt;int&gt;, pairing_heap_tag&gt; q1, q2;</code></p><h4 id="重要函数-1"><a href="#重要函数-1" class="headerlink" title="重要函数"></a>重要函数</h4><ol><li><code>q1.push(val)</code></li><li><code>a1.size()</code></li><li><code>q1.pop()</code></li><li><code>q1.join(q2);</code></li><li><code>q1.empty();</code></li></ol><h4 id="提示"><a href="#提示" class="headerlink" title="提示"></a>提示</h4><p>使用$Pbds$库中的<code>priority_queue</code>时，由于和 $std$ 库中的<code>priority_queue</code>重名，会报错，应当主动声明命名空间。</p>]]></content>
      
      
      
        <tags>
            
            <tag> XCPC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>单调栈&amp;单调队列</title>
      <link href="/posts/e9186a1f.html"/>
      <url>/posts/e9186a1f.html</url>
      
        <content type="html"><![CDATA[<h1 id="单调栈"><a href="#单调栈" class="headerlink" title="单调栈"></a>单调栈</h1><h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><p>单调栈，顾名思义，这个栈是单调递增/递减的。</p><ul><li>递增栈：越靠近栈顶的元素越大，如push顺序为 $1$ $2$ $3$ $4$ $5$</li><li>递减栈：越靠近栈底的元素越大，如push顺序为 $5$ $4$ $3$ $2$ $1$</li></ul><h2 id="问题引入"><a href="#问题引入" class="headerlink" title="问题引入"></a>问题引入</h2><p><a href="https://www.luogu.com.cn/problem/P5788">P5788 【模板】单调栈</a></p><h2 id="用途"><a href="#用途" class="headerlink" title="用途"></a>用途</h2><p>使用栈，维护一个单调的序列，通过栈顶的最值来进行计算或转移。</p><h2 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h2><p>对于每个元素，将其和栈顶-&gt;栈底的元素一次比较，不符合的元素出栈，栈顶为当前维护的栈的最值。</p><p>例如我们要维护一个降序序列，有push顺序为 $8$ $4$ $6$ $1$ $9$ $2$ $4$ $0$</p><p>那么第i步操作后栈的状态为：$8$;$8$ $4$;$8$ $6$;$8$ $6$ $1$;$9$;$9$ $2$;$9$ $4$;$9$ $4$ $0$</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> top = <span class="number">0</span>; <span class="comment">// 栈顶指针初值</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">  <span class="keyword">while</span> (top &gt; <span class="number">0</span> <span class="keyword">and</span> a[q[top]] &lt; a[i]) &#123;</span><br><span class="line">    cout &lt;&lt; a[q[top]] &lt;&lt; endl; <span class="comment">// 输出栈顶值</span></span><br><span class="line">    top--; <span class="comment">// 栈顶出栈</span></span><br><span class="line">  &#125;</span><br><span class="line">  q[++top] = i; <span class="comment">// 栈顶入栈</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在单调栈入栈过程中，<strong>入栈的是元素的下标，而不是元素的值</strong>。但下文为了直观，记录的是元素值，<strong>实际写题时切记要记录下标</strong>。</p><p>对于单调栈而言，记录下标不仅能获知当前元素值，还能方便获取其前后元素位置信息，这在需要回溯或计算区间问题时非常重要。此外，入栈下标后，可追踪元素更新，并在栈顶位置快速找到需要的元素，从而保持栈中数据的单调性并简化维护过程。另外，引入下标可以处理重复出现的元素，用下标作为能唯一标识一条记录的属性组。</p><p>考虑如下数组构造单调栈$ a=[1,1,4,5,1,4] $，构造递增栈只记录元素的话是$ [1,1,1,4] $，这个如果题目所求为输出第一个比当前元素小的元素，那可以找到，但是如果是第一个比当前元素大的元素的下标，那这时无法确定具体是第几个$1$比当前元素小。<strong>所以构造单调栈所记录的属性必须是下标，而不是元素值</strong>。</p><p>另外，在构造单调栈时，循环条件为<code>while (top &gt; 0 and a[q[top]] &lt; a[i])</code>，而不是<code>while (top &gt; 0 and a[q[top]] &lt;= a[i])</code>，<strong>循环条件是严格小于（或等于），相同元素必须全部记录，而不是当前元素小于等于栈顶元素就弹出栈顶元素</strong>。</p><p>考虑如下数组构造单调栈$ a=[1,2,2,2,2,2] $，正确构造递增栈为$ a=[1,2,2,2,2,2] $，可以找出第一个大于数组下标 $1$ 的元素下标为 $2$（数组从1开始）；但是如果错误记录，元素和栈顶相等的话，那构造出来时$ a=[1,2] $，这个 $2$ 是最后一个$2$，下标为 $6$ ，但事实上第一个大于下标 $1$ 的元素下标为 $2$ ，是第一个 $2$ ，而不是第五个 $2$ 。</p><details class="folding-tag" ><summary> 查看代码 </summary>              <div class='content'>              <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="comment">// #include &lt;bits/extc++.h&gt;</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">// using namespace __gnu_pbds;</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ture true</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> flase false</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pow power</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> all(x) begin(x), end(x)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mem(a, x) memset(a, x, sizeof(a))</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> gcd(a, b) gcdint(a, b)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lcm(a, b) (a / gcd(a, b) * b)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> sz(x) (int)x.size()</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lowbit(x) (x &amp; -x)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> EPS 1e-7</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int ll</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> i64 long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> i128 __int128</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fr first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> sc second</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> tcT template &lt;class T</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> tcTU tcT, class U</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">unsyncIO</span><span class="params">()</span> </span>&#123; cin.<span class="built_in">tie</span>(<span class="number">0</span>)-&gt;<span class="built_in">sync_with_stdio</span>(<span class="number">0</span>); &#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setPrec</span><span class="params">()</span> </span>&#123; cout &lt;&lt; fixed &lt;&lt; <span class="built_in">setprecision</span>(<span class="number">15</span>); &#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setIO</span><span class="params">()</span> </span>&#123; <span class="built_in">unsyncIO</span>(), <span class="built_in">setPrec</span>(); &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">gcdint</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; <span class="keyword">return</span> b ? <span class="built_in">gcdint</span>(b, a % b) : a; &#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> i128 <span class="title">gcd128</span><span class="params">(i128 a, i128 b)</span> </span>&#123; <span class="keyword">return</span> b ? <span class="built_in">gcd128</span>(b, a % b) : a; &#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">cdiv</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; <span class="keyword">return</span> a / b + ((a ^ b) &gt; <span class="number">0</span> &amp;&amp; a % b); &#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">fdiv</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; <span class="keyword">return</span> a / b - ((a ^ b) &lt; <span class="number">0</span> &amp;&amp; a % b); &#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; <span class="keyword">using</span> V = vector&lt;T&gt;;</span><br><span class="line">tcTU &gt; <span class="keyword">using</span> PR = pair&lt;T, U&gt;;</span><br><span class="line">tcTU &gt; <span class="keyword">using</span> MP = map&lt;T, U&gt;;</span><br><span class="line">tcTU &gt; <span class="keyword">using</span> VP = vector&lt;pair&lt;T, U&gt;&gt;;</span><br><span class="line">tcT &gt; <span class="keyword">using</span> pqg = priority_queue&lt;T, vector&lt;T&gt;, greater&lt;T&gt;&gt;;</span><br><span class="line">tcT &gt; <span class="keyword">using</span> pql = priority_queue&lt;T, vector&lt;T&gt;, less&lt;T&gt;&gt;;</span><br><span class="line"></span><br><span class="line">tcTU &gt; istream &amp;<span class="keyword">operator</span>&gt;&gt;(istream &amp;in, pair&lt;T, U&gt; &amp;a) &#123;</span><br><span class="line">  <span class="keyword">return</span> in &gt;&gt; a.first &gt;&gt; a.second;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; istream &amp;<span class="keyword">operator</span>&gt;&gt;(istream &amp;in, vector&lt;T&gt; &amp;a) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;x : a) &#123;</span><br><span class="line">    in &gt;&gt; x;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> in;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; ostream &amp;<span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, <span class="type">const</span> pair&lt;T, U&gt; &amp;a) &#123;</span><br><span class="line">  <span class="keyword">return</span> out &lt;&lt; a.first &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; a.second;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; ostream &amp;<span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, <span class="type">const</span> vector&lt;pair&lt;T, U&gt;&gt; &amp;a) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;x : a) &#123;</span><br><span class="line">    out &lt;&lt; x &lt;&lt; endl;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; ostream &amp;<span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, <span class="type">const</span> vector&lt;T&gt; &amp;a) &#123;</span><br><span class="line">  <span class="type">int</span> n = a.<span class="built_in">size</span>();</span><br><span class="line">  <span class="keyword">if</span> (!n) &#123;</span><br><span class="line">    <span class="keyword">return</span> out;</span><br><span class="line">  &#125;</span><br><span class="line">  out &lt;&lt; a[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">    out &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; a[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">std::ostream &amp;<span class="keyword">operator</span>&lt;&lt;(std::ostream &amp;os, i128 n) &#123;</span><br><span class="line">  std::string s;</span><br><span class="line">  <span class="keyword">while</span> (n) &#123;</span><br><span class="line">    s += <span class="string">&#x27;0&#x27;</span> + n % <span class="number">10</span>;</span><br><span class="line">    n /= <span class="number">10</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  std::<span class="built_in">reverse</span>(s.<span class="built_in">begin</span>(), s.<span class="built_in">end</span>());</span><br><span class="line">  <span class="keyword">return</span> os &lt;&lt; s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">power</span><span class="params">(<span class="type">int</span> a, i64 b, <span class="type">int</span> p = <span class="number">1e9</span> + <span class="number">7</span>)</span> </span>&#123;</span><br><span class="line">  <span class="type">int</span> res = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">for</span> (; b; b /= <span class="number">2</span>, a = <span class="number">1LL</span> * a * a % p) &#123;</span><br><span class="line">    <span class="keyword">if</span> (b % <span class="number">2</span>) &#123;</span><br><span class="line">      res = <span class="number">1LL</span> * res * a % p;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; <span class="function"><span class="type">bool</span> <span class="title">ckmin</span><span class="params">(T &amp;a, <span class="type">const</span> T &amp;b)</span> </span>&#123; <span class="keyword">return</span> b &lt; a ? a = b, <span class="number">1</span> : <span class="number">0</span>; &#125;</span><br><span class="line">tcT &gt; <span class="function"><span class="type">bool</span> <span class="title">ckmax</span><span class="params">(T &amp;a, <span class="type">const</span> T &amp;b)</span> </span>&#123; <span class="keyword">return</span> a &lt; b ? a = b, <span class="number">1</span> : <span class="number">0</span>; &#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; <span class="function"><span class="type">void</span> <span class="title">remDup</span><span class="params">(vector&lt;T&gt; &amp;v)</span> </span>&#123;</span><br><span class="line">  <span class="built_in">sort</span>(<span class="built_in">all</span>(v));</span><br><span class="line">  v.<span class="built_in">erase</span>(<span class="built_in">unique</span>(<span class="built_in">all</span>(v)), <span class="built_in">end</span>(v));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; <span class="function"><span class="type">void</span> <span class="title">erase</span><span class="params">(T &amp;t, <span class="type">const</span> U &amp;u)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">auto</span> it = t.<span class="built_in">find</span>(u);</span><br><span class="line">  <span class="built_in">assert</span>(it != <span class="built_in">end</span>(t));</span><br><span class="line">  t.<span class="built_in">erase</span>(it);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; <span class="function">T <span class="title">fstTrue</span><span class="params">(T lo, T hi, U f)</span> </span>&#123;</span><br><span class="line">  hi++;</span><br><span class="line">  <span class="built_in">assert</span>(lo &lt;= hi);</span><br><span class="line">  <span class="keyword">while</span> (lo &lt; hi) &#123;</span><br><span class="line">    T mid = lo + (hi - lo) / <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">f</span>(mid) ? hi = mid : lo = mid + <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> lo;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; <span class="function">T <span class="title">lstTrue</span><span class="params">(T lo, T hi, U f)</span> </span>&#123;</span><br><span class="line">  lo--;</span><br><span class="line">  <span class="built_in">assert</span>(lo &lt;= hi);</span><br><span class="line">  <span class="keyword">while</span> (lo &lt; hi) &#123;</span><br><span class="line">    T mid = lo + (hi - lo + <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">f</span>(mid) ? lo = mid : hi = mid - <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> lo;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> inf = <span class="number">0x7fffffff</span>;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> N = <span class="number">1.01e6</span>;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> M = <span class="number">2.01e3</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> LOCAL</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;C:/Users/70510/Desktop/Others/algo/debug.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> debug(...) 42</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="type">int</span> n;</span><br><span class="line">  cin &gt;&gt; n;</span><br><span class="line">  <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">q</span><span class="params">(n + <span class="number">1</span>)</span>, <span class="title">ans</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    cin &gt;&gt; a[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="type">int</span> top = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    <span class="keyword">while</span> (top &gt; <span class="number">0</span> <span class="keyword">and</span> a[q[top]] &lt; a[i]) &#123;</span><br><span class="line">      ans[q[top]] = i;</span><br><span class="line">      top--;</span><br><span class="line">    &#125;</span><br><span class="line">    q[++top] = i;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    cout &lt;&lt; ans[i] &lt;&lt; <span class="string">&quot; \n&quot;</span>[i == n];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="built_in">setIO</span>();</span><br><span class="line">  <span class="type">int</span> tt = <span class="number">1</span>;</span><br><span class="line">  <span class="comment">// cin &gt;&gt; tt;</span></span><br><span class="line">  <span class="keyword">while</span> (tt--) &#123;</span><br><span class="line">    <span class="built_in">solve</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details>]]></content>
      
      
      
        <tags>
            
            <tag> XCPC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于算法竞赛中代码模版的规范化问题</title>
      <link href="/posts/d71d8d32.html"/>
      <url>/posts/d71d8d32.html</url>
      
        <content type="html"><![CDATA[<p>在平时写算法的时候看到别人的代码，有的时候代码很短，但是一言难尽；也有的人代码很长，但是却可以看得下去，几乎不影响观感。那么这就引申出一个问题，代码怎么写才能看起来更加的“规范”，“美观”，代码模板怎么写才能够保证“泛用性”，“可读性”。</p><h3 id="代码的格式问题"><a href="#代码的格式问题" class="headerlink" title="代码的格式问题"></a>代码的格式问题</h3><p>代码的基本格式我个人认为需要保证好基本的K&amp;R规范或者BSD规范，之后再这两种规范下进行微调。</p><blockquote><p>K&amp;R规范的明显标志为 左大括号不换行 右大括号和该范围的起始语句列数上持平</p><p>BSD规范的明显标志为 左右大括号全部换行 都和该范围的起始语句列数上持平</p></blockquote><p>具体的K&amp;R规范和BSD规范可以参见如下文章<a href="https://blog.csdn.net/weixin_30741653/article/details/97516375">c语言代码风格</a></p><p>其次看下面两段代码</p><details class="folding-tag" ><summary> 查看代码 </summary>              <div class='content'>              <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;bits/stdc++.h&gt;</span><br><span class="line"></span><br><span class="line">using i64 = long long;</span><br><span class="line">using u64 = unsigned long long;</span><br><span class="line">using u32 = unsigned;</span><br><span class="line">using u128 = unsigned __int128;</span><br><span class="line"></span><br><span class="line">constexpr int inf = 1E9;</span><br><span class="line"></span><br><span class="line">void solve() &#123;</span><br><span class="line">    int n, m;</span><br><span class="line">    std::cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    </span><br><span class="line">    std::vector&lt;int&gt; a(n), b(n), s(n);</span><br><span class="line">    for (int i = 0; i &lt; n; i++) &#123;</span><br><span class="line">        std::cin &gt;&gt; a[i] &gt;&gt; b[i] &gt;&gt; s[i];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    auto ss = s;</span><br><span class="line">    auto vs = a;</span><br><span class="line">    vs.insert(vs.end(), b.begin(), b.end());</span><br><span class="line">    std::sort(ss.begin(), ss.end());</span><br><span class="line">    std::sort(vs.begin(), vs.end());</span><br><span class="line">    </span><br><span class="line">    vs.erase(std::unique(vs.begin(), vs.end()), vs.end());</span><br><span class="line">    ss.erase(std::unique(ss.begin(), ss.end()), ss.end());</span><br><span class="line">    </span><br><span class="line">    for (int i = 0; i &lt; n; i++) &#123;</span><br><span class="line">        a[i] = std::lower_bound(vs.begin(), vs.end(), a[i]) - vs.begin();</span><br><span class="line">        b[i] = std::lower_bound(vs.begin(), vs.end(), b[i]) - vs.begin();</span><br><span class="line">        s[i] = std::lower_bound(ss.begin(), ss.end(), s[i]) - ss.begin();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    std::vector&lt;std::vector&lt;int&gt;&gt; q(m);</span><br><span class="line">    for (int i = 0; i &lt; m; i++) &#123;</span><br><span class="line">        int k;</span><br><span class="line">        std::cin &gt;&gt; k;</span><br><span class="line">        q[i].resize(k);</span><br><span class="line">        for (int j = 0; j &lt; k; j++) &#123;</span><br><span class="line">            std::cin &gt;&gt; q[i][j];</span><br><span class="line">            q[i][j]--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    const int nv = vs.size();</span><br><span class="line">    const int ns = ss.size();</span><br><span class="line">    </span><br><span class="line">    int maxa = -1;</span><br><span class="line">    </span><br><span class="line">    std::vector&lt;int&gt; L(ns, -inf), R(ns, inf);</span><br><span class="line">    </span><br><span class="line">    std::vector&lt;std::vector&lt;std::array&lt;int, 2&gt;&gt;&gt; ban(ns + 1);</span><br><span class="line">    auto addSeg = [&amp;](int s, int l, int r) &#123;</span><br><span class="line">        ban[s].push_back(&#123;l, r&#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    for (int i = m - 1; i &gt;= 0; i--) &#123;</span><br><span class="line">        for (auto j : q[i]) &#123;</span><br><span class="line">            if (maxa &lt; a[j]) &#123;</span><br><span class="line">                continue;</span><br><span class="line">            &#125;</span><br><span class="line">            R[s[j]] = std::min(R[s[j]], b[j]);</span><br><span class="line">            L[s[j]] = std::max(L[s[j]], maxa + 1);</span><br><span class="line">            if (a[j] &lt; maxa) &#123;</span><br><span class="line">                addSeg(ns, a[j] + 1, maxa);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        for (auto j : q[i]) &#123;</span><br><span class="line">            maxa = std::max(maxa, a[j]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    std::vector&lt;std::vector&lt;int&gt;&gt; vec(ns);</span><br><span class="line">    for (int i = 0; i &lt; n; i++) &#123;</span><br><span class="line">        vec[s[i]].push_back(i);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    for (int i = 0; i &lt; ns; i++) &#123;</span><br><span class="line">        if (L[i] &gt; R[i]) &#123;</span><br><span class="line">            std::cout &lt;&lt; -1 &lt;&lt; &quot;\n&quot;;</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    int mina = inf;</span><br><span class="line">    for (int i = 0; i &lt; m; i++) &#123;</span><br><span class="line">        for (auto j : q[i]) &#123;</span><br><span class="line">            if (mina &gt; a[j]) &#123;</span><br><span class="line">                continue;</span><br><span class="line">            &#125;</span><br><span class="line">            if (b[j] &gt; a[j]) &#123;</span><br><span class="line">                addSeg(s[j], a[j] + 1, b[j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        for (auto j : q[i]) &#123;</span><br><span class="line">            mina = std::min(mina, a[j]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    std::vector&lt;bool&gt; can(nv);</span><br><span class="line">    &#123;</span><br><span class="line">        std::vector&lt;int&gt; d(nv);</span><br><span class="line">        for (auto [l, r] : ban[ns]) &#123;</span><br><span class="line">            d[l]++;</span><br><span class="line">            if (r + 1 &lt; nv) &#123;</span><br><span class="line">                d[r + 1]--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        for (int i = 1; i &lt; nv; i++) &#123;</span><br><span class="line">            d[i] += d[i - 1];</span><br><span class="line">        &#125;</span><br><span class="line">        for (int i = 0; i &lt; nv; i++) &#123;</span><br><span class="line">            can[i] = (d[i] == 0);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    std::vector&lt;int&gt; left(nv, -1);</span><br><span class="line">    for (int i = 0; i &lt; nv; i++) &#123;</span><br><span class="line">        if (i &gt; 0) &#123;</span><br><span class="line">            left[i] = left[i - 1];</span><br><span class="line">        &#125;</span><br><span class="line">        if (can[i]) &#123;</span><br><span class="line">            left[i] = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    std::vector&lt;std::array&lt;int, 2&gt;&gt; ans;</span><br><span class="line">    for (int i = 0; i &lt; ns; i++) &#123;</span><br><span class="line">        if (L[i] &lt; 0) &#123;</span><br><span class="line">            continue;</span><br><span class="line">        &#125;</span><br><span class="line">        int lst = -1;</span><br><span class="line">        std::vector&lt;std::array&lt;int, 2&gt;&gt; e;</span><br><span class="line">        for (auto [l, r] : ban[i]) &#123;</span><br><span class="line">            e.push_back(&#123;l - 1, -1&#125;);</span><br><span class="line">            e.push_back(&#123;r, 1&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        std::sort(e.begin(), e.end());</span><br><span class="line">        int sum = 0;</span><br><span class="line">        int val = -1;</span><br><span class="line">        for (auto [x, t] : e) &#123;</span><br><span class="line">            if (sum == 0 &amp;&amp; x &gt;= 0) &#123;</span><br><span class="line">                int u = left[std::min(x, R[i])];</span><br><span class="line">                if (u &gt; lst &amp;&amp; u &gt;= L[i]) &#123;</span><br><span class="line">                    val = u;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            sum += t;</span><br><span class="line">            lst = x;</span><br><span class="line">        &#125;</span><br><span class="line">        if (int u = left[R[i]]; u &gt; lst &amp;&amp; u &gt;= L[i]) &#123;</span><br><span class="line">            val = u;</span><br><span class="line">        &#125;</span><br><span class="line">        if (val == -1) &#123;</span><br><span class="line">            std::cout &lt;&lt; -1 &lt;&lt; &quot;\n&quot;;</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        ans.push_back(&#123;vs[val], ss[i]&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    std::vector&lt;int&gt; score(n);</span><br><span class="line">    std::sort(ans.begin(), ans.end());</span><br><span class="line">    std::map&lt;int, int&gt; diff;</span><br><span class="line">    for (auto [d, p] : ans) &#123;</span><br><span class="line">        diff[p] = d;</span><br><span class="line">    &#125;</span><br><span class="line">    for (int i = 0; i &lt; n; i++) &#123;</span><br><span class="line">        score[i] += std::lower_bound(ans.begin(), ans.end(), std::array &#123;vs[a[i]] + 1, 0&#125;) - ans.begin();</span><br><span class="line">        if (diff.contains(ss[s[i]])) &#123;</span><br><span class="line">            int x = diff[ss[s[i]]];</span><br><span class="line">            if (vs[a[i]] &lt; x &amp;&amp; x &lt;= vs[b[i]]) &#123;</span><br><span class="line">                score[i]++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    int cur = 0;</span><br><span class="line">    std::vector&lt;std::set&lt;int&gt;&gt; set(n + 1);</span><br><span class="line">    for (int i = m - 1; i &gt;= 0; i--) &#123;</span><br><span class="line">        for (auto j : q[i]) &#123;</span><br><span class="line">            int val = -1;</span><br><span class="line">            for (int k = score[j]; k &lt;= score[j] + 1 &amp;&amp; k &lt;= n; k++) &#123;</span><br><span class="line">                auto it = set[k].lower_bound(a[j]);</span><br><span class="line">                if (it != set[k].begin()) &#123;</span><br><span class="line">                    val = std::max(val, *std::prev(it));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            if (val != -1) &#123;</span><br><span class="line">                int u = left[a[j]];</span><br><span class="line">                if (u &lt;= val) &#123;</span><br><span class="line">                    std::cout &lt;&lt; -1 &lt;&lt; &quot;\n&quot;;</span><br><span class="line">                    return;</span><br><span class="line">                &#125;</span><br><span class="line">                for (int t = 0; t &lt; 2; t++) &#123;</span><br><span class="line">                    while (std::binary_search(ss.begin(), ss.end(), cur)) &#123;</span><br><span class="line">                        cur++;</span><br><span class="line">                    &#125;</span><br><span class="line">                    ans.push_back(&#123;vs[u], cur&#125;);</span><br><span class="line">                    cur++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        for (auto j : q[i]) &#123;</span><br><span class="line">            set[score[j]].insert(a[j]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    std::cout &lt;&lt; ans.size() &lt;&lt; &quot;\n&quot;;</span><br><span class="line">    for (auto [d, p] : ans) &#123;</span><br><span class="line">        std::cout &lt;&lt; d &lt;&lt; &quot; &quot; &lt;&lt; p &lt;&lt; &quot;\n&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // &#123;</span><br><span class="line">    //     std::vector&lt;int&gt; score(n);</span><br><span class="line">    //     for (int i = 0; i &lt; n; i++) &#123;</span><br><span class="line">    //         for (auto [d, p] : ans) &#123;</span><br><span class="line">    //             if (vs[a[i]] &gt;= d || (ss[s[i]] == p &amp;&amp; vs[b[i]] &gt;= d)) &#123;</span><br><span class="line">    //                 score[i]++;</span><br><span class="line">    //             &#125;</span><br><span class="line">    //         &#125;</span><br><span class="line">    //     &#125;</span><br><span class="line">    //     for (int i = 0; i &lt; m; i++) &#123;</span><br><span class="line">    //         for (int j = i + 1; j &lt; m; j++) &#123;</span><br><span class="line">    //             for (auto x : q[i]) &#123;</span><br><span class="line">    //                 for (auto y : q[j]) &#123;</span><br><span class="line">    //                     assert(score[x] &gt; score[y]);</span><br><span class="line">    //                 &#125;</span><br><span class="line">    //             &#125;</span><br><span class="line">    //         &#125;</span><br><span class="line">    //     &#125;</span><br><span class="line">    //     assert(!ans.empty());</span><br><span class="line">    //     for (int i = 0; i &lt; ans.size(); i++) &#123;</span><br><span class="line">    //         for (int j = 0; j &lt; i; j++) &#123;</span><br><span class="line">    //             assert(ans[i][1] != ans[j][1]);</span><br><span class="line">    //         &#125;</span><br><span class="line">    //     &#125;</span><br><span class="line">    // &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    std::ios::sync_with_stdio(false);</span><br><span class="line">    std::cin.tie(nullptr);</span><br><span class="line">    </span><br><span class="line">    int t;</span><br><span class="line">    std::cin &gt;&gt; t;</span><br><span class="line">    </span><br><span class="line">    while (t--) &#123;</span><br><span class="line">        solve();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><details class="folding-tag" ><summary> 查看代码 </summary>              <div class='content'>              <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"> /*</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">                                                                   || ॐ नमः पार्वती पतये हर हर महादेव || </span><br><span class="line">                                      ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀</span><br><span class="line">                                    ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣰⣷⣗⣄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀</span><br><span class="line">                                    ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡀⠀⠀⠀⠀⠀⠀⣠⣾⡿⠁⠈⢓⣟⡢⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀</span><br><span class="line">                                    ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣧⠀⠀⠀⠀⠀⣰⣿⠃⠀⠀⠀⠀⢐⣿⣼⠆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀</span><br><span class="line">                                    ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢿⣖⡀⠀⠀⠀⠈⠻⢗⣄⠀⢀⣴⣿⠟⠁⠀⠀⠀⠀⠀⢀⣴⡦⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀</span><br><span class="line">                                    ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠘⣿⡾⡢⣀⠀⠀⠀⠀⠛⠗⣿⠟⠁⠀⠀⠀⠀⢀⣠⣴⠿⠋⠻⣽⢆⠀⠀⠀⠀⠀⠀⠀⠀</span><br><span class="line">                                    ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠘⣿⣝⢷⢦⣤⣠⣀⡀⠀⠁⠀⣀⣀⠀⣄⡶⠟⠋⠀⠀⡀⠀⠈⢻⣷⣄⠀⠀⠀⠀⠀⠀</span><br><span class="line">                                    ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⡀⠀⠐⠊⠉⠉⠉⠉⠛⠛⠷⠷⣴⡄⣀⠀⠈⠿⡧⡄⠉⠉⠁⠛⠛⠋⠉⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣠⣾⡿⠋⠀⠀⠀⠀⠀⠀</span><br><span class="line">                                    ⠀⠀⠀⠀⠀⠀⠀⠀⢀⣤⣼⠿⠛⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠻⣿⢤⡀⠀⠛⢟⣄⠀⠀⠄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⣤⢿⡿⠃⠀⠀⠀⠀⠀⠀⠀⠀</span><br><span class="line">                                    ⠀⠀⠀⠀⠀⠀⣤⣾⠟⠉⠀⠀⠀⠀⠠⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⢳⡻⡄⠀⠀⠐⠠⠥⣥⣀⣀⣄⣀⣀⣀⣠⣤⣴⠶⣚⠯⠚⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀</span><br><span class="line">                                    ⠀⠀⠀⠀⠀⠀⠈⢿⣧⠀⠀⠀⠀⠀⠀⠀⣀⣠⣤⣤⣦⣤⣄⡁⠠⠀⠀⠀⢳⣻⠀⠀⠀⠀⠀⠀⠈⠉⠉⠛⠛⠋⠉⠁⢀⣀⣀⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀</span><br><span class="line">                                    ⠀⠀⠀⠀⠀⠀⠀⠀⢿⣷⠀⢀⣠⡴⣞⠿⠍⠁⠀⠀⠀⠀⠈⠙⠸⣷⣄⠀⠈⣽⡆⠀⠀⠀⠀⠀⠀⠀⠀⠀⣠⣴⡶⠈⠀⠉⠙⠛⠻⣷⣴⡀⡀⠀⠀⠀⠀⠀⠀⠀</span><br><span class="line">                                    ⠀⠀⠀⠀⠀⠀⠀⠀⠀⢻⣧⡿⠓⠉⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠘⣾⡆⢨⣽⠃⠀⠀⠀⠀⠀⠀⠀⣠⣾⠟⠁⠀⠀⠂⠀⠀⢀⣀⣄⣉⠻⢾⣷⣄⠀⠀⠀⠀⠀</span><br><span class="line">                                    ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠋⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣨⡇⣾⡿⠀⠀⠀⠀⠀⠀⢀⣼⡿⠁⠀⠀⠀⠀⢠⣴⣿⠯⠋⠉⠙⠳⠰⣮⣻⣷⡀⠀⠀⠀</span><br><span class="line">                                    ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣠⣾⠟⣼⣿⠁⠀⠀⠀⠀⠀⢠⣾⠟⠀⠀⠀⠀⠀⣴⣿⠟⠀⠀⠀⠀⠀⠀⠀⠈⢿⣿⡷⡀⠀⠀</span><br><span class="line">                                    ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣦⡦⣤⣤⣤⣤⠤⠴⠰⠾⠛⢁⣾⡿⠁⠀⠀⠀⠀⠀⢠⣿⠋⠀⠀⠀⠀⠀⣼⡿⠃⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⣧⡷⣳⠀⠀</span><br><span class="line">                                    ⠀⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠠⠱⣷⡆⠀⠀⠀⠀⠀⢀⣠⢶⡿⠋⠀⠀⠀⠀⠀⠀⣔⡽⠃⠀⠀⠀⠀⠀⣼⡿⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⣵⡍⣇⠀</span><br><span class="line">                                    ⢠⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢝⣷⡀⠀⠀⠀⠀⠸⣿⣫⣀⠀⠀⠀⠀⠀⢀⣼⠟⠀⠀⠀⠀⠀⢠⣞⡟⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⣿⢹⢾⠀</span><br><span class="line">                                    ⢸⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⣾⣇⠀⠀⠀⠀⠀⠀⠉⠙⠻⠷⠲⠖⠾⠛⠁⠀⠀⠀⣀⣠⣞⡷⠋⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⣿⢸⣾⡃</span><br><span class="line">                                    ⢸⣠⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠰⣯⠞⠛⠛⠛⠽⠶⣄⢀⡄⠀⠀⣴⢿⠻⠿⠿⠿⠛⠏⠃⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢂⣾⢸⣿⡅</span><br><span class="line">                                    ⢀⣏⡆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠙⠺⣷⣀⠙⣾⣆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢠⣿⠃⢸⣻⠆</span><br><span class="line">                                    ⠈⣿⢾⡄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠹⣿⡄⠹⡸⡄⠀⠀⠀⢸⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣠⣿⠏⠀⢾⣿⠀</span><br><span class="line">                                    ⠀⢻⡿⣱⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢹⡇⠀⣧⣷⠀⠀⠀⢸⣟⡄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣴⡿⠋⠀⠀⣇⡏⠀</span><br><span class="line">                                    ⠀⠈⣿⡼⡵⣄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣼⠇⠀⢸⢿⠀⠀⠀⣸⣯⢿⣵⣀⣀⠀⠀⠀⠀⠀⢀⢀⣤⣾⠟⠋⠀⠀⠀⣼⣻⠁⠀</span><br><span class="line">                                    ⠀⠀⢸⣯⡝⣮⢣⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣾⣿⠀⠀⢸⣿⠀⠀⠀⢸⣿⠂⠈⠙⠛⠛⠛⠛⠉⠉⠐⠒⠁⠀⠀⠀⠀⠀⢠⣷⡏⠀⠀</span><br><span class="line">                                    ⠀⠀⠀⢻⣷⡙⢷⢿⢤⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣾⡟⠃⠀⠀⣼⣿⠀⠀⠀⠀⢿⣷⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢠⢿⡞⠁⠀⠀</span><br><span class="line">                                    ⠀⠀⠀⠀⠻⣿⡄⠈⠛⠶⣵⣀⢀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⣤⠾⠛⠁⠀⠂⠀⢀⣷⡏⠀⠀⠀⠀⠈⢻⣷⡄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡰⣫⠟⠀⠀⠀⠀</span><br><span class="line">                                    ⠀⠀⠀⠀⠀⠙⢿⣦⠀⠀⠈⠘⠙⠻⠟⠿⠷⠒⠚⠙⠁⠀⠈⠁⠀⠀⠀⠀⠀⢀⣾⡿⠀⠀⠀⠀⠀⠀⠀⠙⢿⡶⠠⢀⠀⠀⠀⠀⢀⣀⣄⠀⣠⠚⠁⠀⠀⠀⠀⠀</span><br><span class="line">                                    ⠀⠀⠀⠀⠀⠀⠈⠻⣿⣄⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣠⣿⡟⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠙⠒⠻⠿⠿⠛⠛⠉⠐⠁⠀⠀⠀⠀⠀⠀⠀⠀</span><br><span class="line">                                    ⠀⠀⠀⠀⠀⠀⠀⠀⠈⠙⢙⠀⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡀⣠⢞⡵⠋⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀</span><br><span class="line">                                    ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠉⠃⠖⠶⣶⣤⣤⡤⢤⣤⡤⠶⠞⠫⠒⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀</span><br><span class="line">                                    ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠉⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">                                                          ।। ऊँ कृष्णाय वासुदेवाय हरये परमात्मने ।।</span><br><span class="line">                                                          ।। प्रणतः क्लेशनाशाय गोविंदाय नमो नमः ।।</span><br><span class="line"></span><br><span class="line">                                                                  </span><br><span class="line"></span><br><span class="line">                                            ---------------&gt; tiwari ji presents &lt;---------------   </span><br><span class="line"></span><br><span class="line">  “ Mnn boot karega k chor yrr apne se nahi hoga  Just ask 1 question “ Why I started ? “</span><br><span class="line"></span><br><span class="line">    &quot;Countless reasons not to do it, but only one reason to go for it — and that&#x27;s enough.&quot;*/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#include &lt;bits/stdc++.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">#define ll long long </span><br><span class="line">#define pb push_back</span><br><span class="line">#define pp pop_back()</span><br><span class="line">#define vi vector&lt;ll&gt;</span><br><span class="line">#define tiwari ll t ; cin&gt;&gt;t; while(t--)</span><br><span class="line">#define  loop  for(int i=0;i&lt;n;i++)&#123;cin&gt;&gt;a[i];&#125;</span><br><span class="line">#define  mn ll m,n; cin&gt;&gt;m&gt;&gt;n;</span><br><span class="line">#define  str string s ; cin&gt;&gt;s;</span><br><span class="line">#define str2 string s; cin&gt;&gt;s; string t; cin&gt;&gt;t;</span><br><span class="line">#define  set unordered_set&lt;int&gt;seen;</span><br><span class="line">#define  mii unordered_map&lt;int,int&gt;mp;</span><br><span class="line">#define  mic unordered_map&lt;int ,char&gt;mpp;</span><br><span class="line">#define  mcc unordered_map&lt;char,char&gt;mpc;</span><br><span class="line">#define srt sort(a.begin(),a.end());</span><br><span class="line">#define couta for(auto it:a)&#123;cout&lt;&lt;it&lt;&lt;&quot; &quot;;&#125;</span><br><span class="line">#define bp1 __builtin_popcount</span><br><span class="line">#define bpll __builtin_popcountll</span><br><span class="line">#define countdigits int cg=(int)(log10(n)+1)</span><br><span class="line">#define  surukezero __builtin_clz(a)</span><br><span class="line">#define  lastkezero __builtin_ctz(a)</span><br><span class="line">#define  decimalnumberdega auto number=0bn;</span><br><span class="line">#define  ithbit1haiyanahi if((n&gt;&gt;i)&amp;1)&#123;&#125; </span><br><span class="line">#define last1removekaro n&amp;(n-1)  </span><br><span class="line">#define binaryme bitset&lt;32&gt;(xr).to_string();  </span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">     </span><br><span class="line">     tiwari&#123;</span><br><span class="line"></span><br><span class="line">         int n;</span><br><span class="line">         cin&gt;&gt;n;</span><br><span class="line"></span><br><span class="line">         vi a(n);</span><br><span class="line">         loop;</span><br><span class="line">         srt;</span><br><span class="line">      </span><br><span class="line">      int ans=0;</span><br><span class="line">         for(int i=0;i&lt;n-1;)&#123;</span><br><span class="line">             if(a[i]==a[i+1])&#123;</span><br><span class="line">                ans=ans+1;</span><br><span class="line">                i=i+2;</span><br><span class="line">             &#125;</span><br><span class="line">             else&#123;</span><br><span class="line">                i++;</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">         cout&lt;&lt;ans&lt;&lt;endl;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">       </span><br><span class="line">   </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* JAB TAK KHUD KUCH NA KAR LO TABTAK DUSRO KO GYAN MAT DO */</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>              </div>            </details><p>上述两份代码皆选自Codeforces上的正确提交，谁的代码风格更好不言而喻。</p><p>第一份代码出自Jiangly。</p><p>第二份代码充斥了大量的宏定义，字符画，多余的空格，看似意义不明的函数，拥挤的代码…这份代码规范差，起手模板的宏定义可读性差，基本循环语句甚至包含了宏定义，码风极差。</p><h3 id="关于代码的起手"><a href="#关于代码的起手" class="headerlink" title="关于代码的起手"></a>关于代码的起手</h3><p>常见的基础模版大体分为两种</p><ol><li>基本代码模版</li></ol><details class="folding-tag" ><summary> 查看代码 </summary>              <div class='content'>              <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;bits/stdc++.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">void solve() &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">int main() &#123;</span><br><span class="line">  ios::sync_with_stdio(false);</span><br><span class="line">  cin.tie(0), cout.tie(0);</span><br><span class="line">  int tt = 1;</span><br><span class="line">  // cin &gt;&gt; tt;</span><br><span class="line">  while (tt--) &#123;</span><br><span class="line">      solve();</span><br><span class="line">  &#125;</span><br><span class="line">  return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><ol><li>长篇大论的包含宏定义+函数+重载等的模板，如</li></ol><details class="folding-tag" ><summary> 查看代码 </summary>              <div class='content'>              <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;bits/stdc++.h&gt;</span><br><span class="line">// #include &lt;bits/extc++.h&gt;</span><br><span class="line">using namespace std;</span><br><span class="line">// using namespace __gnu_pbds;</span><br><span class="line">#define endl &#x27;\n&#x27;</span><br><span class="line">#define ture true</span><br><span class="line">#define flase false</span><br><span class="line">#define pow power</span><br><span class="line">#define all(x) begin(x), end(x)</span><br><span class="line">#define mem(a, x) memset(a, x, sizeof(a))</span><br><span class="line">#define gcd(a, b) gcdint(a, b)</span><br><span class="line">#define lcm(a, b) (a / gcd(a, b) * b)</span><br><span class="line">#define sz(x) (int)x.size()</span><br><span class="line">#define lowbit(x) (x &amp; -x)</span><br><span class="line">#define pb push_back</span><br><span class="line">#define EPS 1e-7</span><br><span class="line">#define int ll</span><br><span class="line">#define ll long long</span><br><span class="line">#define i64 long long</span><br><span class="line">#define i128 __int128</span><br><span class="line">#define fr first</span><br><span class="line">#define sc second</span><br><span class="line">#define tcT template &lt;class T</span><br><span class="line">#define tcTU tcT, class U</span><br><span class="line"></span><br><span class="line">void unsyncIO() &#123; cin.tie(0)-&gt;sync_with_stdio(0); &#125;</span><br><span class="line">void setPrec() &#123; cout &lt;&lt; fixed &lt;&lt; setprecision(15); &#125;</span><br><span class="line">void setIO() &#123; unsyncIO(), setPrec(); &#125;</span><br><span class="line"></span><br><span class="line">inline int gcdint(int a, int b) &#123; return b ? gcdint(b, a % b) : a; &#125;</span><br><span class="line">inline i128 gcd128(i128 a, i128 b) &#123; return b ? gcd128(b, a % b) : a; &#125;</span><br><span class="line">inline int cdiv(int a, int b) &#123; return a / b + ((a ^ b) &gt; 0 &amp;&amp; a % b); &#125;</span><br><span class="line">inline int fdiv(int a, int b) &#123; return a / b - ((a ^ b) &lt; 0 &amp;&amp; a % b); &#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; using V = vector&lt;T&gt;;</span><br><span class="line">tcTU &gt; using PR = pair&lt;T, U&gt;;</span><br><span class="line">tcTU &gt; using MP = map&lt;T, U&gt;;</span><br><span class="line">tcTU &gt; using VP = vector&lt;pair&lt;T, U&gt;&gt;;</span><br><span class="line">tcT &gt; using pqg = priority_queue&lt;T, vector&lt;T&gt;, greater&lt;T&gt;&gt;;</span><br><span class="line">tcT &gt; using pql = priority_queue&lt;T, vector&lt;T&gt;, less&lt;T&gt;&gt;;</span><br><span class="line"></span><br><span class="line">tcTU &gt; istream &amp;operator&gt;&gt;(istream &amp;in, pair&lt;T, U&gt; &amp;a) &#123;</span><br><span class="line">  return in &gt;&gt; a.first &gt;&gt; a.second;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; istream &amp;operator&gt;&gt;(istream &amp;in, vector&lt;T&gt; &amp;a) &#123;</span><br><span class="line">  for (auto &amp;x : a) &#123;</span><br><span class="line">    in &gt;&gt; x;</span><br><span class="line">  &#125;</span><br><span class="line">  return in;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; ostream &amp;operator&lt;&lt;(ostream &amp;out, const pair&lt;T, U&gt; &amp;a) &#123;</span><br><span class="line">  return out &lt;&lt; a.first &lt;&lt; &#x27; &#x27; &lt;&lt; a.second;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; ostream &amp;operator&lt;&lt;(ostream &amp;out, const vector&lt;pair&lt;T, U&gt;&gt; &amp;a) &#123;</span><br><span class="line">  for (auto &amp;x : a) &#123;</span><br><span class="line">    out &lt;&lt; x &lt;&lt; endl;</span><br><span class="line">  &#125;</span><br><span class="line">  return out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; ostream &amp;operator&lt;&lt;(ostream &amp;out, const vector&lt;T&gt; &amp;a) &#123;</span><br><span class="line">  int n = a.size();</span><br><span class="line">  if (!n) &#123;</span><br><span class="line">    return out;</span><br><span class="line">  &#125;</span><br><span class="line">  out &lt;&lt; a[0];</span><br><span class="line">  for (int i = 1; i &lt; n; i++) &#123;</span><br><span class="line">    out &lt;&lt; &#x27; &#x27; &lt;&lt; a[i];</span><br><span class="line">  &#125;</span><br><span class="line">  return out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">std::ostream &amp;operator&lt;&lt;(std::ostream &amp;os, i128 n) &#123;</span><br><span class="line">  std::string s;</span><br><span class="line">  while (n) &#123;</span><br><span class="line">    s += &#x27;0&#x27; + n % 10;</span><br><span class="line">    n /= 10;</span><br><span class="line">  &#125;</span><br><span class="line">  std::reverse(s.begin(), s.end());</span><br><span class="line">  return os &lt;&lt; s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">inline int power(int a, i64 b, int p = 1e9 + 7) &#123;</span><br><span class="line">  int res = 1;</span><br><span class="line">  for (; b; b /= 2, a = 1LL * a * a % p) &#123;</span><br><span class="line">    if (b % 2) &#123;</span><br><span class="line">      res = 1LL * res * a % p;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  return res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; bool ckmin(T &amp;a, const T &amp;b) &#123; return b &lt; a ? a = b, 1 : 0; &#125;</span><br><span class="line">tcT &gt; bool ckmax(T &amp;a, const T &amp;b) &#123; return a &lt; b ? a = b, 1 : 0; &#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; void remDup(vector&lt;T&gt; &amp;v) &#123;</span><br><span class="line">  sort(all(v));</span><br><span class="line">  v.erase(unique(all(v)), end(v));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; void erase(T &amp;t, const U &amp;u) &#123;</span><br><span class="line">  auto it = t.find(u);</span><br><span class="line">  assert(it != end(t));</span><br><span class="line">  t.erase(it);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; T fstTrue(T lo, T hi, U f) &#123;</span><br><span class="line">  hi++;</span><br><span class="line">  assert(lo &lt;= hi);</span><br><span class="line">  while (lo &lt; hi) &#123;</span><br><span class="line">    T mid = lo + (hi - lo) / 2;</span><br><span class="line">    f(mid) ? hi = mid : lo = mid + 1;</span><br><span class="line">  &#125;</span><br><span class="line">  return lo;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; T lstTrue(T lo, T hi, U f) &#123;</span><br><span class="line">  lo--;</span><br><span class="line">  assert(lo &lt;= hi);</span><br><span class="line">  while (lo &lt; hi) &#123;</span><br><span class="line">    T mid = lo + (hi - lo + 1) / 2;</span><br><span class="line">    f(mid) ? lo = mid : hi = mid - 1;</span><br><span class="line">  &#125;</span><br><span class="line">  return lo;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">constexpr int mod = 1e9 + 7;</span><br><span class="line">constexpr int inf = 0x7fffffff;</span><br><span class="line">constexpr int N = 1.01e6;</span><br><span class="line">constexpr int M = 2.01e3;</span><br><span class="line"></span><br><span class="line">#ifdef LOCAL</span><br><span class="line">#include &lt;C:/Users/70510/Desktop/Others/algo/debug.h&gt;</span><br><span class="line">#else</span><br><span class="line">#define debug(...) 42</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">void solve() &#123;&#125;</span><br><span class="line"></span><br><span class="line">signed main() &#123;</span><br><span class="line">  setIO();</span><br><span class="line">  int tt = 1;</span><br><span class="line">  // cin &gt;&gt; tt;</span><br><span class="line">  while (tt--) &#123;</span><br><span class="line">    solve();</span><br><span class="line">  &#125;</span><br><span class="line">  return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><p>上面就是我的代码模板，我在此要强调的是，模板长≠模板冗长。</p><p>第一份代码简洁，我也推荐大家写这种代码，但是实际写下来肯定是不如第二份舒服。</p><p>第二份代码包含了大量的宏定义等行为，但是每一段定义做了区域性的划分</p><ul><li>最初的#define保证了基本的可移植性 一直到自己的代码中如果有相关宏定义的话可能根本不报错</li><li>之后的函数是关于关闭流同步，基本短代码函数重载</li><li>之后的using使用template<class *T*>来定义部分STL容器，摒弃大量的vi，vii，pi，vpii等过长定义</li><li>重载部分STL的输入输出流以及int128定义，这里将重载运算符相关的代码放在了一起</li><li>接下来重载power函数，对基础pow进行直接加速</li><li>然后用template<class *T*>定义另一部分基本函数，取最大最小值赋值/二分/去重等函数</li><li>然后constexpr最常使用的四个int常量</li><li>引入本地debug.h</li><li>最后的主体代码</li></ul><p>整体看下来，代码虽然很长，但基本逻辑是非常清晰的，对每一部分都进行了划分。现在的大多数橙名，红名以下选手的代码模板基本都是一通乱写，不知所云，这也是灰名和红名之间的差距，代码的可读性都是大大不同。</p><p>这里我的模板主要是从以下代码吸收而来，并借鉴了其良好的代码分区原则</p><details class="folding-tag" ><summary> 查看代码 </summary>              <div class='content'>              <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;bits/stdc++.h&gt;</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">/////////////////////// MACROS ////////////////////////////////////////////</span><br><span class="line">using ll = long long;</span><br><span class="line">using ld = long double;</span><br><span class="line">using db = double;</span><br><span class="line">using str = string;</span><br><span class="line"></span><br><span class="line">using pi = pair&lt;int, int&gt;;</span><br><span class="line">using pl = pair&lt;ll, ll&gt;;</span><br><span class="line"></span><br><span class="line">using vi = vector&lt;int&gt;;</span><br><span class="line">using vl = vector&lt;ll&gt;;</span><br><span class="line">using vs = vector&lt;str&gt;;</span><br><span class="line">using vc = vector&lt;char&gt;;</span><br><span class="line">using vpi = vector&lt;pi&gt;;</span><br><span class="line">using vpl = vector&lt;pl&gt;;</span><br><span class="line"></span><br><span class="line">#define tcT template &lt;class T</span><br><span class="line">#define tcTU tcT, class U</span><br><span class="line">tcT &gt; using V = vector&lt;T&gt;;</span><br><span class="line">tcT, size_t SZ &gt; using AR = array&lt;T, SZ&gt;;</span><br><span class="line">tcTU &gt; using PR = pair&lt;T, U&gt;;</span><br><span class="line">tcTU &gt; using umap = unordered_map&lt;T, U&gt;;</span><br><span class="line">tcT &gt; using uset = unordered_set&lt;T&gt;;</span><br><span class="line">tcT &gt; using mset = multiset&lt;T&gt;;</span><br><span class="line"></span><br><span class="line">#define mp make_pair</span><br><span class="line">#define f first</span><br><span class="line">#define s second</span><br><span class="line"></span><br><span class="line">#define sz(x) int((x).size())</span><br><span class="line">#define all(x) x.begin(), x.end()</span><br><span class="line">#define rall(x) x.rbegin(), x.rend()</span><br><span class="line">#define rsz resize</span><br><span class="line">#define ins insert</span><br><span class="line">#define ft front()</span><br><span class="line">#define bk back()</span><br><span class="line">#define ppb pop_back()</span><br><span class="line">#define ppf pop_front()</span><br><span class="line">#define pb push_back</span><br><span class="line">#define eb emplace_back</span><br><span class="line">#define pf push_front</span><br><span class="line"></span><br><span class="line">#define lb lower_bound</span><br><span class="line">#define ub upper_bound</span><br><span class="line"></span><br><span class="line">// LOOPS</span><br><span class="line">#define FOR(i, a, b) for (int i = (a); i &lt; (b); ++i)</span><br><span class="line">#define F0R(i, a) FOR(i, 0, a)</span><br><span class="line">#define ROF(i, a, b) for (int i = (b) - 1; i &gt;= (a); --i)</span><br><span class="line">#define R0F(i, a) ROF(i, 0, a)</span><br><span class="line">#define rep(a) F0R(_, a)</span><br><span class="line">#define each(a, x) for (auto&amp; a : x)</span><br><span class="line"></span><br><span class="line">/////////////////////// IMPORANT VARS /////////////////////////////////////</span><br><span class="line"></span><br><span class="line">const int MOD = 1e9 + 7;  // 998244353;</span><br><span class="line">const int MX = 2e5 + 5;</span><br><span class="line">const ll INFL = ll(3e18) + 10;</span><br><span class="line">const int INF = int(1e9) + 10;</span><br><span class="line">const ld PI = acos((ld)-1);</span><br><span class="line">const int dx[4] = &#123;1, 0, -1, 0&#125;, dy[4] = &#123;0, 1, 0, -1&#125;;</span><br><span class="line">tcT &gt; using pqg = priority_queue&lt;T, vector&lt;T&gt;, greater&lt;T&gt;&gt;;</span><br><span class="line">tcT &gt; using pql = priority_queue&lt;T, vector&lt;T&gt;, less&lt;T&gt;&gt;;</span><br><span class="line">mt19937 rng(chrono::steady_clock::now().time_since_epoch().count());</span><br><span class="line">#define nl &#x27;\n&#x27;</span><br><span class="line"></span><br><span class="line">constexpr int pct(int x) &#123; return __builtin_popcount(x); &#125;  // # of bits set</span><br><span class="line">constexpr int bits(int x) &#123; return x == 0 ? 0 : 31 - __builtin_clz(x); &#125;</span><br><span class="line">constexpr int p2(int x) &#123; return 1 &lt;&lt; x; &#125;</span><br><span class="line">constexpr int msk2(int x) &#123; return p2(x) - 1; &#125;</span><br><span class="line"></span><br><span class="line">ll cdiv(ll a, ll b) &#123;</span><br><span class="line">  return a / b + ((a ^ b) &gt; 0 &amp;&amp; a % b);</span><br><span class="line">&#125;  // divide a by b rounded up</span><br><span class="line">ll fdiv(ll a, ll b) &#123;</span><br><span class="line">  return a / b - ((a ^ b) &lt; 0 &amp;&amp; a % b);</span><br><span class="line">&#125;  // divide a by b rounded down</span><br><span class="line"></span><br><span class="line">tcT &gt; bool ckmin(T&amp; a, const T&amp; b) &#123;</span><br><span class="line">  return b &lt; a ? a = b, 1 : 0;</span><br><span class="line">&#125;  // set a = min(a,b)</span><br><span class="line">tcT &gt; bool ckmax(T&amp; a, const T&amp; b) &#123; return a &lt; b ? a = b, 1 : 0; &#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; T fstTrue(T lo, T hi, U f) &#123;</span><br><span class="line">  hi++;</span><br><span class="line">  assert(lo &lt;= hi);  // assuming f is increasing</span><br><span class="line">  while (lo &lt; hi) &#123;  // find first index such that f is true</span><br><span class="line">    T mid = lo + (hi - lo) / 2;</span><br><span class="line">    f(mid) ? hi = mid : lo = mid + 1;</span><br><span class="line">  &#125;</span><br><span class="line">  return lo;</span><br><span class="line">&#125;</span><br><span class="line">tcTU &gt; T lstTrue(T lo, T hi, U f) &#123;</span><br><span class="line">  lo--;</span><br><span class="line">  assert(lo &lt;= hi);  // assuming f is decreasing</span><br><span class="line">  while (lo &lt; hi) &#123;  // find last index such that f is true</span><br><span class="line">    T mid = lo + (hi - lo + 1) / 2;</span><br><span class="line">    f(mid) ? lo = mid : hi = mid - 1;</span><br><span class="line">  &#125;</span><br><span class="line">  return lo;</span><br><span class="line">&#125;</span><br><span class="line">tcT &gt; void remDup(vector&lt;T&gt;&amp; v) &#123;  // sort and remove duplicates</span><br><span class="line">  sort(all(v));</span><br><span class="line">  v.erase(unique(all(v)), end(v));</span><br><span class="line">&#125;</span><br><span class="line">tcTU &gt; void erase(T&amp; t, const U&amp; u) &#123;  // don&#x27;t erase</span><br><span class="line">  auto it = t.find(u);</span><br><span class="line">  assert(it != end(t));</span><br><span class="line">  t.erase(it);</span><br><span class="line">&#125;  // element that doesn&#x27;t exist from (multi)set</span><br><span class="line"></span><br><span class="line">// #include &lt;ext/pb_ds/assoc_container.hpp&gt;</span><br><span class="line">// using namespace __gnu_pbds;</span><br><span class="line"></span><br><span class="line">// tcT&gt; using iset = tree&lt;T, null_type, less&lt;T&gt;, rb_tree_tag,</span><br><span class="line">// tree_order_statistics_node_update&gt;; #define ook order_of_key #define fbo</span><br><span class="line">// find_by_order</span><br><span class="line"></span><br><span class="line">// struct chash &#123;</span><br><span class="line">// const uint64_t C = ll(2e18*PI)+71;</span><br><span class="line">// const int RANDOM = rng();</span><br><span class="line">// ll operator()(ll x) const &#123;</span><br><span class="line">// return __builtin_bswap64((x^RANDOM)*C); &#125;</span><br><span class="line">// &#125;;</span><br><span class="line"></span><br><span class="line">// struct splitmix64_hash &#123;</span><br><span class="line">// static uint64_t splitmix64(uint64_t x) &#123;</span><br><span class="line">// // http://xorshift.di.unimi.it/splitmix64.c</span><br><span class="line">// x += 0x9e3779b97f4a7c15;</span><br><span class="line">// x = (x ^ (x &gt;&gt; 30)) * 0xbf58476d1ce4e5b9;</span><br><span class="line">// x = (x ^ (x &gt;&gt; 27)) * 0x94d049bb133111eb;</span><br><span class="line">// return x ^ (x &gt;&gt; 31);</span><br><span class="line">// &#125;</span><br><span class="line"></span><br><span class="line">// size_t operator()(uint64_t x) const &#123;</span><br><span class="line">// static const uint64_t FIXED_RANDOM =</span><br><span class="line">// std::chrono::steady_clock::now().time_since_epoch().count();</span><br><span class="line">// return splitmix64(x + FIXED_RANDOM);</span><br><span class="line">// &#125;</span><br><span class="line">// &#125;;</span><br><span class="line"></span><br><span class="line">// template&lt;class K,class V&gt; using um = unordered_map&lt;K,V,chash&gt;;</span><br><span class="line">// template&lt;class K,class V&gt; using ht = gp_hash_table&lt;K,V,chash&gt;;</span><br><span class="line">// template&lt;class K,class V&gt; V get(ht&lt;K,V&gt;&amp; u, K x) &#123;</span><br><span class="line">// auto it = u.find(x); return it == end(u) ? 0 : it-&gt;s; &#125;</span><br><span class="line"></span><br><span class="line">/////////////////////// OUPUT /////////////////////////////////////////////</span><br><span class="line">#define ts to_string</span><br><span class="line">str ts(char c) &#123; return str(1, c); &#125;</span><br><span class="line">str ts(const char* s) &#123; return (str)s; &#125;</span><br><span class="line">str ts(str s) &#123; return s; &#125;</span><br><span class="line">str ts(bool b) &#123;</span><br><span class="line">#ifdef LOCAL</span><br><span class="line">  return b ? &quot;true&quot; : &quot;false&quot;;</span><br><span class="line">#else</span><br><span class="line">  return ts((int)b);</span><br><span class="line">#endif</span><br><span class="line">&#125;</span><br><span class="line">tcTU &gt; str ts(pair&lt;T, U&gt; p) &#123;</span><br><span class="line">#ifdef LOCAL</span><br><span class="line">  return &quot;(&quot; + ts(p.f) + &quot;, &quot; + ts(p.s) + &quot;)&quot;;</span><br><span class="line">#else</span><br><span class="line">  return ts(p.f) + &quot; &quot; + ts(p.s);</span><br><span class="line">#endif</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; str ts(V&lt;pair&lt;T, U&gt;&gt; v) &#123;</span><br><span class="line">#ifdef LOCAL</span><br><span class="line">  bool fst = 1;</span><br><span class="line">  str res = &quot;&#123;&quot;;</span><br><span class="line">  for (const auto&amp; x : v) &#123;</span><br><span class="line">    if (!fst) res += &quot;, &quot;;</span><br><span class="line">    fst = 0;</span><br><span class="line">    res += ts(x);</span><br><span class="line">  &#125;</span><br><span class="line">  res += &quot;&#125;&quot;;</span><br><span class="line">  return res;</span><br><span class="line">#else</span><br><span class="line">  bool fst = 1;</span><br><span class="line">  str res = &quot;&quot;;</span><br><span class="line">  for (const auto&amp; x : v) &#123;</span><br><span class="line">    if (!fst) res += &quot; &quot;;</span><br><span class="line">    fst = 0;</span><br><span class="line">    res += ts(x);</span><br><span class="line">  &#125;</span><br><span class="line">  return res;</span><br><span class="line">#endif</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; str ts(T v) &#123;</span><br><span class="line">#ifdef LOCAL</span><br><span class="line">  bool fst = 1;</span><br><span class="line">  str res = &quot;&#123;&quot;;</span><br><span class="line">  for (const auto&amp; x : v) &#123;</span><br><span class="line">    if (!fst) res += &quot;, &quot;;</span><br><span class="line">    fst = 0;</span><br><span class="line">    res += ts(x);</span><br><span class="line">  &#125;</span><br><span class="line">  res += &quot;&#125;&quot;;</span><br><span class="line">  return res;</span><br><span class="line">#else</span><br><span class="line">  bool fst = 1;</span><br><span class="line">  str res = &quot;&quot;;</span><br><span class="line">  for (const auto&amp; x : v) &#123;</span><br><span class="line">    if (!fst) res += &quot; &quot;;</span><br><span class="line">    fst = 0;</span><br><span class="line">    res += ts(x);</span><br><span class="line">  &#125;</span><br><span class="line">  return res;</span><br><span class="line"></span><br><span class="line">#endif</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">///////////////////////// DEBUG ///////////////////////////////////////////</span><br><span class="line">#define tcTUU tcT, class... U</span><br><span class="line">void DBG() &#123; cerr &lt;&lt; &quot;]&quot; &lt;&lt; &quot;\e[0m&quot; &lt;&lt; endl; &#125;</span><br><span class="line">tcTUU &gt; void DBG(const T&amp; t, const U&amp;... u) &#123;</span><br><span class="line">  cerr &lt;&lt; ts(t);</span><br><span class="line">  if (sizeof...(u)) cerr &lt;&lt; &quot;, &quot;;</span><br><span class="line">  DBG(u...);</span><br><span class="line">&#125;</span><br><span class="line">#ifdef LOCAL</span><br><span class="line">#define dbg(...)                                                     \</span><br><span class="line">  cerr &lt;&lt; &quot;\e[1m&quot; &lt;&lt; &quot;Line(&quot; &lt;&lt; __LINE__ &lt;&lt; &quot;) -&gt; [&quot; &lt;&lt; #__VA_ARGS__ \</span><br><span class="line">       &lt;&lt; &quot;]: [&quot;,                                                    \</span><br><span class="line">      DBG(__VA_ARGS__);</span><br><span class="line">#define asrt(...)                                                   \</span><br><span class="line">  if (!(__VA_ARGS__))                                               \</span><br><span class="line">    cerr &lt;&lt; &quot;Line(&quot; &lt;&lt; __LINE__ &lt;&lt; &quot;) -&gt; function(&quot; &lt;&lt; __FUNCTION__ \</span><br><span class="line">         &lt;&lt; &quot;) -&gt; CHK FAILED: (&quot; &lt;&lt; #__VA_ARGS__ &lt;&lt; &quot;)&quot; &lt;&lt; &quot;\n&quot;,    \</span><br><span class="line">        exit(0);</span><br><span class="line">#else</span><br><span class="line">#define dbg(...) 0</span><br><span class="line">#define asrt(...) 0</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">///////////////////////// FILE I/O ////////////////////////////////////////</span><br><span class="line">void unsyncIO() &#123; cin.tie(0)-&gt;sync_with_stdio(0); &#125;</span><br><span class="line">void setPrec() &#123; cout &lt;&lt; fixed &lt;&lt; setprecision(15); &#125;</span><br><span class="line">void setIn(str s) &#123; freopen(s.c_str(), &quot;r&quot;, stdin); &#125;</span><br><span class="line">void setOut(str s) &#123; freopen(s.c_str(), &quot;w&quot;, stdout); &#125;</span><br><span class="line">void setIO(str s = &quot;&quot;) &#123;</span><br><span class="line">  unsyncIO();</span><br><span class="line">  setPrec();</span><br><span class="line">#ifndef LOCAL</span><br><span class="line">  if (sz(s)) setIn(s + &quot;.in&quot;), setOut(s + &quot;.out&quot;);  // for USACO</span><br><span class="line">#endif</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">///////////////////////// TEMPLATE ABOVE //////////////////////////////////</span><br><span class="line"></span><br><span class="line">// REMEMBER</span><br><span class="line">// - Don&#x27;t Focus On Only One Approach</span><br><span class="line">// - Read And Understand Problem Fully</span><br><span class="line">// - Think Of Edges Cases</span><br><span class="line">// - Implement Carefully</span><br><span class="line">// - Always Check For Overflows</span><br><span class="line">// - Reset Global Variables</span><br><span class="line">// - Look At The Bigger Picture</span><br><span class="line">// - Don&#x27;t Get Discouraged, You Can Pull It Back</span><br><span class="line"></span><br><span class="line">void solve() &#123;&#125;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">  setIO();</span><br><span class="line"></span><br><span class="line">  int TT = 1;</span><br><span class="line">  // cin &gt;&gt; TT;</span><br><span class="line"></span><br><span class="line">  rep(TT) solve();</span><br><span class="line"></span><br><span class="line">  exit(0 - 0);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>              </div>            </details><p>这份代码由橙名所写，我个人认为，如果可读性是比较良好，并且非常值得借鉴的代码。</p><p>这里随机粘贴一位灰名选手的代码</p><details class="folding-tag" ><summary> 查看代码 </summary>              <div class='content'>              <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br></pre></td><td class="code"><pre><span class="line">//JAI SHREE RAM</span><br><span class="line">    #include&lt;bits/stdc++.h&gt;</span><br><span class="line">    #include&lt;ext/pb_ds/assoc_container.hpp&gt;</span><br><span class="line">    #include&lt;ext/pb_ds/tree_policy.hpp&gt;</span><br><span class="line">    using namespace std;</span><br><span class="line">    using namespace std::chrono;</span><br><span class="line">    #define ll long long </span><br><span class="line">    using namespace __gnu_pbds;</span><br><span class="line">    typedef tree&lt;ll int,null_type,less_equal&lt;ll int&gt;,rb_tree_tag,tree_order_statistics_node_update&gt; pbds;// find_by_order, order_of_key</span><br><span class="line">    //for different comparator use greater instead of less</span><br><span class="line">    void myerase(pbds &amp;t, ll int v)&#123;</span><br><span class="line">        ll int rank = t.order_of_key(v);//Number of elements that are less than v in t</span><br><span class="line">        pbds::iterator it = t.find_by_order(rank); //Iterator that points to the (rank+1)th element in t</span><br><span class="line">        t.erase(it);</span><br><span class="line">    &#125;</span><br><span class="line">    #define print_vector(v); for(int i=0;i&lt;v.size();i++)&#123;cout&lt;&lt;v[i]&lt;&lt;&quot; &quot;;&#125;cout&lt;&lt;endl;</span><br><span class="line">    ll int MOD1=1000000007;</span><br><span class="line">    ll int power_x_y(ll int x, ll int y)//logy time complexity//binary exponentiation</span><br><span class="line">    &#123;</span><br><span class="line">        ll int temp;</span><br><span class="line">        if (y == 0)</span><br><span class="line">            return 1;</span><br><span class="line">        temp = power_x_y(x, y / 2);</span><br><span class="line">        if (y % 2 == 0)</span><br><span class="line">            return (((temp)) * ((temp)));</span><br><span class="line">        else</span><br><span class="line">            return (((x)) *((temp)) * ((temp)));</span><br><span class="line">    &#125;</span><br><span class="line">    ll int power_x_y_p(ll int x, ll int y,ll int p)//logy time complexity//binary exponentiation</span><br><span class="line">    &#123;</span><br><span class="line">        ll int temp;</span><br><span class="line">        if (y == 0)</span><br><span class="line">            return 1;</span><br><span class="line">        temp = power_x_y_p(x, y / 2,p)%p;</span><br><span class="line">        if (y % 2 == 0)</span><br><span class="line">            return (((temp%p)) * ((temp%p)))%p;</span><br><span class="line">        else</span><br><span class="line">            return ((((x%p) *(temp%p))%p) * (temp%p))%p;</span><br><span class="line">    &#125;    </span><br><span class="line">    //for 8 it will return 1000</span><br><span class="line">    vector&lt;ll int&gt; binary_representation(ll int n)&#123;</span><br><span class="line">        vector&lt;ll int &gt;v;</span><br><span class="line">        while(n&gt;0)&#123;</span><br><span class="line">            v.push_back(n%2);</span><br><span class="line">            n/=2;</span><br><span class="line">        &#125;</span><br><span class="line">        reverse(v.begin(),v.end());</span><br><span class="line">        return v;</span><br><span class="line">    &#125;</span><br><span class="line">    void divisors(ll int n,vector&lt;ll int&gt;&amp;v)&#123;</span><br><span class="line">        for(ll int i=1;i&lt;=sqrt(n);i++)&#123;</span><br><span class="line">            if(n%i==0)&#123; </span><br><span class="line">                v.push_back(i);</span><br><span class="line">                if(n/i!=n and n/i!=i)&#123;</span><br><span class="line">                    v.push_back(n/i);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        if(n!=1)v.push_back(n);</span><br><span class="line">        sort(v.begin(),v.end());</span><br><span class="line">    &#125;</span><br><span class="line">    void generate_all_k_length_subsequences_of_s(ll int index,string s,vector&lt;string&gt;&amp;storage,ll int k,string curr)&#123;</span><br><span class="line">        if(curr.size()==k)&#123;storage.push_back(curr);return;&#125;</span><br><span class="line">        if(index==s.size()) return ;</span><br><span class="line">        //not pick</span><br><span class="line">        generate_all_k_length_subsequences_of_s(index+1,s,storage,k,curr);</span><br><span class="line">        //pick</span><br><span class="line">        curr.push_back(s[index]);</span><br><span class="line">        generate_all_k_length_subsequences_of_s(index+1,s,storage,k,curr);</span><br><span class="line">        curr.pop_back();</span><br><span class="line">        return;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    void generate_all_subsets_of_s(ll int index,string s,vector&lt;string&gt;&amp;storage,string curr)&#123;</span><br><span class="line">        if(index==s.size())&#123;storage.push_back(curr);return;&#125;</span><br><span class="line">        //not pick</span><br><span class="line">        generate_all_subsets_of_s(index+1,s,storage,curr);</span><br><span class="line">        //pick</span><br><span class="line">        curr.push_back(s[index]);</span><br><span class="line">        generate_all_subsets_of_s(index+1,s,storage,curr);</span><br><span class="line">        curr.pop_back();</span><br><span class="line">        return;</span><br><span class="line"></span><br><span class="line">    &#125;    </span><br><span class="line"></span><br><span class="line">     </span><br><span class="line">    // Returns n^(-1) mod p</span><br><span class="line">    unsigned long long modInverse(unsigned long long n,  ll int p)</span><br><span class="line">    &#123;</span><br><span class="line">        return power_x_y_p(n, p - 2, p);</span><br><span class="line">    &#125;</span><br><span class="line">    unsigned long long nCrModPFermat( long long n,ll int r, ll int p)   //time taken by all the functions involved=O(n + logp)</span><br><span class="line">    &#123;</span><br><span class="line">        if (n &lt; r)</span><br><span class="line">            return 0;</span><br><span class="line">        if (r == 0)</span><br><span class="line">            return 1;</span><br><span class="line">        //fest calculation of the three fact values in one go</span><br><span class="line">        unsigned long long fac[n + 1];</span><br><span class="line">        fac[0] = 1;</span><br><span class="line">        for (int i = 1; i &lt;= n; i++)</span><br><span class="line">            fac[i] = (fac[i - 1] * i) % p;</span><br><span class="line">        return (((fac[n] * modInverse(fac[r], p)) % p)* (modInverse(fac[n - r], p) % p))% p;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">ll int getHighestSetBit(ll int n) &#123;</span><br><span class="line">    if (n == 0) return -1;</span><br><span class="line">    int position = 0;</span><br><span class="line">    </span><br><span class="line">    while (n &gt; 1) &#123; // Continue until n reduces to 1</span><br><span class="line">        n &gt;&gt;= 1;    // Right shift the number by 1</span><br><span class="line">        position++; // Increment the position counter</span><br><span class="line">    &#125;</span><br><span class="line">    return position; // Return the position of the highest set bit</span><br><span class="line">&#125;</span><br><span class="line">    bool isPrime(ll int n) </span><br><span class="line">    &#123; </span><br><span class="line">        // Corner cases </span><br><span class="line">        if (n &lt;= 1) </span><br><span class="line">            return false; </span><br><span class="line">        if (n &lt;= 3) </span><br><span class="line">            return true; </span><br><span class="line">      </span><br><span class="line">        // This is checked so that we can skip </span><br><span class="line">        // middle five numbers in below loop </span><br><span class="line">        if (n % 2 == 0 || n % 3 == 0) </span><br><span class="line">            return false; </span><br><span class="line">      </span><br><span class="line">        for (int i = 5; i * i &lt;= n; i = i + 6) </span><br><span class="line">            if (n % i == 0 || n % (i + 2) == 0) </span><br><span class="line">                return false; </span><br><span class="line">      </span><br><span class="line">        return true; </span><br><span class="line">    &#125; </span><br><span class="line">    vector&lt;ll int&gt; Sieve_to_store_primes(ll int n)</span><br><span class="line">    &#123;</span><br><span class="line">        bool prime[n + 1];memset(prime,1, sizeof(prime));</span><br><span class="line">        for (ll int p = 2; p&lt;= n; p++) &#123;</span><br><span class="line">            if (prime[p] ==1) &#123;</span><br><span class="line">                for (ll int i=p*2; i &lt;= n; i += p)</span><br><span class="line">                    prime[i] =0;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        vector&lt;ll int&gt;v;</span><br><span class="line">        for (int p = 2; p &lt;= n; p++)&#123;</span><br><span class="line">            if (prime[p])&#123; </span><br><span class="line">                v.push_back(p);</span><br><span class="line">              &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return v;</span><br><span class="line">    &#125;</span><br><span class="line">    vector&lt;ll int&gt; Sieve_highest_lowest_primes(ll int n)</span><br><span class="line">    &#123;</span><br><span class="line">        bool prime[n + 1];memset(prime,1, sizeof(prime));</span><br><span class="line">        vector&lt;ll int&gt;hp(n+1);</span><br><span class="line">        vector&lt;ll int&gt;lp(n+1,0);</span><br><span class="line">        for (ll int p = 2; p &lt;= n; p++) &#123;</span><br><span class="line">            if (prime[p] ==1) &#123;</span><br><span class="line">                lp[p]=hp[p]=p;//if the number is a prime number then the lowest and the highest prime both are p</span><br><span class="line">                for (ll int i = p * 2; i &lt;= n; i += p)&#123;</span><br><span class="line">                    prime[i] = false;</span><br><span class="line">                    hp[i]=p;</span><br><span class="line">                    if(lp[i]==0)&#123;</span><br><span class="line">                        lp[i]=p;</span><br><span class="line">                    &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      return lp;//return hp;</span><br><span class="line">      //NOTE THAT THE HIGHEST PRIME AND THE LOWEST PRIME OF 0 AND 1 ARE MARKED AS 0</span><br><span class="line">    &#125;</span><br><span class="line">    vector&lt;vector&lt;ll int&gt;&gt; Sieve_all_divisors(ll int n)&#123;</span><br><span class="line">        vector&lt;vector&lt;ll int&gt;&gt;v(n+1);</span><br><span class="line">        for(ll int i=1;i&lt;=n;i++)&#123;</span><br><span class="line">            for(ll int j=i;j&lt;=n;j+=i)&#123;</span><br><span class="line">                v[j].push_back(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return v;</span><br><span class="line">    &#125;</span><br><span class="line">    vector&lt;vector&lt;ll int&gt;&gt; Sieve_all_prime_factors(ll int n)&#123;</span><br><span class="line">        vector&lt;ll int&gt;lp=Sieve_highest_lowest_primes(n);</span><br><span class="line">        vector&lt;vector&lt;ll int&gt;&gt;ans(n+1);//note that the prime factors of 0 and 1 are none</span><br><span class="line">        for(ll int i=2;i&lt;=n;i++)&#123;</span><br><span class="line">            ll int temp=i;</span><br><span class="line">            while(temp&gt;1)&#123;</span><br><span class="line">                ll int div=lp[temp];</span><br><span class="line">                ans[i].push_back(div);</span><br><span class="line">                while(temp%div==0)&#123;</span><br><span class="line">                    temp/=div;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return ans;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ll int query_interactive(ll int x,ll int y)&#123;    </span><br><span class="line">        cout&lt;&lt;&quot;?&quot;&lt;&lt;&quot; &quot;&lt;&lt;x&lt;&lt;&quot; &quot;&lt;&lt;y&lt;&lt;endl;</span><br><span class="line">        ll int ans;</span><br><span class="line">        cin&gt;&gt;ans;</span><br><span class="line">        return ans;</span><br><span class="line">    &#125;</span><br><span class="line">    void print_interactive(ll int x,ll int y)&#123;</span><br><span class="line">        cout&lt;&lt;&quot;!&quot;&lt;&lt;&quot; &quot;&lt;&lt;x&lt;&lt;&quot; &quot;&lt;&lt;y&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    //__builtin_popcount(n) to count the number of set bits in a number//we can check if a number is a power of 2 using __builtin_popcount()</span><br><span class="line">    //__builtin_clz will count the number of leading zeroes</span><br><span class="line">    //reverse(v.begin(),v.end())//modifies the vector inplace</span><br><span class="line">    //sort(v.rbegin(), v.rend());//to sort a vector in reverse order</span><br><span class="line">    //sort(arr, arr + n, greater&lt;ll int&gt;());//sort an array in reverse order </span><br><span class="line">    //fib(n)*fib(n+1)=sum of square of all fibs before n</span><br><span class="line">    //there are approx n^1/3 divisors of a number </span><br><span class="line">    //there are approx loglogn number of distinct prime factors of a number</span><br><span class="line">    //there are approx n/logn different primes before a number n</span><br><span class="line">    //gcd knowledge:::</span><br><span class="line">    //gcd(a1,a2,a3,a4,a5..an)=gcd(a1,|a1-a2|,|a1-a3|,|a1-a4|,|a1-a5|....,|a1-an|)</span><br><span class="line">    //gcd(a,b)=gcd(a,b%a)    </span><br><span class="line"></span><br><span class="line">    //REMEMBER</span><br><span class="line">    //all primes till a number A : A*loglog(A)</span><br><span class="line">    //all highest primes till a number A: A*loglog(A)//all lowest primes till a number A: A*loglog(A)</span><br><span class="line">    //all the divisors of all numbers till a max number A: A*log(A)</span><br><span class="line">    //all the prime factors of N queries with max number A: A*loglog(A) + N*log(A)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    int main()&#123;</span><br><span class="line">        ios_base::sync_with_stdio(false);</span><br><span class="line">        cin.tie(NULL);ll int t;t=1;</span><br><span class="line">        ll int p=998244353;</span><br><span class="line">        for(int o=0;o&lt;t;o++)&#123;</span><br><span class="line">            ll int n;cin&gt;&gt;n;</span><br><span class="line">            ll int a[n+1]=&#123;0&#125;;</span><br><span class="line">            for(int i=1;i&lt;=n;i++)&#123;</span><br><span class="line">                cin&gt;&gt;a[i];</span><br><span class="line">            &#125;</span><br><span class="line">            vector&lt;vector&lt;ll int&gt;&gt;dist=Sieve_all_prime_factors(*max_element(a+1,a+n+1));</span><br><span class="line">            for(int i=1;i&lt;=n;i++)&#123;</span><br><span class="line">                vector&lt;ll int&gt;v=dist[a[i]];</span><br><span class="line">                ll int mul=1;</span><br><span class="line">                for(auto e:v)&#123;</span><br><span class="line">                    mul*=e;</span><br><span class="line">                &#125;</span><br><span class="line">                a[i]=mul;</span><br><span class="line">            &#125;</span><br><span class="line">            vector&lt;vector&lt;ll int&gt;&gt;divisors=Sieve_all_divisors(*max_element(a+1,a+n+1));</span><br><span class="line">/*            //testing</span><br><span class="line">            for(int i=1;i&lt;=n;i++)&#123;</span><br><span class="line">                cout&lt;&lt;a[i]&lt;&lt;&quot; &quot;;</span><br><span class="line">            &#125;</span><br><span class="line">            cout&lt;&lt;endl;</span><br><span class="line">            for (auto e:dist)&#123;</span><br><span class="line">                for(auto e2:e)&#123;</span><br><span class="line">                    cout&lt;&lt;e2&lt;&lt;&quot; &quot;;</span><br><span class="line">                &#125;</span><br><span class="line">                cout&lt;&lt;endl;</span><br><span class="line">            &#125;</span><br><span class="line">            cout&lt;&lt;endl;cout&lt;&lt;endl;</span><br><span class="line">            for (auto e:divisors)&#123;</span><br><span class="line">                for(auto e2:e)&#123;</span><br><span class="line">                    cout&lt;&lt;e2&lt;&lt;&quot; &quot;;</span><br><span class="line">                &#125;</span><br><span class="line">                cout&lt;&lt;endl;</span><br><span class="line">            &#125;</span><br><span class="line">            cout&lt;&lt;&quot;TESTING 1 OVER&quot;&lt;&lt;endl;</span><br><span class="line">            //testing over*/</span><br><span class="line">            ll int temp[(*max_element(a+1,a+n+1))+1];memset(temp,0,sizeof(temp));</span><br><span class="line">            ll int dp[n+1]=&#123;0&#125;;</span><br><span class="line">            for(int i=1;i&lt;=n;i++)&#123;</span><br><span class="line">                //cout&lt;&lt;&quot;i:&quot;&lt;&lt;i&lt;&lt;endl;</span><br><span class="line">                ll int cnt=dist[a[i]].size();</span><br><span class="line">                //cout&lt;&lt;&quot;cnt:&quot;&lt;&lt;cnt&lt;&lt;endl;</span><br><span class="line">                ll int sum=0;</span><br><span class="line">                ll int mx=((1&lt;&lt;cnt)-1);</span><br><span class="line">                //cout&lt;&lt;&quot;mx:&quot;&lt;&lt;mx&lt;&lt;endl;</span><br><span class="line">                for(ll int j=1;j&lt;=mx;j++)&#123;</span><br><span class="line">                    ll int t=j;</span><br><span class="line">                    ll int pos=0;</span><br><span class="line">                    ll int x=1;ll int set=0;</span><br><span class="line">                    while(t&gt;0)&#123;</span><br><span class="line">                        if(t%2==1)&#123;</span><br><span class="line">                            x*=dist[a[i]][pos];set++;</span><br><span class="line">                        &#125;</span><br><span class="line">                        t/=2;</span><br><span class="line">                        pos++;</span><br><span class="line">/*                        cout&lt;&lt;&quot;pos:&quot;&lt;&lt;pos&lt;&lt;endl;</span><br><span class="line">                        cout&lt;&lt;&quot;t:&quot;&lt;&lt;t&lt;&lt;endl;</span><br><span class="line">                        cout&lt;&lt;&quot;x:&quot;&lt;&lt;x&lt;&lt;endl;*/</span><br><span class="line">                    &#125;</span><br><span class="line">                    ll int sign=1;if(set%2==0)sign=(ll int)(-1);</span><br><span class="line">                    sum+=temp[x]*sign;sum%=p;</span><br><span class="line">                &#125;</span><br><span class="line">                //cout&lt;&lt;&quot;sum:&quot;&lt;&lt;sum&lt;&lt;endl;</span><br><span class="line">                if(i==1)sum=1;</span><br><span class="line">                dp[i]=sum%p;</span><br><span class="line">                for(int j=0;j&lt;divisors[a[i]].size();j++)&#123;</span><br><span class="line">                    temp[divisors[a[i]][j]]+=sum;temp[divisors[a[i]][j]]%=p;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            cout&lt;&lt;((dp[n]%p)+p)%p&lt;&lt;endl;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        return 0;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>              </div>            </details><p>这份代码模板完全不想看究竟定义了什么，重载了什么，而且代码之间没有空格，显得十分紧凑，阅读观感也极差。因此，一份良好的代码起手模板只有两种：</p><ul><li>最基本的能保证运行的短代码模板</li><li>能够有着良好分区的长代码模板</li></ul><h3 id="算法模版"><a href="#算法模版" class="headerlink" title="算法模版"></a>算法模版</h3><p>良好的算法模板必须由lambda/namespace/struct/template/代码片段封装，以此保证代码的可移植性，可读性。算法模板一定不能是一段针对于该算法的模板题目可以运行的代码程序。</p><ol><li>lambda</li></ol><details class="folding-tag" ><summary> 查看代码 </summary>              <div class='content'>              <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">djikstra(); djikstra(s); 不写默认s=1</span><br><span class="line"></span><br><span class="line">vector&lt;int&gt; dis(n + 1, 1E18);</span><br><span class="line">auto djikstra = [&amp;](int s = 1) -&gt; void &#123;</span><br><span class="line">    using PII = pair&lt;int, int&gt;;</span><br><span class="line">    priority_queue&lt;PII, vector&lt;PII&gt;, greater&lt;PII&gt;&gt; q;</span><br><span class="line">    q.emplace(0, s);</span><br><span class="line">    dis[s] = 0;</span><br><span class="line">    vector&lt;int&gt; vis(n + 1);</span><br><span class="line">    while (!q.empty()) &#123;</span><br><span class="line">        int x = q.top().second;</span><br><span class="line">        q.pop();</span><br><span class="line">        if (vis[x]) continue;</span><br><span class="line">        vis[x] = 1;</span><br><span class="line">        for (auto [y, w] : ver[x]) &#123;</span><br><span class="line">            if (dis[y] &gt; dis[x] + w) &#123;</span><br><span class="line">                dis[y] = dis[x] + w;</span><br><span class="line">                q.emplace(dis[y], y);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>              </div>            </details><ol><li>namespace</li></ol><details class="folding-tag" ><summary> 查看代码 </summary>              <div class='content'>              <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line">eg:</span><br><span class="line">Geometry::Point&lt;int&gt; a, b;</span><br><span class="line">cin &gt;&gt; a &gt;&gt; b;</span><br><span class="line">cout &lt;&lt; a + b &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">namespace Geometry &#123; // 平面几何基础</span><br><span class="line">    using ld = long double;</span><br><span class="line">    const ld PI = acos(-1);</span><br><span class="line">    const ld EPS = 1e-7;</span><br><span class="line">    const ld INF = numeric_limits&lt;ld&gt;::max();</span><br><span class="line">    #define cc(x) cout &lt;&lt; fixed &lt;&lt; setprecision(x);</span><br><span class="line"></span><br><span class="line">    ld fgcd(ld x, ld y) &#123; // 实数域gcd</span><br><span class="line">        return abs(y) &lt; EPS ? abs(x) : fgcd(y, fmod(x, y));</span><br><span class="line">    &#125;</span><br><span class="line">    template&lt;class T, class S&gt; bool equal(T x, S y) &#123;</span><br><span class="line">        return -EPS &lt; x - y &amp;&amp; x - y &lt; EPS;</span><br><span class="line">    &#125;</span><br><span class="line">    template&lt;class T&gt; int sign(T x) &#123;</span><br><span class="line">        if (-EPS &lt; x &amp;&amp; x &lt; EPS) return 0;</span><br><span class="line">        return x &lt; 0 ? -1 : 1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    template&lt;class T&gt; struct Point &#123; // 在C++17下使用 emplace_back 绑定可能会导致CE！</span><br><span class="line">        T x, y;</span><br><span class="line">        Point(T x_ = 0, T y_ = 0) : x(x_), y(y_) &#123;&#125; // 初始化</span><br><span class="line">        template&lt;class U&gt; operator Point&lt;U&gt;() &#123; // 自动类型匹配</span><br><span class="line">            return Point&lt;U&gt;(U(x), U(y));</span><br><span class="line">        &#125;</span><br><span class="line">        Point &amp;operator+=(Point p) &amp; &#123; return x += p.x, y += p.y, *this; &#125;</span><br><span class="line">        Point &amp;operator+=(T t) &amp; &#123; return x += t, y += t, *this; &#125;</span><br><span class="line">        Point &amp;operator-=(Point p) &amp; &#123; return x -= p.x, y -= p.y, *this; &#125;</span><br><span class="line">        Point &amp;operator-=(T t) &amp; &#123; return x -= t, y -= t, *this; &#125;</span><br><span class="line">        Point &amp;operator*=(T t) &amp; &#123; return x *= t, y *= t, *this; &#125;</span><br><span class="line">        Point &amp;operator/=(T t) &amp; &#123; return x /= t, y /= t, *this; &#125;</span><br><span class="line">        Point operator-() const &#123; return Point(-x, -y); &#125;</span><br><span class="line">        friend Point operator+(Point a, Point b) &#123; return a += b; &#125;</span><br><span class="line">        friend Point operator+(Point a, T b) &#123; return a += b; &#125;</span><br><span class="line">        friend Point operator-(Point a, Point b) &#123; return a -= b; &#125;</span><br><span class="line">        friend Point operator-(Point a, T b) &#123; return a -= b; &#125;</span><br><span class="line">        friend Point operator*(Point a, T b) &#123; return a *= b; &#125;</span><br><span class="line">        friend Point operator*(T a, Point b) &#123; return b *= a; &#125;</span><br><span class="line">        friend Point operator/(Point a, T b) &#123; return a /= b; &#125;</span><br><span class="line">        friend bool operator&lt;(Point a, Point b) &#123;</span><br><span class="line">            return equal(a.x, b.x) ? a.y &lt; b.y - EPS : a.x &lt; b.x - EPS;</span><br><span class="line">        &#125;</span><br><span class="line">        friend bool operator&gt;(Point a, Point b) &#123; return b &lt; a; &#125;</span><br><span class="line">        friend bool operator==(Point a, Point b) &#123; return !(a &lt; b) &amp;&amp; !(b &lt; a); &#125;</span><br><span class="line">        friend bool operator!=(Point a, Point b) &#123; return a &lt; b || b &lt; a; &#125;</span><br><span class="line">        friend auto &amp;operator&gt;&gt;(istream &amp;is, Point &amp;p) &#123;</span><br><span class="line">            return is &gt;&gt; p.x &gt;&gt; p.y;</span><br><span class="line">        &#125;</span><br><span class="line">        friend auto &amp;operator&lt;&lt;(ostream &amp;os, Point p) &#123;</span><br><span class="line">            return os &lt;&lt; &quot;(&quot; &lt;&lt; p.x &lt;&lt; &quot;, &quot; &lt;&lt; p.y &lt;&lt; &quot;)&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    template&lt;class T&gt; struct Line &#123;</span><br><span class="line">        Point&lt;T&gt; a, b;</span><br><span class="line">        Line(Point&lt;T&gt; a_ = Point&lt;T&gt;(), Point&lt;T&gt; b_ = Point&lt;T&gt;()) : a(a_), b(b_) &#123;&#125;</span><br><span class="line">        template&lt;class U&gt; operator Line&lt;U&gt;() &#123; // 自动类型匹配</span><br><span class="line">            return Line&lt;U&gt;(Point&lt;U&gt;(a), Point&lt;U&gt;(b));</span><br><span class="line">        &#125;</span><br><span class="line">        friend auto &amp;operator&lt;&lt;(ostream &amp;os, Line l) &#123;</span><br><span class="line">            return os &lt;&lt; &quot;&lt;&quot; &lt;&lt; l.a &lt;&lt; &quot;, &quot; &lt;&lt; l.b &lt;&lt; &quot;&gt;&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    template&lt;class T&gt; T cross(Point&lt;T&gt; a, Point&lt;T&gt; b) &#123; // 叉乘</span><br><span class="line">        return a.x * b.y - a.y * b.x;</span><br><span class="line">    &#125;</span><br><span class="line">    template&lt;class T&gt;</span><br><span class="line">    T cross(Point&lt;T&gt; p1, Point&lt;T&gt; p2, Point&lt;T&gt; p0) &#123; // 叉乘 (p1 - p0) x (p2 - p0);</span><br><span class="line">        return cross(p1 - p0, p2 - p0);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    template&lt;class T&gt; T dot(Point&lt;T&gt; a, Point&lt;T&gt; b) &#123; // 点乘</span><br><span class="line">        return a.x * b.x + a.y * b.y;</span><br><span class="line">    &#125;</span><br><span class="line">    template&lt;class T&gt; T dot(Point&lt;T&gt; p1, Point&lt;T&gt; p2, Point&lt;T&gt; p0) &#123; // 点乘 (p1 - p0) * (p2 - p0);</span><br><span class="line">        return dot(p1 - p0, p2 - p0);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    template&lt;class T&gt; ld dis(T x1, T y1, T x2, T y2) &#123;</span><br><span class="line">        ld val = (x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2);</span><br><span class="line">        return sqrt(val);</span><br><span class="line">    &#125;</span><br><span class="line">    template&lt;class T&gt; ld dis(Point&lt;T&gt; a, Point&lt;T&gt; b) &#123;</span><br><span class="line">        return dis(a.x, a.y, b.x, b.y);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    template&lt;class T&gt; T dis1(Point&lt;T&gt; p1, Point&lt;T&gt; p2) &#123; // 曼哈顿距离公式</span><br><span class="line">        return abs(p1.x - p2.x) + abs(p1.y - p2.y);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Point&lt;ld&gt; standardize(Point&lt;ld&gt; vec) &#123; // 转换为单位向量</span><br><span class="line">        return vec / sqrt(vec.x * vec.x + vec.y * vec.y);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    template&lt;class T&gt; Point&lt;T&gt; rotate(Point&lt;T&gt; p1, Point&lt;T&gt; p2) &#123; // 旋转</span><br><span class="line">        Point&lt;T&gt; vec = p1 - p2;</span><br><span class="line">        return &#123;-vec.y, vec.x&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; // namespace Geometry</span><br></pre></td></tr></table></figure>              </div>            </details><ol><li>struct</li></ol><details class="folding-tag" ><summary> 查看代码 </summary>              <div class='content'>              <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br></pre></td><td class="code"><pre><span class="line">const int base = 1000000000;</span><br><span class="line">const int base_digits = 9; // 分解为九个数位一个数字</span><br><span class="line">struct bigint &#123;</span><br><span class="line">    vector&lt;int&gt; a;</span><br><span class="line">    int sign;</span><br><span class="line"></span><br><span class="line">    bigint() : sign(1) &#123;&#125;</span><br><span class="line">    bigint operator-() const &#123;</span><br><span class="line">        bigint res = *this;</span><br><span class="line">        res.sign = -sign;</span><br><span class="line">        return res;</span><br><span class="line">    &#125;</span><br><span class="line">    bigint(long long v) &#123;</span><br><span class="line">        *this = v;</span><br><span class="line">    &#125;</span><br><span class="line">    bigint(const string &amp;s) &#123;</span><br><span class="line">        read(s);</span><br><span class="line">    &#125;</span><br><span class="line">    void operator=(const bigint &amp;v) &#123;</span><br><span class="line">        sign = v.sign;</span><br><span class="line">        a = v.a;</span><br><span class="line">    &#125;</span><br><span class="line">    void operator=(long long v) &#123;</span><br><span class="line">        a.clear();</span><br><span class="line">        sign = 1;</span><br><span class="line">        if (v &lt; 0) sign = -1, v = -v;</span><br><span class="line">        for (; v &gt; 0; v = v / base) &#123;</span><br><span class="line">            a.push_back(v % base);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 基础加减乘除</span><br><span class="line">    bigint operator+(const bigint &amp;v) const &#123;</span><br><span class="line">        if (sign == v.sign) &#123;</span><br><span class="line">            bigint res = v;</span><br><span class="line">            for (int i = 0, carry = 0; i &lt; (int)max(a.size(), v.a.size()) || carry; ++i) &#123;</span><br><span class="line">                if (i == (int)res.a.size()) &#123;</span><br><span class="line">                    res.a.push_back(0);</span><br><span class="line">                &#125;</span><br><span class="line">                res.a[i] += carry + (i &lt; (int)a.size() ? a[i] : 0);</span><br><span class="line">                carry = res.a[i] &gt;= base;</span><br><span class="line">                if (carry) &#123;</span><br><span class="line">                    res.a[i] -= base;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            return res;</span><br><span class="line">        &#125;</span><br><span class="line">        return *this - (-v);</span><br><span class="line">    &#125;</span><br><span class="line">    bigint operator-(const bigint &amp;v) const &#123;</span><br><span class="line">        if (sign == v.sign) &#123;</span><br><span class="line">            if (abs() &gt;= v.abs()) &#123;</span><br><span class="line">                bigint res = *this;</span><br><span class="line">                for (int i = 0, carry = 0; i &lt; (int)v.a.size() || carry; ++i) &#123;</span><br><span class="line">                    res.a[i] -= carry + (i &lt; (int)v.a.size() ? v.a[i] : 0);</span><br><span class="line">                    carry = res.a[i] &lt; 0;</span><br><span class="line">                    if (carry) &#123;</span><br><span class="line">                        res.a[i] += base;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                res.trim();</span><br><span class="line">                return res;</span><br><span class="line">            &#125;</span><br><span class="line">            return -(v - *this);</span><br><span class="line">        &#125;</span><br><span class="line">        return *this + (-v);</span><br><span class="line">    &#125;</span><br><span class="line">    void operator*=(int v) &#123;</span><br><span class="line">        check(v);</span><br><span class="line">        for (int i = 0, carry = 0; i &lt; (int)a.size() || carry; ++i) &#123;</span><br><span class="line">            if (i == (int)a.size()) &#123;</span><br><span class="line">                a.push_back(0);</span><br><span class="line">            &#125;</span><br><span class="line">            long long cur = a[i] * (long long)v + carry;</span><br><span class="line">            carry = (int)(cur / base);</span><br><span class="line">            a[i] = (int)(cur % base);</span><br><span class="line">        &#125;</span><br><span class="line">        trim();</span><br><span class="line">    &#125;</span><br><span class="line">    void operator/=(int v) &#123;</span><br><span class="line">        check(v);</span><br><span class="line">        for (int i = (int)a.size() - 1, rem = 0; i &gt;= 0; --i) &#123;</span><br><span class="line">            long long cur = a[i] + rem * (long long)base;</span><br><span class="line">            a[i] = (int)(cur / v);</span><br><span class="line">            rem = (int)(cur % v);</span><br><span class="line">        &#125;</span><br><span class="line">        trim();</span><br><span class="line">    &#125;</span><br><span class="line">    int operator%(int v) const &#123;</span><br><span class="line">        if (v &lt; 0) &#123;</span><br><span class="line">            v = -v;</span><br><span class="line">        &#125;</span><br><span class="line">        int m = 0;</span><br><span class="line">        for (int i = a.size() - 1; i &gt;= 0; --i) &#123;</span><br><span class="line">            m = (a[i] + m * (long long)base) % v;</span><br><span class="line">        &#125;</span><br><span class="line">        return m * sign;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void operator+=(const bigint &amp;v) &#123;</span><br><span class="line">        *this = *this + v;</span><br><span class="line">    &#125;</span><br><span class="line">    void operator-=(const bigint &amp;v) &#123;</span><br><span class="line">        *this = *this - v;</span><br><span class="line">    &#125;</span><br><span class="line">    bigint operator*(int v) const &#123;</span><br><span class="line">        bigint res = *this;</span><br><span class="line">        res *= v;</span><br><span class="line">        return res;</span><br><span class="line">    &#125;</span><br><span class="line">    bigint operator/(int v) const &#123;</span><br><span class="line">        bigint res = *this;</span><br><span class="line">        res /= v;</span><br><span class="line">        return res;</span><br><span class="line">    &#125;</span><br><span class="line">    void operator%=(const int &amp;v) &#123;</span><br><span class="line">        *this = *this % v;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    bool operator&lt;(const bigint &amp;v) const &#123;</span><br><span class="line">        if (sign != v.sign) return sign &lt; v.sign;</span><br><span class="line">        if (a.size() != v.a.size()) return a.size() * sign &lt; v.a.size() * v.sign;</span><br><span class="line">        for (int i = a.size() - 1; i &gt;= 0; i--)</span><br><span class="line">            if (a[i] != v.a[i]) return a[i] * sign &lt; v.a[i] * sign;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">    bool operator&gt;(const bigint &amp;v) const &#123;</span><br><span class="line">        return v &lt; *this;</span><br><span class="line">    &#125;</span><br><span class="line">    bool operator&lt;=(const bigint &amp;v) const &#123;</span><br><span class="line">        return !(v &lt; *this);</span><br><span class="line">    &#125;</span><br><span class="line">    bool operator&gt;=(const bigint &amp;v) const &#123;</span><br><span class="line">        return !(*this &lt; v);</span><br><span class="line">    &#125;</span><br><span class="line">    bool operator==(const bigint &amp;v) const &#123;</span><br><span class="line">        return !(*this &lt; v) &amp;&amp; !(v &lt; *this);</span><br><span class="line">    &#125;</span><br><span class="line">    bool operator!=(const bigint &amp;v) const &#123;</span><br><span class="line">        return *this &lt; v || v &lt; *this;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    bigint abs() const &#123;</span><br><span class="line">        bigint res = *this;</span><br><span class="line">        res.sign *= res.sign;</span><br><span class="line">        return res;</span><br><span class="line">    &#125;</span><br><span class="line">    void check(int v) &#123; // 检查输入的是否为负数</span><br><span class="line">        if (v &lt; 0) &#123;</span><br><span class="line">            sign = -sign;</span><br><span class="line">            v = -v;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    void trim() &#123; // 去除前导零</span><br><span class="line">        while (!a.empty() &amp;&amp; !a.back()) a.pop_back();</span><br><span class="line">        if (a.empty()) sign = 1;</span><br><span class="line">    &#125;</span><br><span class="line">    bool isZero() const &#123; // 判断是否等于零</span><br><span class="line">        return a.empty() || (a.size() == 1 &amp;&amp; !a[0]);</span><br><span class="line">    &#125;</span><br><span class="line">    friend bigint gcd(const bigint &amp;a, const bigint &amp;b) &#123;</span><br><span class="line">        return b.isZero() ? a : gcd(b, a % b);</span><br><span class="line">    &#125;</span><br><span class="line">    friend bigint lcm(const bigint &amp;a, const bigint &amp;b) &#123;</span><br><span class="line">        return a / gcd(a, b) * b;</span><br><span class="line">    &#125;</span><br><span class="line">    void read(const string &amp;s) &#123;</span><br><span class="line">        sign = 1;</span><br><span class="line">        a.clear();</span><br><span class="line">        int pos = 0;</span><br><span class="line">        while (pos &lt; (int)s.size() &amp;&amp; (s[pos] == &#x27;-&#x27; || s[pos] == &#x27;+&#x27;)) &#123;</span><br><span class="line">            if (s[pos] == &#x27;-&#x27;) sign = -sign;</span><br><span class="line">            ++pos;</span><br><span class="line">        &#125;</span><br><span class="line">        for (int i = s.size() - 1; i &gt;= pos; i -= base_digits) &#123;</span><br><span class="line">            int x = 0;</span><br><span class="line">            for (int j = max(pos, i - base_digits + 1); j &lt;= i; j++) x = x * 10 + s[j] - &#x27;0&#x27;;</span><br><span class="line">            a.push_back(x);</span><br><span class="line">        &#125;</span><br><span class="line">        trim();</span><br><span class="line">    &#125;</span><br><span class="line">    friend istream &amp;operator&gt;&gt;(istream &amp;stream, bigint &amp;v) &#123;</span><br><span class="line">        string s;</span><br><span class="line">        stream &gt;&gt; s;</span><br><span class="line">        v.read(s);</span><br><span class="line">        return stream;</span><br><span class="line">    &#125;</span><br><span class="line">    friend ostream &amp;operator&lt;&lt;(ostream &amp;stream, const bigint &amp;v) &#123;</span><br><span class="line">        if (v.sign == -1) stream &lt;&lt; &#x27;-&#x27;;</span><br><span class="line">        stream &lt;&lt; (v.a.empty() ? 0 : v.a.back());</span><br><span class="line">        for (int i = (int)v.a.size() - 2; i &gt;= 0; --i)</span><br><span class="line">            stream &lt;&lt; setw(base_digits) &lt;&lt; setfill(&#x27;0&#x27;) &lt;&lt; v.a[i];</span><br><span class="line">        return stream;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /* 大整数乘除大整数部分 */</span><br><span class="line">    typedef vector&lt;long long&gt; vll;</span><br><span class="line">    bigint operator*(const bigint &amp;v) const &#123; // 大整数乘大整数</span><br><span class="line">        vector&lt;int&gt; a6 = convert_base(this-&gt;a, base_digits, 6);</span><br><span class="line">        vector&lt;int&gt; b6 = convert_base(v.a, base_digits, 6);</span><br><span class="line">        vll a(a6.begin(), a6.end());</span><br><span class="line">        vll b(b6.begin(), b6.end());</span><br><span class="line">        while (a.size() &lt; b.size()) a.push_back(0);</span><br><span class="line">        while (b.size() &lt; a.size()) b.push_back(0);</span><br><span class="line">        while (a.size() &amp; (a.size() - 1)) a.push_back(0), b.push_back(0);</span><br><span class="line">        vll c = karatsubaMultiply(a, b);</span><br><span class="line">        bigint res;</span><br><span class="line">        res.sign = sign * v.sign;</span><br><span class="line">        for (int i = 0, carry = 0; i &lt; (int)c.size(); i++) &#123;</span><br><span class="line">            long long cur = c[i] + carry;</span><br><span class="line">            res.a.push_back((int)(cur % 1000000));</span><br><span class="line">            carry = (int)(cur / 1000000);</span><br><span class="line">        &#125;</span><br><span class="line">        res.a = convert_base(res.a, 6, base_digits);</span><br><span class="line">        res.trim();</span><br><span class="line">        return res;</span><br><span class="line">    &#125;</span><br><span class="line">    friend pair&lt;bigint, bigint&gt; divmod(const bigint &amp;a1,</span><br><span class="line">                                       const bigint &amp;b1) &#123; // 大整数除大整数，同时返回答案与余数</span><br><span class="line">        int norm = base / (b1.a.back() + 1);</span><br><span class="line">        bigint a = a1.abs() * norm;</span><br><span class="line">        bigint b = b1.abs() * norm;</span><br><span class="line">        bigint q, r;</span><br><span class="line">        q.a.resize(a.a.size());</span><br><span class="line">        for (int i = a.a.size() - 1; i &gt;= 0; i--) &#123;</span><br><span class="line">            r *= base;</span><br><span class="line">            r += a.a[i];</span><br><span class="line">            int s1 = r.a.size() &lt;= b.a.size() ? 0 : r.a[b.a.size()];</span><br><span class="line">            int s2 = r.a.size() &lt;= b.a.size() - 1 ? 0 : r.a[b.a.size() - 1];</span><br><span class="line">            int d = ((long long)base * s1 + s2) / b.a.back();</span><br><span class="line">            r -= b * d;</span><br><span class="line">            while (r &lt; 0) r += b, --d;</span><br><span class="line">            q.a[i] = d;</span><br><span class="line">        &#125;</span><br><span class="line">        q.sign = a1.sign * b1.sign;</span><br><span class="line">        r.sign = a1.sign;</span><br><span class="line">        q.trim();</span><br><span class="line">        r.trim();</span><br><span class="line">        return make_pair(q, r / norm);</span><br><span class="line">    &#125;</span><br><span class="line">    static vector&lt;int&gt; convert_base(const vector&lt;int&gt; &amp;a, int old_digits, int new_digits) &#123;</span><br><span class="line">        vector&lt;long long&gt; p(max(old_digits, new_digits) + 1);</span><br><span class="line">        p[0] = 1;</span><br><span class="line">        for (int i = 1; i &lt; (int)p.size(); i++) p[i] = p[i - 1] * 10;</span><br><span class="line">        vector&lt;int&gt; res;</span><br><span class="line">        long long cur = 0;</span><br><span class="line">        int cur_digits = 0;</span><br><span class="line">        for (int i = 0; i &lt; (int)a.size(); i++) &#123;</span><br><span class="line">            cur += a[i] * p[cur_digits];</span><br><span class="line">            cur_digits += old_digits;</span><br><span class="line">            while (cur_digits &gt;= new_digits) &#123;</span><br><span class="line">                res.push_back((int)(cur % p[new_digits]));</span><br><span class="line">                cur /= p[new_digits];</span><br><span class="line">                cur_digits -= new_digits;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        res.push_back((int)cur);</span><br><span class="line">        while (!res.empty() &amp;&amp; !res.back()) res.pop_back();</span><br><span class="line">        return res;</span><br><span class="line">    &#125;</span><br><span class="line">    static vll karatsubaMultiply(const vll &amp;a, const vll &amp;b) &#123;</span><br><span class="line">        int n = a.size();</span><br><span class="line">        vll res(n + n);</span><br><span class="line">        if (n &lt;= 32) &#123;</span><br><span class="line">            for (int i = 0; i &lt; n; i++) &#123;</span><br><span class="line">                for (int j = 0; j &lt; n; j++) &#123;</span><br><span class="line">                    res[i + j] += a[i] * b[j];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            return res;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        int k = n &gt;&gt; 1;</span><br><span class="line">        vll a1(a.begin(), a.begin() + k);</span><br><span class="line">        vll a2(a.begin() + k, a.end());</span><br><span class="line">        vll b1(b.begin(), b.begin() + k);</span><br><span class="line">        vll b2(b.begin() + k, b.end());</span><br><span class="line"></span><br><span class="line">        vll a1b1 = karatsubaMultiply(a1, b1);</span><br><span class="line">        vll a2b2 = karatsubaMultiply(a2, b2);</span><br><span class="line"></span><br><span class="line">        for (int i = 0; i &lt; k; i++) a2[i] += a1[i];</span><br><span class="line">        for (int i = 0; i &lt; k; i++) b2[i] += b1[i];</span><br><span class="line"></span><br><span class="line">        vll r = karatsubaMultiply(a2, b2);</span><br><span class="line">        for (int i = 0; i &lt; (int)a1b1.size(); i++) r[i] -= a1b1[i];</span><br><span class="line">        for (int i = 0; i &lt; (int)a2b2.size(); i++) r[i] -= a2b2[i];</span><br><span class="line"></span><br><span class="line">        for (int i = 0; i &lt; (int)r.size(); i++) res[i + k] += r[i];</span><br><span class="line">        for (int i = 0; i &lt; (int)a1b1.size(); i++) res[i] += a1b1[i];</span><br><span class="line">        for (int i = 0; i &lt; (int)a2b2.size(); i++) res[i + n] += a2b2[i];</span><br><span class="line">        return res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void operator*=(const bigint &amp;v) &#123;</span><br><span class="line">        *this = *this * v;</span><br><span class="line">    &#125;</span><br><span class="line">    bigint operator/(const bigint &amp;v) const &#123;</span><br><span class="line">        return divmod(*this, v).first;</span><br><span class="line">    &#125;</span><br><span class="line">    void operator/=(const bigint &amp;v) &#123;</span><br><span class="line">        *this = *this / v;</span><br><span class="line">    &#125;</span><br><span class="line">    bigint operator%(const bigint &amp;v) const &#123;</span><br><span class="line">        return divmod(*this, v).second;</span><br><span class="line">    &#125;</span><br><span class="line">    void operator%=(const bigint &amp;v) &#123;</span><br><span class="line">        *this = *this % v;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>              </div>            </details><ol><li>template</li></ol><details class="folding-tag" ><summary> 查看代码 </summary>              <div class='content'>              <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">template&lt;class T&gt; struct Frac &#123;</span><br><span class="line">    T x, y;</span><br><span class="line">    Frac() : Frac(0, 1) &#123;&#125;</span><br><span class="line">    Frac(T x_) : Frac(x_, 1) &#123;&#125;</span><br><span class="line">    Frac(T x_, T y_) : x(x_), y(y_) &#123;</span><br><span class="line">        if (y &lt; 0) &#123;</span><br><span class="line">            y = -y;</span><br><span class="line">            x = -x;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    constexpr double val() const &#123;</span><br><span class="line">        return 1. * x / y;</span><br><span class="line">    &#125;</span><br><span class="line">    constexpr Frac norm() const &#123; // 调整符号、转化为最简形式</span><br><span class="line">        T p = gcd(x, y);</span><br><span class="line">        return &#123;x / p, y / p&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    friend constexpr auto &amp;operator&lt;&lt;(ostream &amp;o, const Frac &amp;j) &#123;</span><br><span class="line">        T p = gcd(j.x, j.y);</span><br><span class="line">        if (j.y == p) &#123;</span><br><span class="line">            return o &lt;&lt; j.x / p;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            return o &lt;&lt; j.x / p &lt;&lt; &quot;/&quot; &lt;&lt; j.y / p;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    constexpr Frac &amp;operator/=(const Frac &amp;i) &#123;</span><br><span class="line">        x *= i.y;</span><br><span class="line">        y *= i.x;</span><br><span class="line">        if (y &lt; 0) &#123;</span><br><span class="line">            x = -x;</span><br><span class="line">            y = -y;</span><br><span class="line">        &#125;</span><br><span class="line">        return *this;</span><br><span class="line">    &#125;</span><br><span class="line">    constexpr Frac &amp;operator+=(const Frac &amp;i) &#123;</span><br><span class="line">        x = x * i.y + y * i.x;</span><br><span class="line">        y *= i.y;</span><br><span class="line">        return *this;</span><br><span class="line">    &#125;</span><br><span class="line">    constexpr Frac &amp;operator-=(const Frac &amp;i) &#123;</span><br><span class="line">        x = x * i.y - y * i.x;</span><br><span class="line">        y *= i.y;</span><br><span class="line">        return *this;</span><br><span class="line">    &#125;</span><br><span class="line">    constexpr Frac &amp;operator*=(const Frac &amp;i) &#123;</span><br><span class="line">        x *= i.x;</span><br><span class="line">        y *= i.y;</span><br><span class="line">        return *this;</span><br><span class="line">    &#125;</span><br><span class="line">    friend constexpr Frac operator+(const Frac i, const Frac j) &#123; return i += j; &#125;</span><br><span class="line">    friend constexpr Frac operator-(const Frac i, const Frac j) &#123; return i -= j; &#125;</span><br><span class="line">    friend constexpr Frac operator*(const Frac i, const Frac j) &#123; return i *= j; &#125;</span><br><span class="line">    friend constexpr Frac operator/(const Frac i, const Frac j) &#123; return i /= j; &#125;</span><br><span class="line">    friend constexpr Frac operator-(const Frac i) &#123; return Frac(-i.x, i.y); &#125;</span><br><span class="line">    friend constexpr bool operator&lt;(const Frac i, const Frac j) &#123; return i.x * j.y &lt; i.y * j.x; &#125;</span><br><span class="line">    friend constexpr bool operator&gt;(const Frac i, const Frac j) &#123; return i.x * j.y &gt; i.y * j.x; &#125;</span><br><span class="line">    friend constexpr bool operator==(const Frac i, const Frac j) &#123; return i.x * j.y == i.y * j.x; &#125;</span><br><span class="line">    friend constexpr bool operator!=(const Frac i, const Frac j) &#123; return i.x * j.y != i.y * j.x; &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>              </div>            </details><ol><li>代码片段</li></ol><details class="folding-tag" ><summary> 查看代码 </summary>              <div class='content'>              <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">int mul(int a, int b, int m) &#123;</span><br><span class="line">    int r = a * b - m * (int)(1.L / m * a * b);</span><br><span class="line">    return r - m * (r &gt;= m) + m * (r &lt; 0);</span><br><span class="line">&#125;</span><br><span class="line">int mypow(int a, int b, int m) &#123;</span><br><span class="line">    int res = 1 % m;</span><br><span class="line">    for (; b; b &gt;&gt;= 1, a = mul(a, a, m)) &#123;</span><br><span class="line">        if (b &amp; 1) &#123;</span><br><span class="line">            res = mul(res, a, m);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int B[] = &#123;2, 3, 5, 7, 11, 13, 17, 19, 23&#125;;</span><br><span class="line">bool MR(int n) &#123;</span><br><span class="line">    if (n &lt;= 1) return 0;</span><br><span class="line">    for (int p : B) &#123;</span><br><span class="line">        if (n == p) return 1;</span><br><span class="line">        if (n % p == 0) return 0;</span><br><span class="line">    &#125;</span><br><span class="line">    int m = (n - 1) &gt;&gt; __builtin_ctz(n - 1);</span><br><span class="line">    for (int p : B) &#123;</span><br><span class="line">        int t = m, a = mypow(p, m, n);</span><br><span class="line">        while (t != n - 1 &amp;&amp; a != 1 &amp;&amp; a != n - 1) &#123;</span><br><span class="line">            a = mul(a, a, n);</span><br><span class="line">            t *= 2;</span><br><span class="line">        &#125;</span><br><span class="line">        if (a != n - 1 &amp;&amp; t % 2 == 0) return 0;</span><br><span class="line">    &#125;</span><br><span class="line">    return 1;</span><br><span class="line">&#125;</span><br><span class="line">int PR(int n) &#123;</span><br><span class="line">    for (int p : B) &#123;</span><br><span class="line">        if (n % p == 0) return p;</span><br><span class="line">    &#125;</span><br><span class="line">    auto f = [&amp;](int x) -&gt; int &#123;</span><br><span class="line">        x = mul(x, x, n) + 1;</span><br><span class="line">        return x &gt;= n ? x - n : x;</span><br><span class="line">    &#125;;</span><br><span class="line">    int x = 0, y = 0, tot = 0, p = 1, q, g;</span><br><span class="line">    for (int i = 0; (i &amp; 255) || (g = gcd(p, n)) == 1; i++, x = f(x), y = f(f(y))) &#123;</span><br><span class="line">        if (x == y) &#123;</span><br><span class="line">            x = tot++;</span><br><span class="line">            y = f(x);</span><br><span class="line">        &#125;</span><br><span class="line">        q = mul(p, abs(x - y), n);</span><br><span class="line">        if (q) p = q;</span><br><span class="line">    &#125;</span><br><span class="line">    return g;</span><br><span class="line">&#125;</span><br><span class="line">vector&lt;int&gt; fac(int n) &#123;</span><br><span class="line">    #define pb emplace_back</span><br><span class="line">    if (n == 1) return &#123;&#125;;</span><br><span class="line">    if (MR(n)) return &#123;n&#125;;</span><br><span class="line">    int d = PR(n);</span><br><span class="line">    auto v1 = fac(d), v2 = fac(n / d);</span><br><span class="line">    auto i1 = v1.begin(), i2 = v2.begin();</span><br><span class="line">    vector&lt;int&gt; ans;</span><br><span class="line">    while (i1 != v1.end() || i2 != v2.end()) &#123;</span><br><span class="line">        if (i1 == v1.end()) &#123;</span><br><span class="line">            ans.pb(*i2++);</span><br><span class="line">        &#125; else if (i2 == v2.end()) &#123;</span><br><span class="line">            ans.pb(*i1++);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            if (*i1 &lt; *i2) &#123;</span><br><span class="line">                ans.pb(*i1++);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                ans.pb(*i2++);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><p>上述五份代码，如果有良好的C++代码阅读基础，很容易看得懂，可移植性也非常高，分别为迪杰斯特拉，平面几何，高精度运算，分数四则运算，素数检测。</p><p>每一份代码都保证了该种算法的大体最优时间复杂度，而不是未经优化的基础算法模版。</p><p>综上，一份良好的算法模版应具有如下几点要求：</p><ul><li>用lambda/namespace/struct/template/代码片段封装，大体为struct&gt;template&gt;namespace&gt;lambda&gt;代码片段封装，实际也需要根据算法的类型，长度，难易程度等来相应调整使用的方法。</li><li>具有优化后的大体最优时间复杂度</li><li>绝大多数情况是一段不可运行的代码，是算法模板，而不是可运行代码</li><li>保证可移植性，可读性等，例如Segt的模板不能只解决某一个特定区间问题，应该同时解决区间修改，区间询问等多种相关问题</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> XCPC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>个人训练赛20241211</title>
      <link href="/posts/ae028ed9.html"/>
      <url>/posts/ae028ed9.html</url>
      
        <content type="html"><![CDATA[<h1 id="个人训练赛20241211"><a href="#个人训练赛20241211" class="headerlink" title="个人训练赛20241211"></a>个人训练赛20241211</h1><ul><li><a href="#c-diamond-miner">C. Diamond Miner</a></li><li><a href="#c-mp3">C. MP3</a></li><li><a href="#d-nezzar-and-board">D. Nezzar and Board</a></li><li><a href="#e-hiking">E. Hiking</a></li></ul><hr><h3 id="E-Hiking"><a href="#E-Hiking" class="headerlink" title="E. Hiking"></a><a href="https://codeforces.com/contest/489/problem/E">E. Hiking</a></h3><p>Date：Aug.31, 2019 | Rating：2522 | Number of accepted:66(1.53%) | Number of attempts:185(4.30%) | Total:4303</p><p>Tag：二分 动态规划 数论和线性代数</p><p>可以涉及的算法：二分 DP 01分数规划</p><p>读完题意就可以转化为尽量减少$ \frac{\sum \sqrt{\left| l - r\right |}}{\sum b} $</p><p>下面介绍一下01分数规划问题：给定两个都包含$n$个正整数的正数数列{$a<em>1,a_2,a_3,…,a_n$}和{$b_1,b_2,b_3,…,b_n$}，同时选出k个a和b，求max$\frac{\sum</em>{i=1}^{n}a<em>i s_i }{\sum</em>{i=1}^{n}b<em>i s_i }$，其中$s_i=1$或$s_i=0$表示选或不选第$i$个数，且$\sum</em>{i=1}^{n} s_i=k$。</p><p>为了加快速度，我们可以用“猜”的方法，猜一个数$x$，使</p><ul><li>$\frac{\sum<em>{i=1}^{n}a_i s_i }{\sum</em>{i=1}^{n}b_i s_i } \ge x$</li></ul><p>移项得$f = \sum_{i=1}^{n}(a_i - x b_i)\ge k$</p><p>01分数规划有两种解决办法：二分法，Dinkelbach算法。</p><p>下面利用二分来找到零点：</p><p>我们需要最小化一个分式。经典的方法是将分式的最小化问题转化为参数$\lambda$的函数，然后通过二分法寻找最优的$\lambda$。</p><p>将原问题转化：</p><p>具体来说我们的目标是最小化：</p><p>$ \frac{\text{总挫败感}}{\text{所用休息点的风景值总和}} = \frac{\sum \sqrt{|l - r_j|}}{\sum b_j} $</p><ol><li>设目标函数为：</li></ol><p>$ \lambda = \frac{\sum \sqrt{|l - r_j|}}{\sum b_j} $</p><ol><li>为了最小化这个分式，我们可以令：</li></ol><p>$ \sum \sqrt{|l - r_j|} - \lambda \sum b_j = 0 $</p><ol><li>我们可以看成是对于给定的$\lambda$，判断是否存在一条路径，使得：</li></ol><p>$ \sum \sqrt{|l - r_j|} \leq \lambda \sum b_j $</p><ol><li>如果存在这样的路径，我们就尝试更小的$\lambda$；如果不存在，则尝试更大的$\lambda$。</li></ol><p>使用二分法寻找最优的$\lambda$：</p><ol><li>由于$\lambda$是连续的，我们可以在一个范围内对$\lambda$进行二分搜索，直到找到最小的$\lambda$。</li></ol><p>我们可以将休息点看成图中的节点，两个休息点之间的边权为：</p><p>$\text{边权} = \sqrt{|l - (x_i - x_j)|} - \lambda b_i$</p><p>其中，$ x_i $ 是休息点的坐标，$ b_i $是休息点的风景值。</p><p>我们需要找到从起点到终点的最小代价路径，使得总代价$\leq 0$。如果存在这样的路径，那么对于当前的 $\lambda$，答案就是可行的。</p><p>一些注意点：</p><p>实际上思路正确的话，除了二分应该不太会有导致WA的点</p><ul><li>二分的判断调节不是hi == lo，因为hi和lo是double，所以要设定一个极小值来进行比较，不然直接比较是有误差的<br>  不妨可以试一试下面的代码输出0还是1</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="type">double</span> a = <span class="number">0.1</span>, b = <span class="number">0.2</span>, c = <span class="number">0.3</span>;</span><br><span class="line">  cout &lt;&lt; (a + b == c) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>实际上保留20位小数，a,b,c分别为0.10000000000000000555，0.20000000000000001110，0.29999999999999998890</p><p>最后这道题的时间复杂度为$O(n^{2}log(\sum\sqrt{|l - r_j|}))$</p><p>std：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">2.01e6</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> M = <span class="number">1.01e3</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod = <span class="number">998244353</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">double</span> eps = <span class="number">1e-7</span>;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> LOCAL</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;C:/Users/70510/Desktop/Others/algo/debug.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> debug(...) 42</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">double</span> l;</span><br><span class="line"><span class="type">double</span> x[N], b[N];</span><br><span class="line"><span class="type">double</span> d[N];</span><br><span class="line"><span class="type">int</span> pre[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check</span><span class="params">(<span class="type">double</span> mid)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    d[i] = <span class="number">1e30</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  d[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">  pre[<span class="number">0</span>] = <span class="number">-1</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</span><br><span class="line">      <span class="type">double</span> frustration = <span class="built_in">sqrt</span>(<span class="built_in">abs</span>(l - (x[i] - x[j])));</span><br><span class="line">      <span class="type">double</span> cost = d[j] + frustration - mid * b[i];</span><br><span class="line">      <span class="keyword">if</span> (d[i] &gt; cost) &#123;</span><br><span class="line">        d[i] = cost;</span><br><span class="line">        pre[i] = j;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> d[n] &lt;= <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  cin &gt;&gt; n &gt;&gt; l;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    cin &gt;&gt; x[i] &gt;&gt; b[i];</span><br><span class="line">  &#125;</span><br><span class="line">  x[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">  b[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">  <span class="type">double</span> lo = <span class="number">0</span>, hi = <span class="number">1e6</span>;</span><br><span class="line">  <span class="keyword">while</span> (hi - lo &gt; eps) &#123;</span><br><span class="line">    <span class="type">double</span> mid = (lo + hi) / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">check</span>(mid)) &#123;</span><br><span class="line">      hi = mid;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      lo = mid;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">check</span>(hi);</span><br><span class="line">  vector&lt;<span class="type">int</span>&gt; ans;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = n; i != <span class="number">-1</span>; i = pre[i]) &#123;</span><br><span class="line">    <span class="keyword">if</span> (i != <span class="number">0</span>) &#123;</span><br><span class="line">      ans.<span class="built_in">push_back</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">reverse</span>(ans.<span class="built_in">begin</span>(), ans.<span class="built_in">end</span>());</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; (<span class="type">int</span>)ans.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">    cout &lt;&lt; ans[i] &lt;&lt; <span class="string">&quot; \n&quot;</span>[i == (<span class="type">int</span>)ans.<span class="built_in">size</span>() - <span class="number">1</span>];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">  cin.<span class="built_in">tie</span>(<span class="number">0</span>), cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="type">int</span> T = <span class="number">1</span>;</span><br><span class="line">  <span class="comment">// cin &gt;&gt; T;</span></span><br><span class="line">  <span class="keyword">while</span> (T--) <span class="built_in">solve</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>01分数规划相关题目：<a href="http://poj.org/problem?id=2976">Dropping tests</a></p></blockquote><hr><h3 id="D-Nezzar-and-Board"><a href="#D-Nezzar-and-Board" class="headerlink" title="D. Nezzar and Board"></a><a href="https://codeforces.com/contest/1478/problem/D">D. Nezzar and Board</a></h3><p>Date：Jan.28, 2021 | Rating：1972 | Number of accepted:1244(7.68%) | Number of attempts:1672(10.33%) | Total:16192</p><p>Tag：构造 数学 数论</p><p>可以涉及的算法：裴蜀定理 二元线性丢番图方程</p><p>问题描述</p><p>给定一个整数序列$x_1, x_2, \dots, x_n$，可以进行以下操作任意次：</p><ul><li>选择任意两个整数 $x$ 和 $y$，计算$2x - y$，并将结果视为新的整数。</li></ul><p>现在，给定一个目标值$k$，问是否可以通过上述操作，从序列中的某个元素出发，经过若干次操作，得到$k$。</p><p>为了方便分析，我们先对操作进行等价变换，并理解其本质。</p><p>操作等价变换<br>原操作：$2x - y$</p><p>可以看作：</p><ol><li><p>$ 2x - y = x + x - y$<br> 这样，我们可以将操作视为：从一个元素$x$开始，加上任意两个数的差$x - y$。</p></li><li><p>由于$x - y$可以为正数或负数，因此，操作的本质是：从某个元素开始，加上任意数对的差。</p></li></ol><p>考虑序列元素之间的差，我们定义序列：</p><ul><li><p>$a<em>i = x_i - x</em>{i-1}$，对于$i = 2,3,\dots,n$<br>  这样，我们可以表示任意两个元素之间的差：</p></li><li><p>$x<em>i - x_j = \sum</em>{k = j+1}^{i} a_k$，当 $i &gt; j$<br>  因此，任意的$x_i$ 都可以表示为：</p></li><li><p>$x<em>i = x_1 + \sum</em>{k = 2}^{i} a_k$</p></li></ul><p>于是问题转化为：从某个$x_i $出发，通过加上若干个差$x_p - x_q$（即$ a$ 的线性组合），得到目标值$k$。</p><p>由于差 $x<em>p - x_q$可以表示为 $a $ 的线性组合，且系数为整数（可能为负数），因此，我们可以表示目标值与$x_i $之间的差为：<br>$k - x_i = z_1 a_1 + z_2 a_2 + \dots + z</em>{n-1} a_{n-1}$其中，$z_j$为整数。</p><p>那么就可以利用裴蜀定理：对于整数序列$a<em>1, a_2, \dots, a</em>{n-1}$，存在整数解$z<em>1, z_2, \dots, z</em>{n-1}$，使得线性组合等于某个值的充要条件是，该值是这些数的最大公约数$g$的倍数。</p><p>因此，我们的问题转化为： 是否存在序列中的某个元素$x_i$，使得$k - x_i$ 是$ g$的倍数。</p><p>注意到，所有的$x_i$都满足：$x_i \equiv x_1 \pmod{g}$</p><p>因为$x<em>i - x_1 = \sum</em>{k=2}^{i} a_k$，所以$x_i - x_1$ 是$g$的倍数。</p><p>因此，只需检查$k$是否与$ x_1 $同余于模$g$意义下，即： 如果$(k - x_1) \mod g = 0$，总体时间复杂度$O(nlog(max(x[i])))$。</p><p>另外通过丢番图方程入手也可以解决这道题目，手算前几项的递推式可以发现是线性丢番图方程，殊途同归。</p><p>科普一个没啥用的小知识：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">std::__gcd和std::gcd实现并不同，std::__gcd是euclid算法，std::gcd是stein算法，一般来说，随机数据后者效率高，但实际上没人卡这个就是了。</span><br></pre></td></tr></table></figure><p>std:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">2.01e6</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> M = <span class="number">1.01e3</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod = <span class="number">998244353</span>;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> LOCAL</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;C:/Users/70510/Desktop/Others/algo/debug.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> debug(...) 42</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="type">int</span> n, k;</span><br><span class="line">  cin &gt;&gt; n &gt;&gt; k;</span><br><span class="line">  <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">x</span><span class="params">(n)</span></span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">    cin &gt;&gt; x[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="type">int</span> g = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">    g = __gcd(g, <span class="built_in">abs</span>(x[i] - x[i - <span class="number">1</span>]));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="type">int</span> delta = <span class="built_in">abs</span>(k - x[<span class="number">0</span>]);</span><br><span class="line">  <span class="keyword">if</span> (delta % g == <span class="number">0</span>) &#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;YES&quot;</span> &lt;&lt; endl;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;NO&quot;</span> &lt;&lt; endl;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">  cin.<span class="built_in">tie</span>(<span class="number">0</span>), cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="type">int</span> T = <span class="number">1</span>;</span><br><span class="line">  cin &gt;&gt; T;</span><br><span class="line">  <span class="keyword">while</span> (T--) <span class="built_in">solve</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>裴蜀定理：<a href="https://www.luogu.com.cn/problem/P4549">【模板】裴蜀定理</a></p><p>裴蜀定理：<a href="https://codeforces.com/contest/510/problem/D">D. Fox And Jumping</a></p><p>裴蜀定理：<a href="https://acm.hdu.edu.cn/showproblem.php?pid=5512">Pagodas</a></p><p>裴蜀定理：<a href="http://poj.org/problem?id=1579">Function Run Fun</a></p><p>拓展欧几里得算法与二元丢番图方程的解：<a href="https://www.luogu.com.cn/problem/P1516">P1516 青蛙的约会</a></p></blockquote><hr><h3 id="C-Diamond-Miner"><a href="#C-Diamond-Miner" class="headerlink" title="C. Diamond Miner"></a><a href="https://codeforces.com/contest/1496/problem/C">C. Diamond Miner</a></h3><p>Date：March.10, 2021 | Rating：1176 | Number of accepted:5878(53.86%) | Number of attempts:6593 (60.41%) | Total:10914</p><p>Tag：计算几何 贪心 排序</p><p>题意：略</p><p>因为坐标每个象限都是等效的，所以我们可以把所有的坐标全都移到同一个想先，为了方便起见，全部都移到第一象限，保证坐标全部为正数，方便计算。</p><p>引用官方题解的一张图方便解释：</p><p><img src="https://www.helloimg.com/i/2024/12/31/6773e86e6ae45.png" alt="codeforces"></p><p>我们知道，在三角形中任意两边的长度大于第三遍的长度，在此假设有四个点$A,B,C,D$存在，有两种挖矿的方法</p><ol><li>$B$挖$C$ $D$挖$A$ 那么花费的能量为$|BC|+|AD|$</li><li>$B$挖$A$ $D$挖$C$ 那么花费的能量为$|AB|+|CD|=|AO|+|DO|+|BO|+|CO|&gt;|BC|+|AD|$</li></ol><p>显然如果想要花费的能量最小，就是让任意两条线段之间除了定点都不相交</p><p>可以将所有的点在$x$轴$y$轴上排序，累加所有的线段就可以得到最小值，时间复杂度为$O(nlogn)$</p><p>std:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">2.01e6</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> M = <span class="number">1.01e3</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod = <span class="number">998244353</span>;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> LOCAL</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;C:/Users/70510/Desktop/Others/algo/debug.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> debug(...) 42</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> x[N], y[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="type">int</span> n;</span><br><span class="line">  cin &gt;&gt; n;</span><br><span class="line">  vector&lt;<span class="type">double</span>&gt; xx;</span><br><span class="line">  vector&lt;<span class="type">double</span>&gt; yy;</span><br><span class="line">  <span class="type">int</span> totalPoints = n * <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; totalPoints; ++i) &#123;</span><br><span class="line">    <span class="type">int</span> x, y;</span><br><span class="line">    cin &gt;&gt; x &gt;&gt; y;</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="number">0</span>) &#123;</span><br><span class="line">      yy.<span class="built_in">push_back</span>(<span class="built_in">abs</span>(y));</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (y == <span class="number">0</span>) &#123;</span><br><span class="line">      xx.<span class="built_in">push_back</span>(<span class="built_in">abs</span>(x));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">sort</span>(yy.<span class="built_in">begin</span>(), yy.<span class="built_in">end</span>());</span><br><span class="line">  <span class="built_in">sort</span>(xx.<span class="built_in">begin</span>(), xx.<span class="built_in">end</span>());</span><br><span class="line">  <span class="type">double</span> ans = <span class="number">0.0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">    <span class="type">double</span> dis = <span class="built_in">sqrt</span>(yy[i] * yy[i] + xx[i] * xx[i]);</span><br><span class="line">    ans += dis;</span><br><span class="line">  &#125;</span><br><span class="line">  cout &lt;&lt; fixed &lt;&lt; <span class="built_in">setprecision</span>(<span class="number">15</span>) &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">  cin.<span class="built_in">tie</span>(<span class="number">0</span>), cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="type">int</span> T = <span class="number">1</span>;</span><br><span class="line">  cin &gt;&gt; T;</span><br><span class="line">  <span class="keyword">while</span> (T--) <span class="built_in">solve</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="C-MP3"><a href="#C-MP3" class="headerlink" title="C. MP3"></a><a href="https://codeforces.com/contest/1199/problem/C">C. MP3</a></h3><p>Date：July 30, 2019 | Rating：1748 | Number of accepted:1884(26.85%) | Number of attempts:4402(62.74%) | Total:7016</p><p>Tag：双指针</p><p>题意：略</p><p>首先，我们需要计算在给定磁盘大小下，数组中最多可以有多少个不同的值。</p><p>每个值需要的位数为 $k = \lceil \log_2 K \rceil$，总共需要的位数为 $n \times k$。磁盘大小为 $I$ 字节，即 $8I$ 位。</p><p>因此，需要满足：$n \times k \leq 8I$，即：$k \leq \dfrac{8I}{n}$，由于 $k$ 为非负整数，我们取其下界。</p><p>然后，不同值的最大数量 $K$ 满足：$K \leq 2^k$，由于 $k = \lceil \log_2 K \rceil$，所以：$K \leq 2^{\frac{8I}{n}}$</p><p>但是，$K$ 最多为 $n$，因为数组长度为 $n$。</p><p>为了避免 $K$ 过大（当 $n$ 很小时，$2^{\frac{8I}{n}}$ 可能很大），我们可以设定一个上限，比如 $K_{\text{max}} = n$。</p><p>我们可以对数组进行预处理：排序+统计数组中不同元素的值及其出现次数， 进而滑动窗口寻找最优区间</p><p>我们的目标是：</p><ul><li>选择一个包含不超过 $K$ 个不同值的子区间（这些值是连续的，因为经过排序）；</li><li>使得在这个区间内的元素数量尽可能多，从而被修改的元素数量尽可能少；</li></ul><p>具体来讲：</p><ul><li>设定一个滑动窗口，初始化左端点和右端点；</li><li>枚举所有可能的左右端点组合，使得窗口内的不同值数量不超过 $K$；</li><li>计算每种情况下需要修改的元素数量，即总元素数减去窗口内的元素数量；</li><li>取需要修改元素数量最小的方案；</li></ul><p>总时间复杂度为 $O(n \log n)$。</p><p>std:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"><span class="keyword">using</span> i64 = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">2.01e6</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> M = <span class="number">1.01e3</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> mod = <span class="number">998244353</span>;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> LOCAL</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;C:/Users/70510/Desktop/Others/algo/debug.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> debug(...) 42</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="type">int</span> n, I;</span><br><span class="line">  cin &gt;&gt; n &gt;&gt; I;</span><br><span class="line">  <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n)</span></span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">    cin &gt;&gt; a[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">sort</span>(a.<span class="built_in">begin</span>(), a.<span class="built_in">end</span>());</span><br><span class="line">  vector&lt;<span class="type">int</span>&gt; val;</span><br><span class="line">  vector&lt;<span class="type">int</span>&gt; count;</span><br><span class="line">  <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">pre</span><span class="params">(<span class="number">1</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">  <span class="type">int</span> cnt = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">    <span class="keyword">if</span> (i == n || a[i] != a[i - <span class="number">1</span>]) &#123;</span><br><span class="line">      val.<span class="built_in">push_back</span>(a[i - <span class="number">1</span>]);</span><br><span class="line">      count.<span class="built_in">push_back</span>(cnt);</span><br><span class="line">      pre.<span class="built_in">push_back</span>(pre.<span class="built_in">back</span>() + cnt);</span><br><span class="line">      cnt = <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      cnt++;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="type">int</span> max_bits = (<span class="number">8</span> * I) / n;</span><br><span class="line">  <span class="type">int</span> K;</span><br><span class="line">  <span class="keyword">if</span> (max_bits &gt;= <span class="number">20</span>) &#123;</span><br><span class="line">    K = val.<span class="built_in">size</span>();</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    K = <span class="built_in">min</span>((<span class="type">int</span>)val.<span class="built_in">size</span>(), <span class="number">1LL</span> &lt;&lt; max_bits);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="type">int</span> cht = n;</span><br><span class="line">  <span class="type">int</span> tot_val = val.<span class="built_in">size</span>();</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> lo = <span class="number">0</span>, hi = <span class="number">0</span>; hi &lt; tot_val; hi++) &#123;</span><br><span class="line">    <span class="keyword">while</span> (hi - lo + <span class="number">1</span> &gt; K) &#123;</span><br><span class="line">      lo++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> unchanged = pre[hi + <span class="number">1</span>] - pre[lo];</span><br><span class="line">    <span class="type">int</span> changes = n - unchanged;</span><br><span class="line">    cht = <span class="built_in">min</span>(cht, changes);</span><br><span class="line">  &#125;</span><br><span class="line">  cout &lt;&lt; cht &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">  cin.<span class="built_in">tie</span>(<span class="number">0</span>), cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="type">int</span> T = <span class="number">1</span>;</span><br><span class="line">  <span class="comment">// cin &gt;&gt; T;</span></span><br><span class="line">  <span class="keyword">while</span> (T--) <span class="built_in">solve</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> XCPC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>分块莫队</title>
      <link href="/posts/65b2d74f.html"/>
      <url>/posts/65b2d74f.html</url>
      
        <content type="html"><![CDATA[<h1 id="分块算法"><a href="#分块算法" class="headerlink" title="分块算法"></a>分块算法</h1><h2 id="什么是分块算法"><a href="#什么是分块算法" class="headerlink" title="什么是分块算法"></a>什么是分块算法</h2><p>分块是一种思想，对整块整体处理，对零散快单独处理。</p><p>分块实际上就是暴力，不过可以被称为“优雅的暴力”。分块能解决很多类型的问题，很多算法也利用了分块的思想并进行优化。莫队的很多题目中也会一并使用分块来解决。</p><p>另外分块也可以分为图论分块，数论分块，字符串分块，数据结构分块等等，分块所设计的领域非常广，往往也可以使用分块来解决一些看似需要高深算法来解决的问题。</p><p>例如：<a href="https://www.luogu.com.cn/problem/P3372">P3372 【模板】线段树 1</a></p><p>显然利用现在所学知识无法在 $O(nlogn)$ 的时间复杂度下来解决此问题，那么这时我们可以考虑使用这种算法。</p><h2 id="何时分块"><a href="#何时分块" class="headerlink" title="何时分块"></a>何时分块</h2><p>再给出一个块，块长为$N$，要求求解区间 $[l,r]$ 的部分相关问题，如求解区间 $[l,r]$ 的最大值，最小值和区间和等问题。这时我们可以来维护区间 $[l,r]$内的块和附近的少量元素。</p><h2 id="如何分块"><a href="#如何分块" class="headerlink" title="如何分块"></a>如何分块</h2><h3 id="块长"><a href="#块长" class="headerlink" title="块长"></a>块长</h3><p>我们可以通过“猜”的方式来大致得出相对优秀的块长</p><ul><li>长度为$1$？长度为$n$？如分</li><li>长度为$\frac{n}{2}$ 依然很难维护</li><li>长度为$logn$ 需要维护$\frac{n}{logn}$的块 假设数据范围为$2e5$ 是大约$38000$个块</li><li>长度为$\sqrt{n}$ 需要维护$\sqrt{n}$的块 只需要维护$450$个块</li></ul><p>实际上 块的大小可以通过计算得出</p><p>若以顺序查找来确定块，则分块查找成功时的平均查找长度为</p><script type="math/tex; mode=display">ASL_{ls}=L_{b}+L_{w}=\frac{b+1}{2}+\frac{s+1}{2}=\frac{\frac{n}{s}+s}{2}+1=\frac{n+s^{2}}{2s}+1</script><p>$n$为查找表的长度，$s$为块的长度</p><p>$b=⌈\frac{n}{s}⌉$为块的个数。当$s=\sqrt{n}$时，$ASL_{ls}$取最小值$\sqrt{n}+1$</p><h3 id="时间复杂度"><a href="#时间复杂度" class="headerlink" title="时间复杂度"></a>时间复杂度</h3><ul><li>$n$次询问，长度为$m$，时间复杂度为 $O(n\sqrt{m})$，准确来说为$O(n\sqrt{n}+n\sqrt{m})$</li></ul><h3 id="实现思路"><a href="#实现思路" class="headerlink" title="实现思路"></a>实现思路</h3><p>我们具体需要维护的有如下三点：</p><ul><li>在前面的一部分零散的元素</li><li>中间的若干个整块</li><li>后面的一部分零散的元素</li></ul><h3 id="具体实现"><a href="#具体实现" class="headerlink" title="具体实现"></a>具体实现</h3><p><a href="https://www.luogu.com.cn/problem/P3372">P3372 【模板】线段树 1</a></p><details class="folding-tag" ><summary> 查看代码 </summary>              <div class='content'>              <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="comment">// #include &lt;bits/extc++.h&gt;</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">// using namespace __gnu_pbds;</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ture true</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> flase false</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pow power</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> all(x) begin(x), end(x)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mem(a, x) memset(a, x, sizeof(a))</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> gcd(a, b) gcdint(a, b)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lcm(a, b) (a / gcd(a, b) * b)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> sz(x) (int)x.size()</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lowbit(x) (x &amp; -x)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> EPS 1e-7</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int ll</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> i64 long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> i128 __int128</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fr first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> sc second</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> tcT template &lt;class T</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> tcTU tcT, class U</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">unsyncIO</span><span class="params">()</span> </span>&#123; cin.<span class="built_in">tie</span>(<span class="number">0</span>)-&gt;<span class="built_in">sync_with_stdio</span>(<span class="number">0</span>); &#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setPrec</span><span class="params">()</span> </span>&#123; cout &lt;&lt; fixed &lt;&lt; <span class="built_in">setprecision</span>(<span class="number">15</span>); &#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setIO</span><span class="params">()</span> </span>&#123; <span class="built_in">unsyncIO</span>(), <span class="built_in">setPrec</span>(); &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">gcdint</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; <span class="keyword">return</span> b ? <span class="built_in">gcdint</span>(b, a % b) : a; &#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> i128 <span class="title">gcd128</span><span class="params">(i128 a, i128 b)</span> </span>&#123; <span class="keyword">return</span> b ? <span class="built_in">gcd128</span>(b, a % b) : a; &#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">cdiv</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; <span class="keyword">return</span> a / b + ((a ^ b) &gt; <span class="number">0</span> &amp;&amp; a % b); &#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">fdiv</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; <span class="keyword">return</span> a / b - ((a ^ b) &lt; <span class="number">0</span> &amp;&amp; a % b); &#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; <span class="keyword">using</span> V = vector&lt;T&gt;;</span><br><span class="line">tcTU &gt; <span class="keyword">using</span> PR = pair&lt;T, U&gt;;</span><br><span class="line">tcTU &gt; <span class="keyword">using</span> MP = map&lt;T, U&gt;;</span><br><span class="line">tcTU &gt; <span class="keyword">using</span> VP = vector&lt;pair&lt;T, U&gt;&gt;;</span><br><span class="line">tcT &gt; <span class="keyword">using</span> pqg = priority_queue&lt;T, vector&lt;T&gt;, greater&lt;T&gt;&gt;;</span><br><span class="line">tcT &gt; <span class="keyword">using</span> pql = priority_queue&lt;T, vector&lt;T&gt;, less&lt;T&gt;&gt;;</span><br><span class="line"></span><br><span class="line">tcTU &gt; istream &amp;<span class="keyword">operator</span>&gt;&gt;(istream &amp;in, pair&lt;T, U&gt; &amp;a) &#123;</span><br><span class="line">  <span class="keyword">return</span> in &gt;&gt; a.first &gt;&gt; a.second;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; istream &amp;<span class="keyword">operator</span>&gt;&gt;(istream &amp;in, vector&lt;T&gt; &amp;a) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;x : a) &#123;</span><br><span class="line">    in &gt;&gt; x;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> in;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; ostream &amp;<span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, <span class="type">const</span> pair&lt;T, U&gt; &amp;a) &#123;</span><br><span class="line">  <span class="keyword">return</span> out &lt;&lt; a.first &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; a.second;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; ostream &amp;<span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, <span class="type">const</span> vector&lt;pair&lt;T, U&gt;&gt; &amp;a) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;x : a) &#123;</span><br><span class="line">    out &lt;&lt; x &lt;&lt; endl;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; ostream &amp;<span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, <span class="type">const</span> vector&lt;T&gt; &amp;a) &#123;</span><br><span class="line">  <span class="type">int</span> n = a.<span class="built_in">size</span>();</span><br><span class="line">  <span class="keyword">if</span> (!n) &#123;</span><br><span class="line">    <span class="keyword">return</span> out;</span><br><span class="line">  &#125;</span><br><span class="line">  out &lt;&lt; a[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">    out &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; a[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">std::ostream &amp;<span class="keyword">operator</span>&lt;&lt;(std::ostream &amp;os, i128 n) &#123;</span><br><span class="line">  std::string s;</span><br><span class="line">  <span class="keyword">while</span> (n) &#123;</span><br><span class="line">    s += <span class="string">&#x27;0&#x27;</span> + n % <span class="number">10</span>;</span><br><span class="line">    n /= <span class="number">10</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  std::<span class="built_in">reverse</span>(s.<span class="built_in">begin</span>(), s.<span class="built_in">end</span>());</span><br><span class="line">  <span class="keyword">return</span> os &lt;&lt; s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">power</span><span class="params">(<span class="type">int</span> a, i64 b, <span class="type">int</span> p = <span class="number">1e9</span> + <span class="number">7</span>)</span> </span>&#123;</span><br><span class="line">  <span class="type">int</span> res = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">for</span> (; b; b /= <span class="number">2</span>, a = <span class="number">1LL</span> * a * a % p) &#123;</span><br><span class="line">    <span class="keyword">if</span> (b % <span class="number">2</span>) &#123;</span><br><span class="line">      res = <span class="number">1LL</span> * res * a % p;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; <span class="function"><span class="type">bool</span> <span class="title">ckmin</span><span class="params">(T &amp;a, <span class="type">const</span> T &amp;b)</span> </span>&#123; <span class="keyword">return</span> b &lt; a ? a = b, <span class="number">1</span> : <span class="number">0</span>; &#125;</span><br><span class="line">tcT &gt; <span class="function"><span class="type">bool</span> <span class="title">ckmax</span><span class="params">(T &amp;a, <span class="type">const</span> T &amp;b)</span> </span>&#123; <span class="keyword">return</span> a &lt; b ? a = b, <span class="number">1</span> : <span class="number">0</span>; &#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; <span class="function"><span class="type">void</span> <span class="title">remDup</span><span class="params">(vector&lt;T&gt; &amp;v)</span> </span>&#123;</span><br><span class="line">  <span class="built_in">sort</span>(<span class="built_in">all</span>(v));</span><br><span class="line">  v.<span class="built_in">erase</span>(<span class="built_in">unique</span>(<span class="built_in">all</span>(v)), <span class="built_in">end</span>(v));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; <span class="function"><span class="type">void</span> <span class="title">erase</span><span class="params">(T &amp;t, <span class="type">const</span> U &amp;u)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">auto</span> it = t.<span class="built_in">find</span>(u);</span><br><span class="line">  <span class="built_in">assert</span>(it != <span class="built_in">end</span>(t));</span><br><span class="line">  t.<span class="built_in">erase</span>(it);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; <span class="function">T <span class="title">fstTrue</span><span class="params">(T lo, T hi, U f)</span> </span>&#123;</span><br><span class="line">  hi++;</span><br><span class="line">  <span class="built_in">assert</span>(lo &lt;= hi);</span><br><span class="line">  <span class="keyword">while</span> (lo &lt; hi) &#123;</span><br><span class="line">    T mid = lo + (hi - lo) / <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">f</span>(mid) ? hi = mid : lo = mid + <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> lo;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; <span class="function">T <span class="title">lstTrue</span><span class="params">(T lo, T hi, U f)</span> </span>&#123;</span><br><span class="line">  lo--;</span><br><span class="line">  <span class="built_in">assert</span>(lo &lt;= hi);</span><br><span class="line">  <span class="keyword">while</span> (lo &lt; hi) &#123;</span><br><span class="line">    T mid = lo + (hi - lo + <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">f</span>(mid) ? lo = mid : hi = mid - <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> lo;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> inf = <span class="number">0x7fffffff</span>;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> N = <span class="number">1.01e6</span>;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> M = <span class="number">2.01e3</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> LOCAL</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;C:/Users/70510/Desktop/Others/algo/debug.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> debug(...) 42</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a[N], st[N], ed[N], sum[N], add[N], len, id[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">change</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> k)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (id[l] == id[r]) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = l; i &lt;= r; i++) &#123;</span><br><span class="line">      a[i] += k;</span><br><span class="line">      sum[id[i]] += k;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = l; i &lt;= ed[l]; i++) &#123;</span><br><span class="line">      a[i] += k;</span><br><span class="line">      sum[id[i]] += k;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = st[r]; i &lt;= r; i++) &#123;</span><br><span class="line">      a[i] += k;</span><br><span class="line">      sum[id[i]] += k;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = id[l] + <span class="number">1</span>; i &lt; id[r]; i++) &#123;</span><br><span class="line">      add[i] += k;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">query</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r)</span> </span>&#123;</span><br><span class="line">  <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">if</span> (id[l] == id[r]) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = l; i &lt;= r; i++) &#123;</span><br><span class="line">      ans += a[i] + add[id[i]];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = l; i &lt;= ed[l]; i++) &#123;</span><br><span class="line">      ans += a[i] + add[id[i]];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = st[r]; i &lt;= r; i++) &#123;</span><br><span class="line">      ans += a[i] + add[id[i]];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = id[l] + <span class="number">1</span>; i &lt; id[r]; i++) &#123;</span><br><span class="line">      ans += sum[i] + add[i] * (ed[i] - st[i] + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="type">int</span> n, m;</span><br><span class="line">  cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">  len = <span class="built_in">sqrt</span>(n);</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    cin &gt;&gt; a[i];</span><br><span class="line">    id[i] = (i - <span class="number">1</span>) / len + <span class="number">1</span>;</span><br><span class="line">    st[i] = (id[i] - <span class="number">1</span>) * len + <span class="number">1</span>;</span><br><span class="line">    ed[i] = <span class="built_in">min</span>(id[i] * len, n);</span><br><span class="line">    sum[id[i]] += a[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">while</span> (m--) &#123;</span><br><span class="line">    <span class="type">int</span> op, x, y, k;</span><br><span class="line">    cin &gt;&gt; op &gt;&gt; x &gt;&gt; y;</span><br><span class="line">    <span class="keyword">if</span> (op == <span class="number">1</span>) &#123;</span><br><span class="line">      cin &gt;&gt; k;</span><br><span class="line">      <span class="built_in">change</span>(x, y, k);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      cout &lt;&lt; <span class="built_in">query</span>(x, y) &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="built_in">setIO</span>();</span><br><span class="line">  <span class="type">int</span> tt = <span class="number">1</span>;</span><br><span class="line">  <span class="comment">// cin &gt;&gt; tt;</span></span><br><span class="line">  <span class="keyword">while</span> (tt--) &#123;</span><br><span class="line">    <span class="built_in">solve</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><p><a href="https://www.luogu.com.cn/problem/P3865">P3865 【模板】ST 表 &amp;&amp; RMQ 问题</a></p><details class="folding-tag" ><summary> 查看代码 </summary>              <div class='content'>              <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="comment">// #include &lt;bits/extc++.h&gt;</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">// using namespace __gnu_pbds;</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ture true</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> flase false</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pow power</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> all(x) begin(x), end(x)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mem(a, x) memset(a, x, sizeof(a))</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> gcd(a, b) gcdint(a, b)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lcm(a, b) (a / gcd(a, b) * b)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> sz(x) (int)x.size()</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lowbit(x) (x &amp; -x)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> EPS 1e-7</span></span><br><span class="line"><span class="comment">// #define int ll</span></span><br><span class="line"><span class="comment">// #define ll long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> i64 long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> i128 __int128</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fr first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> sc second</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> tcT template &lt;class T</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> tcTU tcT, class U</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">unsyncIO</span><span class="params">()</span> </span>&#123; cin.<span class="built_in">tie</span>(<span class="number">0</span>)-&gt;<span class="built_in">sync_with_stdio</span>(<span class="number">0</span>); &#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setPrec</span><span class="params">()</span> </span>&#123; cout &lt;&lt; fixed &lt;&lt; <span class="built_in">setprecision</span>(<span class="number">15</span>); &#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setIO</span><span class="params">()</span> </span>&#123; <span class="built_in">unsyncIO</span>(), <span class="built_in">setPrec</span>(); &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">gcdint</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; <span class="keyword">return</span> b ? <span class="built_in">gcdint</span>(b, a % b) : a; &#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> i128 <span class="title">gcd128</span><span class="params">(i128 a, i128 b)</span> </span>&#123; <span class="keyword">return</span> b ? <span class="built_in">gcd128</span>(b, a % b) : a; &#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">cdiv</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; <span class="keyword">return</span> a / b + ((a ^ b) &gt; <span class="number">0</span> &amp;&amp; a % b); &#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">fdiv</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; <span class="keyword">return</span> a / b - ((a ^ b) &lt; <span class="number">0</span> &amp;&amp; a % b); &#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; <span class="keyword">using</span> V = vector&lt;T&gt;;</span><br><span class="line">tcTU &gt; <span class="keyword">using</span> PR = pair&lt;T, U&gt;;</span><br><span class="line">tcTU &gt; <span class="keyword">using</span> MP = map&lt;T, U&gt;;</span><br><span class="line">tcTU &gt; <span class="keyword">using</span> VP = vector&lt;pair&lt;T, U&gt;&gt;;</span><br><span class="line">tcT &gt; <span class="keyword">using</span> pqg = priority_queue&lt;T, vector&lt;T&gt;, greater&lt;T&gt;&gt;;</span><br><span class="line">tcT &gt; <span class="keyword">using</span> pql = priority_queue&lt;T, vector&lt;T&gt;, less&lt;T&gt;&gt;;</span><br><span class="line"></span><br><span class="line">tcTU &gt; istream &amp;<span class="keyword">operator</span>&gt;&gt;(istream &amp;in, pair&lt;T, U&gt; &amp;a) &#123;</span><br><span class="line">  <span class="keyword">return</span> in &gt;&gt; a.first &gt;&gt; a.second;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; istream &amp;<span class="keyword">operator</span>&gt;&gt;(istream &amp;in, vector&lt;T&gt; &amp;a) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;x : a) &#123;</span><br><span class="line">    in &gt;&gt; x;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> in;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; ostream &amp;<span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, <span class="type">const</span> pair&lt;T, U&gt; &amp;a) &#123;</span><br><span class="line">  <span class="keyword">return</span> out &lt;&lt; a.first &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; a.second;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; ostream &amp;<span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, <span class="type">const</span> vector&lt;pair&lt;T, U&gt;&gt; &amp;a) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;x : a) &#123;</span><br><span class="line">    out &lt;&lt; x &lt;&lt; endl;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; ostream &amp;<span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, <span class="type">const</span> vector&lt;T&gt; &amp;a) &#123;</span><br><span class="line">  <span class="type">int</span> n = a.<span class="built_in">size</span>();</span><br><span class="line">  <span class="keyword">if</span> (!n) &#123;</span><br><span class="line">    <span class="keyword">return</span> out;</span><br><span class="line">  &#125;</span><br><span class="line">  out &lt;&lt; a[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">    out &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; a[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">std::ostream &amp;<span class="keyword">operator</span>&lt;&lt;(std::ostream &amp;os, i128 n) &#123;</span><br><span class="line">  std::string s;</span><br><span class="line">  <span class="keyword">while</span> (n) &#123;</span><br><span class="line">    s += <span class="string">&#x27;0&#x27;</span> + n % <span class="number">10</span>;</span><br><span class="line">    n /= <span class="number">10</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  std::<span class="built_in">reverse</span>(s.<span class="built_in">begin</span>(), s.<span class="built_in">end</span>());</span><br><span class="line">  <span class="keyword">return</span> os &lt;&lt; s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">power</span><span class="params">(<span class="type">int</span> a, i64 b, <span class="type">int</span> p = <span class="number">1e9</span> + <span class="number">7</span>)</span> </span>&#123;</span><br><span class="line">  <span class="type">int</span> res = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">for</span> (; b; b /= <span class="number">2</span>, a = <span class="number">1LL</span> * a * a % p) &#123;</span><br><span class="line">    <span class="keyword">if</span> (b % <span class="number">2</span>) &#123;</span><br><span class="line">      res = <span class="number">1LL</span> * res * a % p;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; <span class="function"><span class="type">bool</span> <span class="title">ckmin</span><span class="params">(T &amp;a, <span class="type">const</span> T &amp;b)</span> </span>&#123; <span class="keyword">return</span> b &lt; a ? a = b, <span class="number">1</span> : <span class="number">0</span>; &#125;</span><br><span class="line">tcT &gt; <span class="function"><span class="type">bool</span> <span class="title">ckmax</span><span class="params">(T &amp;a, <span class="type">const</span> T &amp;b)</span> </span>&#123; <span class="keyword">return</span> a &lt; b ? a = b, <span class="number">1</span> : <span class="number">0</span>; &#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; <span class="function"><span class="type">void</span> <span class="title">remDup</span><span class="params">(vector&lt;T&gt; &amp;v)</span> </span>&#123;</span><br><span class="line">  <span class="built_in">sort</span>(<span class="built_in">all</span>(v));</span><br><span class="line">  v.<span class="built_in">erase</span>(<span class="built_in">unique</span>(<span class="built_in">all</span>(v)), <span class="built_in">end</span>(v));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; <span class="function"><span class="type">void</span> <span class="title">erase</span><span class="params">(T &amp;t, <span class="type">const</span> U &amp;u)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">auto</span> it = t.<span class="built_in">find</span>(u);</span><br><span class="line">  <span class="built_in">assert</span>(it != <span class="built_in">end</span>(t));</span><br><span class="line">  t.<span class="built_in">erase</span>(it);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; <span class="function">T <span class="title">fstTrue</span><span class="params">(T lo, T hi, U f)</span> </span>&#123;</span><br><span class="line">  hi++;</span><br><span class="line">  <span class="built_in">assert</span>(lo &lt;= hi);</span><br><span class="line">  <span class="keyword">while</span> (lo &lt; hi) &#123;</span><br><span class="line">    T mid = lo + (hi - lo) / <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">f</span>(mid) ? hi = mid : lo = mid + <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> lo;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; <span class="function">T <span class="title">lstTrue</span><span class="params">(T lo, T hi, U f)</span> </span>&#123;</span><br><span class="line">  lo--;</span><br><span class="line">  <span class="built_in">assert</span>(lo &lt;= hi);</span><br><span class="line">  <span class="keyword">while</span> (lo &lt; hi) &#123;</span><br><span class="line">    T mid = lo + (hi - lo + <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">f</span>(mid) ? lo = mid : hi = mid - <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> lo;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> inf = <span class="number">0x7fffffff</span>;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> N = <span class="number">1.01e6</span>;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> M = <span class="number">2.01e3</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> LOCAL</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;C:/Users/70510/Desktop/Others/algo/debug.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> debug(...) 42</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> st[N], ed[N], mx[N], id[N], a[N], len;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">query</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">  <span class="type">int</span> l, r;</span><br><span class="line">  cin &gt;&gt; l &gt;&gt; r;</span><br><span class="line">  <span class="keyword">if</span> (id[l] == id[r]) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = l; i &lt;= r; i++) &#123;</span><br><span class="line">      ans = <span class="built_in">max</span>(ans, a[i]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = l; i &lt;= ed[id[l]]; i++) &#123;</span><br><span class="line">      ans = <span class="built_in">max</span>(ans, a[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = st[id[r]]; i &lt;= r; i++) &#123;</span><br><span class="line">      ans = <span class="built_in">max</span>(ans, a[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = id[l] + <span class="number">1</span>; i &lt;= id[r] - <span class="number">1</span>; i++) &#123;</span><br><span class="line">      ans = <span class="built_in">max</span>(ans, mx[i]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="type">int</span> n, m;</span><br><span class="line">  cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">  len = <span class="built_in">sqrt</span>(n);</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    cin &gt;&gt; a[i];</span><br><span class="line">    id[i] = (i - <span class="number">1</span>) / len + <span class="number">1</span>;</span><br><span class="line">    st[id[i]] = (id[i] - <span class="number">1</span>) * len + <span class="number">1</span>;</span><br><span class="line">    ed[id[i]] = id[i] * len;</span><br><span class="line">    mx[id[i]] = (i == st[id[i]]) ? a[i] : <span class="built_in">max</span>(mx[id[i]], a[i]);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">while</span> (m--) &#123;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">query</span>() &lt;&lt; endl;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="built_in">setIO</span>();</span><br><span class="line">  <span class="type">int</span> tt = <span class="number">1</span>;</span><br><span class="line">  <span class="comment">// cin &gt;&gt; tt;</span></span><br><span class="line">  <span class="keyword">while</span> (tt--) &#123;</span><br><span class="line">    <span class="built_in">solve</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><hr><h1 id="莫队算法"><a href="#莫队算法" class="headerlink" title="莫队算法"></a>莫队算法</h1><h2 id="莫队？"><a href="#莫队？" class="headerlink" title="莫队？"></a>莫队？</h2><p><img src="https://image.lansganbs.cn/c429a8ad9d965baabc976fb956b9bef.png" alt=""></p><p><img src="https://image.lansganbs.cn/4b466203c76f7407a370493f61dda68.png" alt=""></p><h2 id="何为莫队算法"><a href="#何为莫队算法" class="headerlink" title="何为莫队算法"></a>何为莫队算法</h2><p>为了解决区间问题，最开始的区间问题是前缀和，然后出现越来越难的问题，越来越困难的算法：分块，RMQ，树状数组，线段树等等，于是莫队算法出现，就是为了解决这类的区间问题。</p><h2 id="分块算法和莫队算法的异同"><a href="#分块算法和莫队算法的异同" class="headerlink" title="分块算法和莫队算法的异同"></a>分块算法和莫队算法的异同</h2><p>同：</p><ul><li>都是为了解决区间问题而存在</li></ul><p>异：</p><ul><li>莫队查询的更快 但是只能离线查询</li><li>分块查询的更慢 但是可以在线查询</li></ul><blockquote><p>离线查询：查询操作是在已知所有查询的情况下进行的。也就是说，在开始查询之前，所有的查询都已经确定并且可以提前处理。</p><p>在线查询：查询操作是在不知道所有查询内容的情况下进行的。每次查询时都立即处理，不会提前对查询进行任何优化。查询顺序通常是动态的。</p></blockquote><h2 id="莫队算法基本原理"><a href="#莫队算法基本原理" class="headerlink" title="莫队算法基本原理"></a>莫队算法基本原理</h2><p>利用双指针来进行区间的移动查询</p><h2 id="莫队算法的核心"><a href="#莫队算法的核心" class="headerlink" title="莫队算法的核心"></a>莫队算法的核心</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (l &gt; q[i].l) &#123;</span><br><span class="line">  <span class="built_in">add</span>(a[--l]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span> (r &lt; q[i].r) &#123;</span><br><span class="line">  <span class="built_in">add</span>(a[++r]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span> (l &lt; q[i].l) &#123;</span><br><span class="line">  <span class="built_in">del</span>(a[l++]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span> (r &gt; q[i].r) &#123;</span><br><span class="line">      <span class="built_in">del</span>(a[r--]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>具体实现</p><p><a href="https://www.luogu.com.cn/problem/P1494">P1494 [国家集训队] 小 Z 的袜子</a></p><details class="folding-tag" ><summary> 查看代码 </summary>              <div class='content'>              <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="comment">// #include &lt;bits/extc++.h&gt;</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">// using namespace __gnu_pbds;</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ture true</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> flase false</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pow power</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> all(x) begin(x), end(x)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mem(a, x) memset(a, x, sizeof(a))</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> gcd(a, b) gcdint(a, b)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lcm(a, b) (a / gcd(a, b) * b)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> sz(x) (int)x.size()</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lowbit(x) (x &amp; -x)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> EPS 1e-7</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int ll</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> i64 long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> i128 __int128</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fr first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> sc second</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> tcT template &lt;class T</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> tcTU tcT, class U</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">unsyncIO</span><span class="params">()</span> </span>&#123; cin.<span class="built_in">tie</span>(<span class="number">0</span>)-&gt;<span class="built_in">sync_with_stdio</span>(<span class="number">0</span>); &#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setPrec</span><span class="params">()</span> </span>&#123; cout &lt;&lt; fixed &lt;&lt; <span class="built_in">setprecision</span>(<span class="number">15</span>); &#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setIO</span><span class="params">()</span> </span>&#123; <span class="built_in">unsyncIO</span>(), <span class="built_in">setPrec</span>(); &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">gcdint</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; <span class="keyword">return</span> b ? <span class="built_in">gcdint</span>(b, a % b) : a; &#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> i128 <span class="title">gcd128</span><span class="params">(i128 a, i128 b)</span> </span>&#123; <span class="keyword">return</span> b ? <span class="built_in">gcd128</span>(b, a % b) : a; &#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">cdiv</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; <span class="keyword">return</span> a / b + ((a ^ b) &gt; <span class="number">0</span> &amp;&amp; a % b); &#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">fdiv</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; <span class="keyword">return</span> a / b - ((a ^ b) &lt; <span class="number">0</span> &amp;&amp; a % b); &#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; <span class="keyword">using</span> V = vector&lt;T&gt;;</span><br><span class="line">tcTU &gt; <span class="keyword">using</span> PR = pair&lt;T, U&gt;;</span><br><span class="line">tcTU &gt; <span class="keyword">using</span> MP = map&lt;T, U&gt;;</span><br><span class="line">tcTU &gt; <span class="keyword">using</span> VP = vector&lt;pair&lt;T, U&gt;&gt;;</span><br><span class="line">tcT &gt; <span class="keyword">using</span> pqg = priority_queue&lt;T, vector&lt;T&gt;, greater&lt;T&gt;&gt;;</span><br><span class="line">tcT &gt; <span class="keyword">using</span> pql = priority_queue&lt;T, vector&lt;T&gt;, less&lt;T&gt;&gt;;</span><br><span class="line"></span><br><span class="line">tcTU &gt; istream &amp;<span class="keyword">operator</span>&gt;&gt;(istream &amp;in, pair&lt;T, U&gt; &amp;a) &#123;</span><br><span class="line">  <span class="keyword">return</span> in &gt;&gt; a.first &gt;&gt; a.second;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; istream &amp;<span class="keyword">operator</span>&gt;&gt;(istream &amp;in, vector&lt;T&gt; &amp;a) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;x : a) &#123;</span><br><span class="line">    in &gt;&gt; x;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> in;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; ostream &amp;<span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, <span class="type">const</span> pair&lt;T, U&gt; &amp;a) &#123;</span><br><span class="line">  <span class="keyword">return</span> out &lt;&lt; a.first &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; a.second;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; ostream &amp;<span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, <span class="type">const</span> vector&lt;pair&lt;T, U&gt;&gt; &amp;a) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;x : a) &#123;</span><br><span class="line">    out &lt;&lt; x &lt;&lt; endl;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; ostream &amp;<span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, <span class="type">const</span> vector&lt;T&gt; &amp;a) &#123;</span><br><span class="line">  <span class="type">int</span> n = a.<span class="built_in">size</span>();</span><br><span class="line">  <span class="keyword">if</span> (!n) &#123;</span><br><span class="line">    <span class="keyword">return</span> out;</span><br><span class="line">  &#125;</span><br><span class="line">  out &lt;&lt; a[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">    out &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; a[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">std::ostream &amp;<span class="keyword">operator</span>&lt;&lt;(std::ostream &amp;os, i128 n) &#123;</span><br><span class="line">  std::string s;</span><br><span class="line">  <span class="keyword">while</span> (n) &#123;</span><br><span class="line">    s += <span class="string">&#x27;0&#x27;</span> + n % <span class="number">10</span>;</span><br><span class="line">    n /= <span class="number">10</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  std::<span class="built_in">reverse</span>(s.<span class="built_in">begin</span>(), s.<span class="built_in">end</span>());</span><br><span class="line">  <span class="keyword">return</span> os &lt;&lt; s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">power</span><span class="params">(<span class="type">int</span> a, i64 b, <span class="type">int</span> p = <span class="number">1e9</span> + <span class="number">7</span>)</span> </span>&#123;</span><br><span class="line">  <span class="type">int</span> res = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">for</span> (; b; b /= <span class="number">2</span>, a = <span class="number">1LL</span> * a * a % p) &#123;</span><br><span class="line">    <span class="keyword">if</span> (b % <span class="number">2</span>) &#123;</span><br><span class="line">      res = <span class="number">1LL</span> * res * a % p;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; <span class="function"><span class="type">bool</span> <span class="title">ckmin</span><span class="params">(T &amp;a, <span class="type">const</span> T &amp;b)</span> </span>&#123; <span class="keyword">return</span> b &lt; a ? a = b, <span class="number">1</span> : <span class="number">0</span>; &#125;</span><br><span class="line">tcT &gt; <span class="function"><span class="type">bool</span> <span class="title">ckmax</span><span class="params">(T &amp;a, <span class="type">const</span> T &amp;b)</span> </span>&#123; <span class="keyword">return</span> a &lt; b ? a = b, <span class="number">1</span> : <span class="number">0</span>; &#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; <span class="function"><span class="type">void</span> <span class="title">remDup</span><span class="params">(vector&lt;T&gt; &amp;v)</span> </span>&#123;</span><br><span class="line">  <span class="built_in">sort</span>(<span class="built_in">all</span>(v));</span><br><span class="line">  v.<span class="built_in">erase</span>(<span class="built_in">unique</span>(<span class="built_in">all</span>(v)), <span class="built_in">end</span>(v));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; <span class="function"><span class="type">void</span> <span class="title">erase</span><span class="params">(T &amp;t, <span class="type">const</span> U &amp;u)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">auto</span> it = t.<span class="built_in">find</span>(u);</span><br><span class="line">  <span class="built_in">assert</span>(it != <span class="built_in">end</span>(t));</span><br><span class="line">  t.<span class="built_in">erase</span>(it);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; <span class="function">T <span class="title">fstTrue</span><span class="params">(T lo, T hi, U f)</span> </span>&#123;</span><br><span class="line">  hi++;</span><br><span class="line">  <span class="built_in">assert</span>(lo &lt;= hi);</span><br><span class="line">  <span class="keyword">while</span> (lo &lt; hi) &#123;</span><br><span class="line">    T mid = lo + (hi - lo) / <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">f</span>(mid) ? hi = mid : lo = mid + <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> lo;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; <span class="function">T <span class="title">lstTrue</span><span class="params">(T lo, T hi, U f)</span> </span>&#123;</span><br><span class="line">  lo--;</span><br><span class="line">  <span class="built_in">assert</span>(lo &lt;= hi);</span><br><span class="line">  <span class="keyword">while</span> (lo &lt; hi) &#123;</span><br><span class="line">    T mid = lo + (hi - lo + <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">f</span>(mid) ? lo = mid : hi = mid - <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> lo;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> inf = <span class="number">0x7fffffff</span>;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> N = <span class="number">1.01e6</span>;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> M = <span class="number">2.01e3</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> LOCAL</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;C:/Users/70510/Desktop/Others/algo/debug.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> debug(...) 42</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a[N], sum, ans1[N], len, ans2[N], cnt[N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">query</span> &#123;</span><br><span class="line">  <span class="type">int</span> l, r, id;</span><br><span class="line">&#125; q[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">  sum += cnt[x];</span><br><span class="line">  cnt[x]++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">del</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">  cnt[x]--;</span><br><span class="line">  sum -= cnt[x];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="type">int</span> n, m;</span><br><span class="line">  cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">  len = <span class="built_in">sqrt</span>(n);</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    cin &gt;&gt; a[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">    cin &gt;&gt; q[i].l &gt;&gt; q[i].r;</span><br><span class="line">    q[i].id = i;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">sort</span>(q + <span class="number">1</span>, q + m + <span class="number">1</span>, [](<span class="type">const</span> query &amp;lhs, <span class="type">const</span> query &amp;rhs) &#123;</span><br><span class="line">    <span class="keyword">if</span> ((lhs.l - <span class="number">1</span>) / len != (rhs.l - <span class="number">1</span>) / len) <span class="keyword">return</span> lhs.l &lt; rhs.l;</span><br><span class="line">    <span class="keyword">return</span> lhs.r &lt; rhs.r;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>, l = <span class="number">1</span>, r = <span class="number">0</span>; i &lt;= m; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (q[i].l == q[i].r) &#123;</span><br><span class="line">      ans1[q[i].id] = <span class="number">0</span>;</span><br><span class="line">      ans2[q[i].id] = <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (l &gt; q[i].l) &#123;</span><br><span class="line">      <span class="built_in">add</span>(a[--l]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (r &lt; q[i].r) &#123;</span><br><span class="line">      <span class="built_in">add</span>(a[++r]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (l &lt; q[i].l) &#123;</span><br><span class="line">      <span class="built_in">del</span>(a[l++]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (r &gt; q[i].r) &#123;</span><br><span class="line">      <span class="built_in">del</span>(a[r--]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (sum == <span class="number">0</span>) &#123;</span><br><span class="line">      ans1[q[i].id] = <span class="number">0</span>;</span><br><span class="line">      ans2[q[i].id] = <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ans1[q[i].id] = sum;</span><br><span class="line">    ans2[q[i].id] = (r - l + <span class="number">1</span>) * (r - l) / <span class="number">2</span>;</span><br><span class="line">    <span class="type">int</span> t = __gcd(ans1[q[i].id], ans2[q[i].id]);</span><br><span class="line">    ans1[q[i].id] /= t;</span><br><span class="line">    ans2[q[i].id] /= t;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">    cout &lt;&lt; ans1[i] &lt;&lt; <span class="string">&#x27;/&#x27;</span> &lt;&lt; ans2[i] &lt;&lt; endl;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="built_in">setIO</span>();</span><br><span class="line">  <span class="type">int</span> tt = <span class="number">1</span>;</span><br><span class="line">  <span class="comment">// cin &gt;&gt; tt;</span></span><br><span class="line">  <span class="keyword">while</span> (tt--) &#123;</span><br><span class="line">    <span class="built_in">solve</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><h2 id="普通莫队的优化"><a href="#普通莫队的优化" class="headerlink" title="普通莫队的优化"></a>普通莫队的优化</h2><h3 id="奇偶排序优化"><a href="#奇偶排序优化" class="headerlink" title="奇偶排序优化"></a>奇偶排序优化</h3><p>对于如下数据：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">设块的大小为2</span><br><span class="line">1 1</span><br><span class="line">2 100</span><br><span class="line">3 1</span><br><span class="line">4 100</span><br></pre></td></tr></table></figure><p>经过排序后的等效数据：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1 1</span><br><span class="line">2 100</span><br><span class="line">3 1</span><br><span class="line">4 100</span><br></pre></td></tr></table></figure><p>手动模拟一下可以发现， 指针的移动次数大概为$ 300 $次，我们处理完第一个<strong>块</strong>之后$(l=2，r=100)$，此时只需要移动2次指针到$l=4, r=100$就可以得到第四个询问的答案，再移动$100$次到$l=3，r=1$就可以得到第三次询问的答案，但是我们却将指针移动$100$次到$l=3，r=1$来获取第三个询问的答案，再移动$100$次到$l=4，r=100$获取第四个询问的答案，这样多了$98$次的指针移动。我们怎么优化这个地方呢？</p><p>这里我们就要用到奇偶化排序。什么是奇偶化排序？奇偶化排序即对于属于奇数块的询问，$r$按从小到大排序，对于属于偶数块的排序，$r$从大到小排序，这样我们的$r$指针在处理完这个奇数块的问题后，将在返回的途中处理偶数块的问题，再向$n$移动处理下一个奇数块的问题，优化了$r$指针的移动次数，理论上能快一倍。</p><p>优化后并排序后的等效数据：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1 1</span><br><span class="line">2 100</span><br><span class="line">4 100</span><br><span class="line">3 1</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span>(q + <span class="number">1</span>, q + m + <span class="number">1</span>, [](<span class="type">const</span> query &amp;lhs, <span class="type">const</span> query &amp;rhs) &#123;</span><br><span class="line">  <span class="keyword">if</span> ((lhs.l - <span class="number">1</span>) / len != (rhs.l - <span class="number">1</span>) / len) &#123;</span><br><span class="line">    <span class="keyword">return</span> lhs.l &lt; rhs.l;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (((lhs.l - <span class="number">1</span>) / len + <span class="number">1</span>) &amp; <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> lhs.r &lt; rhs.r;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> lhs.r &gt; rhs.r;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">cmp</span><span class="params">(node a,node b)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> pos[a.l] ^ pos[b.l] ? pos[a.l] &lt; pos[b.l] : pos[a.l] &amp; <span class="number">1</span> ? a.r &lt; b.r : a.r &gt; b.r;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="块的大小优化"><a href="#块的大小优化" class="headerlink" title="块的大小优化"></a>块的大小优化</h3><p><img src="https://image.lansganbs.cn/3dc519dbaf652671aede8d985a65f0a.png" alt="image-20241230191612258"></p><p>网上大多都说分块大小取$\sqrt{n}$最优，此时时间复杂度为$O(n\sqrt{n})$，实际上这是不严谨的，当$n$，$m$差距较大时使用$\sqrt{n}$作为分块大小效率会明显降低。</p><hr><p>普通莫队时间复杂度的证明：</p><p>具体证明方法有多种：</p><ul><li>第一种（By yihang_01）</li></ul><p><img src="https://image.lansganbs.cn/19bc00440f08e2d1be9e30ffaadb0c9.png" alt=""></p><ul><li>第二种</li></ul><ol><li>排序$O(nlogn)$</li><li><img src="https://image.lansganbs.cn/c92c8a01fd9ddb78df37b912eedbbe7.png" alt=""><br>网页渲染有点问题，所以贴了张图片。</li><li>右端点在一个左端点相同的块内是有序的，那么对于每一个块$i$中的$x_{i}$个区间，右端点最多跳完整的一个序列（就是不会往回跳），一共有 $\sqrt{n}$ 个块，所以总时间复杂度为 $O(n\sqrt{n})$</li></ol><ul><li>第三种</li></ul><p>分块相同时，右端点递增是$O(n)$的，分块共有$O(\sqrt{n})$个，复杂度为$n^{1.5}$</p><p>分块转移时，右端点最多变化$N$，分块共有$O(\sqrt{n})$个，复杂度为$n^{1.5}$</p><p>分块相同时，左端点最多变化$\sqrt{n}$，分块转移时，左端点最多变化$2\sqrt{n}$</p><p>共有$N$个询问，复杂度为$n^{1.5}$</p><p>综上，$n$次询问，长度为$m$，块大小为$\sqrt{m}$的莫队，时间复杂度为$O(n\sqrt{m})$。</p><hr><p>普通莫队最优块长的证明：</p><p>设每一块的大小为$T$，序列长为$n$，询问个数为$m$。</p><p>那么最多有$\frac{n}{T}$块。</p><p>对于右端点的移动，每一块最多移动$n$次，有$\frac{n}{T}$块，所以右端点时间复杂度为$ O\left(\frac{n^2}{T}\right)$。</p><p>对于左端点的移动，每一次最多移动$T$次，有$m$次移动，所以左端点时间复杂度为$O(mT)$。</p><p>那么总时间复杂度为$O\left(\frac{n^2}{T} + mT\right)$。</p><p>设$\frac{n^2}{T} + mT = S$。</p><p>原式等于$n^2 + mT^2 - ST = 0$。</p><p>这样变为一个经典的二次函数求最小值的问题。</p><p>$\Delta = S^2 - 4mn^2 \geq 0$</p><p>为取到最小值，$\Delta = 0$。</p><p>那么$S^2 - 4mn^2 = 0$。</p><p>$S^2 = 4mn^2$</p><p>$S = 2\sqrt{mn}$</p><p>代入回 $x = -\frac{b}{2a} + \frac{\sqrt{\Delta}}{2a}$</p><p>算出 $T = \frac{n}{\sqrt{m}}$</p><h2 id="其他莫队"><a href="#其他莫队" class="headerlink" title="其他莫队"></a>其他莫队</h2><h3 id="带修莫队"><a href="#带修莫队" class="headerlink" title="带修莫队"></a>带修莫队</h3><p>前面说过，普通莫队只能解决没有修改的问题，那么如果想解决修改问题呢？</p><p><a href="https://www.luogu.com.cn/problem/P1903">P1903 [国家集训队] 数颜色 / 维护队列</a></p><p>那就需要带修莫队，带修莫队就是一种支持修改查询的莫队。</p><p>当然，这是一道在线问题，但我们可以把这个在线问题转化为离线问题。</p><p>普通莫队是把点经过排序，下一次询问是从上一次询问转移而来，但是有修改的问题在经过排序后，查询的结果也会随着排序而改变，把所有的修改操作加上一个时间戳 $[l,r,time]$。</p><p>排序规则：第一关键字为左端点所在块 $\frac{l}{B}$，第二关键字为右端点所在块 $\frac{r}{B}$，第三关键字是时间 $t$。</p><p>每次询问先做区间拓展，再考虑时间戳，也就是之前的修改对当次查询的影响。</p><p>(1) $j$ &gt; $i$，则把 $i+1$ 到 $j$ 个修改的贡献加上</p><p>(2) $j$ &lt; $i$，则把 $i$ 到 $j+1$ 个修改的贡献还原</p><h4 id="带修莫队的时间复杂度及最优块长的证明"><a href="#带修莫队的时间复杂度及最优块长的证明" class="headerlink" title="带修莫队的时间复杂度及最优块长的证明"></a>带修莫队的时间复杂度及最优块长的证明</h4><p>块的大小为 $B^{\frac{2}{3}}$,修改个数为 $c$，询问次数为 $q$，则总移动次数为 $O(\frac{cn^{2}}{B^{2}}+qB+\frac{n^{2}}{B})$，操作次数为 $m$ 的话，则为 $O(\frac{mn^{2}}{B^{2}}+mB+\frac{n^{2}}{B})$。</p><p>$B$ 可以取</p><script type="math/tex; mode=display">B=\frac{n^2}{3^{\frac{1}{2}}(9m^3n^2+\sqrt{3}\sqrt{27m^6n^4-m^3n^6})^{\frac{1}{3}}}+ \frac{(9m^3n^2+\sqrt{3}\sqrt{27m^6n^4 - m^3n^6})^{\frac{1}{3}}}{3^{\frac{2}{3}}m}</script><p>正常写题时肯定不会去算这么离谱的一个块长 $B$，直接视作 $n=m$ 的话，就可以得到总移动次数为 $O(\frac{n^{3}}{B^{2}}+nB+\frac{n^{2}}{B})$，那么当 $B=n^{\frac{2}{3}}$ 时，取得最小值，此时最小值为 $O(n^{\frac{5}{3}})$。</p><hr><p>同样，对于最优块长也可以做如下证明：</p><p>可以这么认为，序列的值是随着时间而变化的。</p><p>那我们就在坐标系上再加上一个时间维度，用 $(l,r,t)$ 来表示一个查询</p><p><img src="https://image.lansganbs.cn/d760b75d3c996adfbc90dff45450846.png" alt=""></p><p>很明显，我们需要分别按照l与r分块，在同一块内的询问按照t从小到大完成。块的大小就是 $n^{\frac{2}{3}}$，只是这个粗略得出的块长只是相对优秀的，而不是最优。</p><p>综上，带修莫队的渐进时间复杂度为 $O(nlogn+n^{\frac{5}{3}})$（视作$n=m$），认为是 $O(n^{\frac{5}{3}})$。</p><h4 id="实现过程"><a href="#实现过程" class="headerlink" title="实现过程"></a>实现过程</h4><p>对于询问，我们记录以下值：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">kkk</span> &#123;</span><br><span class="line">  <span class="type">int</span> l;<span class="comment">//左端点</span></span><br><span class="line">  <span class="type">int</span> r;<span class="comment">//右端点</span></span><br><span class="line">  <span class="type">int</span> t;<span class="comment">//此询问前修改数量</span></span><br><span class="line">  <span class="type">int</span> id;<span class="comment">//询问编号</span></span><br><span class="line">&#125;q[N];</span><br></pre></td></tr></table></figure><p>对于修改，我们记录以下值：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ttt</span> &#123;</span><br><span class="line">  <span class="type">int</span> id;<span class="comment">//修改位置</span></span><br><span class="line">  <span class="type">int</span> val;<span class="comment">//修改值</span></span><br><span class="line">&#125;c[N];</span><br></pre></td></tr></table></figure></p><p>将原来值对答案的影响抹去，再将修改值对答案的影响加上，然后更新该位置的值<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> add(x) &#123;</span></span><br><span class="line">  <span class="keyword">if</span>(++vis[x]==<span class="number">1</span>)sum++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> del(x) &#123;</span></span><br><span class="line">  <span class="keyword">if</span>(--vis[x]==<span class="number">0</span>)sum--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">change</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(c[x].id&gt;=l&amp;&amp;c[x].id&lt;=r) &#123;</span><br><span class="line">    <span class="built_in">del</span>(v[c[x].id]);</span><br><span class="line">    <span class="built_in">add</span>(c[x].val);</span><br><span class="line">  &#125;<span class="comment">//改变影响</span></span><br><span class="line">  <span class="built_in">swap</span>(c[x].val,v[c[x].id]);<span class="comment">//值更新 *</span></span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">while</span>(now&lt;q[i].t)<span class="built_in">change</span>(++now);<span class="comment">//修改</span></span><br><span class="line"><span class="keyword">while</span>(now&gt;q[i].t)<span class="built_in">change</span>(now--);<span class="comment">//修改</span></span><br></pre></td></tr></table></figure></p><blockquote><p>这道题能转化为离线的根本原因是这一次的查询并不需要使用上一次的查询结果，只是题目让我们立即返回查询结果，但当次结果只是依赖于之前的修改，而不是依赖于之前的查询，所以我们给修改打上一个时间戳就可以了。</p></blockquote><details class="folding-tag" ><summary> 查看代码 By huangce </summary>              <div class='content'>              <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int ll</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> N = <span class="number">1e6</span> + <span class="number">7</span>;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> M = <span class="number">2e3</span> + <span class="number">7</span>;</span><br><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">int</span> len;</span><br><span class="line"><span class="type">int</span> mq, mr;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">op</span> &#123;</span><br><span class="line">  <span class="type">int</span> l, r;</span><br><span class="line">  <span class="type">int</span> idx, tim;</span><br><span class="line">  <span class="type">bool</span> <span class="keyword">operator</span>&lt;(<span class="type">const</span> op&amp; that) <span class="type">const</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (l / len != that.l / len) <span class="keyword">return</span> l &lt; that.l;</span><br><span class="line">    <span class="keyword">if</span> (r / len != that.r / len) <span class="keyword">return</span> r &lt; that.r;</span><br><span class="line">    <span class="keyword">return</span> tim &lt; that.tim;</span><br><span class="line">  &#125;</span><br><span class="line">&#125; q[N];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">modify</span> &#123;</span><br><span class="line">  <span class="type">int</span> p, c;</span><br><span class="line">&#125; R[N];</span><br><span class="line"><span class="type">int</span> a[N], cnt[N];</span><br><span class="line"><span class="type">int</span> ans[N];</span><br><span class="line"><span class="type">int</span> res;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (cnt[x] == <span class="number">0</span>) res++;</span><br><span class="line">  cnt[x]++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">del</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">  cnt[x]--;</span><br><span class="line">  <span class="keyword">if</span> (cnt[x] == <span class="number">0</span>) res--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">  len = <span class="built_in">pow</span>(n, <span class="number">2.0</span> / <span class="number">3.0</span>);</span><br><span class="line">  <span class="type">int</span> l, r;</span><br><span class="line">  <span class="type">char</span> ch;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    cin &gt;&gt; a[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">    cin &gt;&gt; ch &gt;&gt; l &gt;&gt; r;</span><br><span class="line">    <span class="keyword">if</span> (ch == <span class="string">&#x27;Q&#x27;</span>)</span><br><span class="line">      q[++mq] = &#123;l, r, mq, mr&#125;;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      R[++mr] = &#123;l, r&#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">sort</span>(q + <span class="number">1</span>, q + <span class="number">1</span> + mq);</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>, l = <span class="number">1</span>, r = <span class="number">0</span>, x = <span class="number">0</span>; i &lt;= mq; i++) &#123;</span><br><span class="line">    <span class="keyword">while</span> (q[i].l &lt; l) <span class="built_in">add</span>(a[--l]);</span><br><span class="line">    <span class="keyword">while</span> (r &lt; q[i].r) <span class="built_in">add</span>(a[++r]);</span><br><span class="line">    <span class="keyword">while</span> (l &lt; q[i].l) <span class="built_in">del</span>(a[l++]);</span><br><span class="line">    <span class="keyword">while</span> (q[i].r &lt; r) <span class="built_in">del</span>(a[r--]);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 时间戳</span></span><br><span class="line">    <span class="comment">// 要将 a[pos] 和 R[x].c 交换，而不能用其他变量代替，因为需要来回滚动</span></span><br><span class="line">    <span class="keyword">while</span> (x &lt; q[i].tim) &#123;</span><br><span class="line">      ++x;  <span class="comment">// 先加</span></span><br><span class="line">      <span class="type">int</span> pos = R[x].p;</span><br><span class="line">      <span class="comment">// 修改数在区间内</span></span><br><span class="line">      <span class="keyword">if</span> (l &lt;= pos &amp;&amp; pos &lt;= r) &#123;</span><br><span class="line">        <span class="built_in">add</span>(R[x].c);</span><br><span class="line">        <span class="built_in">del</span>(a[pos]);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">swap</span>(a[pos], R[x].c);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (x &gt; q[i].tim) &#123;</span><br><span class="line">      <span class="type">int</span> pos = R[x].p;</span><br><span class="line">      <span class="keyword">if</span> (l &lt;= pos &amp;&amp; pos &lt;= r) &#123;</span><br><span class="line">        <span class="built_in">add</span>(R[x].c);</span><br><span class="line">        <span class="built_in">del</span>(a[pos]);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">swap</span>(a[pos], R[x].c);</span><br><span class="line">      x--;  <span class="comment">// 后减</span></span><br><span class="line">    &#125;</span><br><span class="line">    ans[q[i].idx] = res;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= mq; i++) &#123;</span><br><span class="line">    cout &lt;&lt; ans[i] &lt;&lt; endl;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  ios::<span class="built_in">sync_with_stdio</span>(<span class="number">0</span>);</span><br><span class="line">  cin.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">  cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="type">int</span> T = <span class="number">1</span>;  <span class="comment">// cin&gt;&gt;T;</span></span><br><span class="line">  <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">    <span class="built_in">solve</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><h3 id="回滚莫队"><a href="#回滚莫队" class="headerlink" title="回滚莫队"></a>回滚莫队</h3><p>当删除或增加的其中一个在操作时，不能或者不方便统计答案时，可以尝试使用回滚莫队解决。</p><p>原题链接</p><p><a href="https://www2.ioi-jp.org/camp/2014/2014-sp-tasks/2014-sp-d1.pdf">歴史の研究(Historical Research)</a></p><p><a href="https://www2.ioi-jp.org/camp/2014/2014-sp-tasks/index.html">第１３回日本情報オリンピック　春季トレーニング合宿</a></p><p>zh-CN链接</p><p><a href="https://vjudge.net/contest/603288#problem/K">歴史の研究</a></p><h4 id="实现过程-1"><a href="#实现过程-1" class="headerlink" title="实现过程"></a>实现过程</h4><ol><li>对于左右端点在同一块的暴力计算。</li><li>跟普通莫队一样排序，左端点换块时清空答案，把左指针设为左端点所在块的下一块的开头，把右指针设为左端点所在块的最后一位。这样右指针是单调递增的，每处理一个询问时，先记录一些信息（比如答案），再左移左指针并更新答案，然后把左指针移回左端点所在块的下一块的开头，过程中回滚除记录下的信息以外的其它影响，最后把记录下的信息恢复。如：先右移右指针，再记录 $ans$，然后左移左指针时增加 $cnt$ 并更新 $ans$，回滚时把增加的 $cnt$ 减掉，最后把 $ans$ 回滚为记录的值。</li></ol><details class="folding-tag" ><summary> 查看代码 By yihang_01 </summary>              <div class='content'>              <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> ONLINE_JUDGE</span></span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">7</span>;</span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> N = <span class="number">1e3</span> + <span class="number">7</span>;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m, a[N], len, cnt1[N], cnt2[N], ans[N], st[N], ed[N], id[N], b[N], p;<span class="comment">//cnt1 为统计数字个数的桶，cnt2 为处理暴力结果的桶，ans 为答案数组，b 为离散化后的数组，p 为离散化后的数组长度</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">query</span> &#123;</span><br><span class="line">    <span class="type">int</span> l, r, id;</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span>&lt;(<span class="type">const</span> query &amp;rhs) <span class="type">const</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (::id[l] != ::id[rhs.l]) <span class="keyword">return</span> l &lt; rhs.l;</span><br><span class="line">        <span class="keyword">return</span> r &lt; rhs.r;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; q[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> &amp;tmp)</span> </span>&#123;</span><br><span class="line">    ++cnt1[x];</span><br><span class="line">    tmp = <span class="built_in">max</span>(tmp, cnt1[x] * b[x]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">del</span><span class="params">(<span class="type">int</span> x)</span> </span>&#123; --cnt1[x]; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    len = <span class="built_in">sqrt</span>(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        cin &gt;&gt; a[i];</span><br><span class="line">        b[i] = a[i];</span><br><span class="line">        id[i] = (i - <span class="number">1</span>) / len + <span class="number">1</span>;</span><br><span class="line">        st[i] = (id[i] - <span class="number">1</span>) * len + <span class="number">1</span>;</span><br><span class="line">        ed[i] = <span class="built_in">min</span>(id[i] * len, n);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++) &#123;</span><br><span class="line">        cin &gt;&gt; q[i].l &gt;&gt; q[i].r;</span><br><span class="line">        q[i].id = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sort</span>(q + <span class="number">1</span>, q + m + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 离散化</span></span><br><span class="line">    <span class="built_in">sort</span>(b + <span class="number">1</span>, b + n + <span class="number">1</span>);</span><br><span class="line">    p = <span class="built_in">unique</span>(b + <span class="number">1</span>, b + n + <span class="number">1</span>) - b - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        a[i] = <span class="built_in">lower_bound</span>(b + <span class="number">1</span>, b + p + <span class="number">1</span>, a[i]) - b;<span class="comment">//a 数组现在存放的是离散化后的值</span></span><br><span class="line">    <span class="type">int</span> now = <span class="number">0</span>, last = <span class="number">0</span>, lstl = <span class="number">0</span>, tmp = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>, l = <span class="number">1</span>, r = <span class="number">0</span>; i &lt;= m; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (id[q[i].l] == id[q[i].r]) &#123;  <span class="comment">// 左右区间属于同一块则进行暴力处理答案</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = q[i].l; j &lt;= q[i].r; j++) ++cnt2[a[j]];</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = q[i].l; j &lt;= q[i].r; j++)</span><br><span class="line">                ans[q[i].id] = <span class="built_in">max</span>(ans[q[i].id], cnt2[a[j]] * b[a[j]]);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = q[i].l; j &lt;= q[i].r; j++) --cnt2[a[j]];</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 访问到了新的块，先把上一个块的答案清空</span></span><br><span class="line">        <span class="keyword">if</span> (id[q[i].l] != last) &#123;           </span><br><span class="line">            <span class="keyword">while</span> (r &gt; ed[q[i].l]) <span class="built_in">del</span>(a[r--]);   <span class="comment">// 右指针移至上一个区间的右端点</span></span><br><span class="line">            <span class="keyword">while</span> (l &lt;= ed[q[i].l]) <span class="built_in">del</span>(a[l++]);  <span class="comment">// 左指针右移至下一个区间的左端点</span></span><br><span class="line">            tmp = <span class="number">0</span>;</span><br><span class="line">            last = id[q[i].l];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 扩展右指针</span></span><br><span class="line">        <span class="keyword">while</span> (r &lt; q[i].r) <span class="built_in">add</span>(a[++r], tmp);</span><br><span class="line">        lstl = l;  <span class="comment">// 准确来说 l 才是原先的左指针</span></span><br><span class="line">        now = tmp;  <span class="comment">// 非常重要</span></span><br><span class="line">        <span class="comment">// 扩展左指针</span></span><br><span class="line">        <span class="keyword">while</span> (lstl &gt; q[i].l) <span class="built_in">add</span>(a[--lstl], now);</span><br><span class="line">        ans[q[i].id] = now;</span><br><span class="line">        <span class="comment">// 回滚左指针</span></span><br><span class="line">        <span class="keyword">while</span> (lstl &lt; l) <span class="built_in">del</span>(a[lstl++]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++) cout &lt;&lt; ans[i] &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="number">0</span>);</span><br><span class="line">    cin.<span class="built_in">tie</span>(<span class="literal">NULL</span>);</span><br><span class="line">    cout.<span class="built_in">tie</span>(<span class="literal">NULL</span>);</span><br><span class="line">    <span class="type">int</span> T = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// cin&gt;&gt;T;</span></span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// system(&quot;pause&quot;);</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><h3 id="树上莫队"><a href="#树上莫队" class="headerlink" title="树上莫队"></a>树上莫队</h3><p>莫队算法的出现正是为了解决部分数据结构相关问题而存在，当然可以上树。</p><p><a href="https://www.luogu.com.cn/problem/P2325">P2325 [SCOI2005] 王室联邦</a>这道题目可以说是专为树上莫队设计的题目。</p><h4 id="分块方式"><a href="#分块方式" class="headerlink" title="分块方式"></a>分块方式</h4><p>这里提供一种构造方式，证明略。</p><p>dfs，并创建一个栈，dfs一个点时先记录初始栈顶高度，每dfs完当前节点的一棵子树就判断栈内（相对于刚开始dfs时）新增节点的数量是否≥B，是则将栈内所有新增点分为同一块，核心点为当前dfs的点，当前节点结束dfs时将当前节点入栈，整个dfs结束后将栈内所有剩余节点归入已经分好的最后一个块。</p><details class="folding-tag" ><summary> 查看代码 </summary>              <div class='content'>              <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">auto</span> dfs = [&amp;](<span class="keyword">auto</span> &amp;&amp;self, <span class="keyword">auto</span> u, <span class="keyword">auto</span> fa) -&gt; <span class="keyword">auto</span> &#123;</span><br><span class="line">    <span class="type">int</span> t = top;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = head[u]; i; i = nxt[i]) &#123;</span><br><span class="line">      <span class="type">int</span> v = to[i];</span><br><span class="line">      <span class="keyword">if</span> (v != fa) &#123;</span><br><span class="line">        <span class="built_in">dfs</span>(v, u);</span><br><span class="line">        <span class="keyword">if</span> (top - t &gt;= B) &#123;</span><br><span class="line">          key[++tot] = u;</span><br><span class="line">          <span class="keyword">while</span> (top &gt; t) bl[stk[top--]] = tot;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    stk[++top] = u;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="built_in">dfs</span>(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">  <span class="keyword">if</span> (!tot) ++tot;</span><br><span class="line">  key[tot] = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">while</span> (top) bl[stk[top--]] = tot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><p>lambda函数原本是不支持递归的，但是有几种方法使其支持递归：</p><ol><li><p>传入参数 auto &amp;&amp;self 如 <code>auto dfs = [&amp;](auto &amp;&amp;self, auto u, auto fa) -&gt; auto</code> 递归时使用self递归</p></li><li><p>采用匿名函数 如 <code>function&lt;void(int,int)&gt; dfs = [&amp;](auto u,auto fa) -&gt; auto</code> 递归时使用原函数名递归</p></li><li><p>采用Deducing this特性 如 <code>auto dfs = [&amp;] self(auto u, auto fa) -&gt; auto</code> 递归时使用self名递归</p></li></ol><p>为什么lambda自身在定义时无法被调用</p><ol><li><p>匿名性：Lambda 表达式是匿名的，编译器在定义时不为其生成名称，因此无法在其内部直接引用或调用自己。</p></li><li><p>捕获和名称：在 lambda 定义时，虽然可以捕获外部变量，但不能直接引用自身，因为 lambda 的名字在定义时尚未确定。</p></li></ol><blockquote><p>auto dfs = … 的写法只是将一个 Lambda 表达式赋值给名为dfs的变量，并没有定义一个真正的命名函数。它本质上是一个匿名函数，只是通过auto dfs来保存该变量，而非声明了一个具名函数。</p></blockquote><h4 id="修改方式"><a href="#修改方式" class="headerlink" title="修改方式"></a>修改方式</h4><p>所谓“修改”，就是由询问 $(cu, cv)$ 更新至询问 $(tu, tv)$。</p><p>如果把两条路径上的点全部修改，复杂度是和暴力一样的，所以需要做一些处理。</p><p>$T(u, v)$ 表示 $u$ 到 $v$ 的路径上除 $lca(u, v)$ 外的所有点构成的集合，$S(u, v)$ 代表$u$ 到$v$的路径，$xor$表示集合对称差（就跟异或差不多）。</p><ol><li>两个指针 $cu, cv$（相当于序列队的 $l, r$ 两个指针），$ans$ 记录 $T(cu, cv)$ 的答案，$vis$ 数组记录每个节点是否在 $T(cu, cv)$内。</li><li>由 $T(cu, cv)$ 更新至 $T(tu, tv)$ 时，将 $T(cu, tu)$和 $T(cv, tv)$的 $vis$分别取反，并相应地更新答案。</li><li>将答案记录到 $out$ 数组（离线后用于输出那个）时对 $lca(cu, cv)$（此时的 $cu, cv$ 已更新为上一步中的 $tu, tv$）的 $vis$ 取反并更新答案，记录完再改回来（因为 $lca$ 处理比较麻烦，这样搞比较方便）。</li></ol><p>$ T(cu, cv) \oplus T(tu, tv)$</p><p>$ = (S(cu, root) \oplus S(cv, root)) \oplus (S(tu, root) \oplus S(tv, root))$</p><p>$= (S(cu, root) \oplus S(tu, root)) \oplus (S(cv, root) \oplus S(tv, root))$</p><p>$= T(cu, tu) \oplus T(cv, tu)$</p><p>之所以要把 $T(cu, cv) \oplus T(tu, tv)$ 转化成 $T(cu, tu) \oplus T(cv, tu)$，是因为这样的话就能通过对询问排序来保证复杂度。排序方式就是以$u$所在块编号为第一关键字，$v$ 的编号为第二关键字排序。如果结合了带修莫队，就还要以时间为第三关键字。</p><h4 id="时间复杂度-1"><a href="#时间复杂度-1" class="headerlink" title="时间复杂度"></a>时间复杂度</h4><p>不带修：$O(n\sqrt{m})$，带修：$O(n^{\frac{5}{3}})$</p><p><a href="https://uoj.ac/problem/58">#58. 【WC2013】糖果公园</a></p><h3 id="莫队的在线化改造"><a href="#莫队的在线化改造" class="headerlink" title="莫队的在线化改造"></a>莫队的在线化改造</h3><p><a href="https://www.luogu.com.cn/problem/P1903">P1903 [国家集训队] 数颜色 / 维护队列</a></p><p>上面这道题做如下修改：</p><ul><li>在读入每个更新操作的位置 $P$ 时，把 $P$ 用上一次 $Query$ 的答案进行异或后再得到真正的 $P$。</li></ul><p>有了这个背景，就能更清楚的理解为什么原题可以改造为离线了，而这道修改后的题目不可以。正因为每次修改操作紧密联系于上一次查询操作，必须真的按照题目的要求“立即输出查询结果”才能进行此次修改，而原题可以假的“立即输出”。如果把这道题强行加上时间戳，如果经过排序后第 $1$ 个修改操作是原来的第 $99$ 个修改，那此次操作需要用到第 $98$ 行的查询结果（假设输入为一行修改+一行查询），而想要得到 $98$ 行的查询结果，有需要用到 $97$ 行的修改，反复套娃，这个排序不如不排，时间复杂度直接变为 $O(n^{2})$。</p><p>所以这下真的变成在线了，不能用莫队了。</p><p>但我相信大家是不会使用Spaly/Fenwick/Segt（可能是主席树）来做这道题的（以上均为口胡，没写过）。</p><p>不，这道题还可以使用莫队，我们可以强行来用莫队，进行莫队的在线化改造！</p><h4 id="普通莫队的在线化改造"><a href="#普通莫队的在线化改造" class="headerlink" title="普通莫队的在线化改造"></a>普通莫队的在线化改造</h4><h5 id="在线化改造的关键"><a href="#在线化改造的关键" class="headerlink" title="在线化改造的关键"></a>在线化改造的关键</h5><p>我们都知道，普通的莫队算法会先把所有查询离线排好序，然后通过“从上一个查询区间转移到下一个区间”的方式来快速计算答案。</p><p>但如果我们想把莫队算法“在线化”，就不能简单地从上一个查询区间直接转移。为应对这种情况，可以先挑选出一些特别的区间作为“特征区间”，并处理这些特征区间的答案，让这些区间成为莫队中的“上一个区间”，在线查询就能从相应的特征区间“跳转”过来。  </p><h5 id="特征区间的要求"><a href="#特征区间的要求" class="headerlink" title="特征区间的要求"></a>特征区间的要求</h5><ol><li>这些特征区间的所有信息，必须能在可接受的时间复杂度内全部算出来。  </li><li>对于任意一个真实查询，都能在合适的时间内从某个特征区间转移过来。</li></ol><h5 id="选取特征点"><a href="#选取特征点" class="headerlink" title="选取特征点"></a>选取特征点</h5><p>假设我们在序列中每隔 $d$ 步选一个“特征点”，并且把任意两个特征点之间的区间都做成特征区间。  </p><ul><li>这样，预处理时的复杂度大约是 $O(\frac{n^{2}}{d})$。  </li><li>当处理一个真实查询时，如果只要移动区间的左右端点分别不超过 $\frac{d}{2}$ 步，那么就能从相应的特征区间转移到真实查询的区间，花费 $O(d)$ 的时间。</li><li>可以证明 $d=\sqrt{n}$ 最优。</li></ul><h5 id="保存特征区间信息"><a href="#保存特征区间信息" class="headerlink" title="保存特征区间信息"></a>保存特征区间信息</h5><p>为了在后来能够复用特征区间的信息，需要记录下：  </p><ul><li>特征区间的答案本身。  </li><li>莫队所需的辅助信息，比如每种颜色在区间内出现的次数等（常见于莫队中统计出现频次的需求），往往是几个数组。</li></ul><p>直接记住所有特征区间的完整信息可能会占用过多的空间导致爆空间。绝大多数莫队所需要的数据都具有“可减”性质（例如出现次数可以通过增减来实现维护），所以我们只需要把 $[1, s_{i}]$ 这前缀范围的信息保存起来，需要时再用前缀和或加减方法获得目标区间的数据。</p><h5 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h5><ol><li>先对所有特征区间做预处理，存下它们的答案和辅助信息。  </li><li>当真正查询出现时，先找到“最近”的特征区间，再通过不超过 $\frac{d}{2}$ 步的端点移动，将这个特征区间调整到查询所需的区间，并得出结果。</li></ol><p>这样一来，就能把原本只能离线处理的莫队，做成一个“在线化”的版本，成功实现了莫队的在线化改造。</p><h4 id="带修莫队的在线化改造"><a href="#带修莫队的在线化改造" class="headerlink" title="带修莫队的在线化改造"></a>带修莫队的在线化改造</h4><p>普通莫队的改造中提到的特征区间预处理只是个常见的小技巧，但需要在预处理阶段对所有特征区间的答案和信息进行保存，这让我们在支持修改时很麻烦。</p><p>回顾带修莫队做法：在每次查询前，先把修改操作处理到当前时间，维护相关结构后再进行查询。此时常见的数据结构（如线段树）通常是“懒标记”地处理修改，只有在真正需要的时候才更新。</p><p>本算法则类似：</p><ol><li>我们仍然划分特征区间，并在预处理时保存中间信息，但在执行修改时不直接更新特征区间的答案，仅更新莫队维护的核心信息（如颜色出现次数等）即可。  </li><li>询问发生时，如果特征区间的答案早就过期（上次更新时间小于当前时间），就先更新它，再从这个特征区间转移到目标区间并得到正确答案。  </li><li>由于莫队在维护中间信息时是最新的，所以真正计算答案时要“反向”更新，以保证最终求得的是当前正确结果。</li></ol><h5 id="时间复杂度分析"><a href="#时间复杂度分析" class="headerlink" title="时间复杂度分析"></a>时间复杂度分析</h5><ul><li>若 $d=n^{\frac{2}{3}}$，则选取的特征点有 $O(n^{\frac{1}{3}})$ 个。  </li><li>每次修改若强行更新所有预处理区间会导致极高复杂度，所以采用“懒更新”方式，仅在需要时才刷新对应区间的答案。  </li><li>总整体复杂度约为 $O(n^{\frac{5}{3}})$，与带修莫队相当，但原则上不会达到最坏情况。</li></ul><h5 id="实现步骤简要"><a href="#实现步骤简要" class="headerlink" title="实现步骤简要"></a>实现步骤简要</h5><ol><li>预处理：计算并存下所有特征区间的答案 + 中间信息  </li><li>修改：只更新莫队中间状态，不更新特征区间答案  </li><li>查询：  <ul><li>若特征区间答案过期，先更新</li><li>再用不超过 $\frac{d}{2}$ 次移动，将特征区间扩展/收缩到查询区间，输出结果</li></ul></li></ol><h5 id="时空复杂度的分析"><a href="#时空复杂度的分析" class="headerlink" title="时空复杂度的分析"></a>时空复杂度的分析</h5><p>在普通莫队基础上做在线化改造，时间复杂度保持不变，但会额外消耗 $O(n)$ 的空间；在带修莫队基础上做改造，时间复杂度也与带修莫队相同，但需要额外 $O(n^{\frac{1}{3}})$ 的空间。尽管改造过程只需“向前修改”，常数因素仍会导致实际运行效率与原带修莫队相差不大。</p><details class="folding-tag" ><summary> 查看代码 </summary>              <div class='content'>              <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MAXN = <span class="number">50050</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> BLNB = <span class="number">550</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> COL = <span class="number">1000050</span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">read</span><span class="params">(<span class="type">int</span> &amp;x)</span> </span>&#123;</span><br><span class="line">  <span class="type">char</span> ch;</span><br><span class="line">  <span class="keyword">while</span> (ch = <span class="built_in">getchar</span>(), ch &lt; <span class="string">&#x27;!&#x27;</span>);</span><br><span class="line">  x = ch - <span class="number">48</span>;</span><br><span class="line">  <span class="keyword">while</span> (ch = <span class="built_in">getchar</span>(), ch &gt; <span class="string">&#x27;!&#x27;</span>) x = (x &lt;&lt; <span class="number">3</span>) + (x &lt;&lt; <span class="number">1</span>) + ch - <span class="number">48</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> target[MAXN];</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Change</span> &#123;</span><br><span class="line">  <span class="type">int</span> p, col, las;</span><br><span class="line">&#125; change[MAXN];</span><br><span class="line"><span class="type">int</span> nc, n, m, mp[COL], tot, D, cnt[BLNB][MAXN * <span class="number">2</span>], c[MAXN], blnm, spe[BLNB];</span><br><span class="line"><span class="type">int</span> CNT[MAXN * <span class="number">2</span>], ans[BLNB][BLNB], ima, tim[BLNB][BLNB], id[MAXN];</span><br><span class="line"><span class="comment">// 细节：我们不能直接在cnt[][]上做更改，所以需要记录一个临时的变化量数组CNT[]</span></span><br><span class="line"><span class="comment">// 变量解释：nc表示当前时间，mp[]和tot是离散化用的，D表示特征点步长，cnt[][]是预处理的莫队信息，id[]记录下标为i的特征点是第几个特征点，spe[]用于存储所有的特征点下标，ans[][]表示特征区间的答案，tim[][]记录答案的上一次更新时间，target[]表示离位置i最近的特征点坐标。</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">getc</span><span class="params">(<span class="type">int</span> sl, <span class="type">int</span> sr, <span class="type">int</span> p)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (sl == <span class="number">0</span> &amp;&amp; sr == <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (c[sl] == p)</span><br><span class="line">      <span class="keyword">return</span> cnt[id[sr]][p] - cnt[id[sl]][p] + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="keyword">return</span> cnt[id[sr]][p] - cnt[id[sl]][p];</span><br><span class="line">  &#125;  <span class="comment">// 细节：端点特判一下</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 函数作用：读取区间[sl,sr]中的莫队数组信息。</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">del</span><span class="params">(<span class="type">int</span> pos, <span class="type">int</span> sl, <span class="type">int</span> sr)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> ((--CNT[c[pos]]) + <span class="built_in">getc</span>(sl, sr, c[pos]) == <span class="number">0</span>) --ima;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> pos, <span class="type">int</span> sl, <span class="type">int</span> sr)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> ((++CNT[c[pos]]) + <span class="built_in">getc</span>(sl, sr, c[pos]) == <span class="number">1</span>) ++ima;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="built_in">read</span>(n);</span><br><span class="line">  <span class="built_in">read</span>(m);</span><br><span class="line">  D = <span class="built_in">pow</span>(n, <span class="number">2.0</span> / <span class="number">3</span>);  <span class="comment">// 带修莫队的块大小</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">    <span class="built_in">read</span>(c[i]);</span><br><span class="line">    <span class="keyword">if</span> (!mp[c[i]])</span><br><span class="line">      c[i] = mp[c[i]] = ++tot;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      c[i] = mp[c[i]];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="type">int</span> tmp = <span class="number">1</span>;</span><br><span class="line">  spe[blnm = <span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">  id[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">    <span class="keyword">if</span> (i - tmp == D) tmp = i, spe[++blnm] = i, id[i] = blnm;</span><br><span class="line">    target[i] = tmp;</span><br><span class="line">  &#125;  <span class="comment">// 预处理特征点以及每个点对应的离它最近的特征点</span></span><br><span class="line">  <span class="type">int</span> p = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">    ++CNT[c[i]];</span><br><span class="line">    <span class="keyword">if</span> (i == spe[p]) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; ++j) cnt[p][j] = CNT[j];</span><br><span class="line">      ++p;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;  <span class="comment">// 预处理莫队所需信息</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= blnm; ++i) &#123;</span><br><span class="line">    <span class="type">int</span> p = i + <span class="number">1</span>;</span><br><span class="line">    ima = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">memset</span>(CNT, <span class="number">0</span>, <span class="keyword">sizeof</span> CNT);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = spe[i]; j &lt;= n; ++j) &#123;</span><br><span class="line">      <span class="keyword">if</span> ((++CNT[c[j]]) == <span class="number">1</span>) ++ima;</span><br><span class="line">      <span class="keyword">if</span> (j == spe[p]) &#123;</span><br><span class="line">        ans[i][p] = ima;</span><br><span class="line">        ++p;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;  <span class="comment">// 预处理特征区间答案</span></span><br><span class="line">  <span class="built_in">memset</span>(CNT, <span class="number">0</span>, <span class="keyword">sizeof</span> CNT);</span><br><span class="line">  <span class="keyword">while</span> (m--) &#123;</span><br><span class="line">    <span class="type">char</span> opt;</span><br><span class="line">    <span class="type">int</span> l, r;</span><br><span class="line">    ima = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (opt = <span class="built_in">getchar</span>(), opt != <span class="string">&#x27;Q&#x27;</span> &amp;&amp; opt != <span class="string">&#x27;R&#x27;</span>);</span><br><span class="line">    <span class="built_in">read</span>(l);</span><br><span class="line">    <span class="built_in">read</span>(r);</span><br><span class="line">    <span class="keyword">if</span> (opt == <span class="string">&#x27;R&#x27;</span>) &#123;</span><br><span class="line">      change[++nc].p = l;</span><br><span class="line">      <span class="keyword">if</span> (!mp[r])</span><br><span class="line">        r = mp[r] = ++tot;</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        r = mp[r];</span><br><span class="line">      change[nc].col = r;</span><br><span class="line">      change[nc].las = c[l];</span><br><span class="line">      <span class="type">int</span> p = blnm;</span><br><span class="line">      <span class="keyword">for</span> (; spe[p] &gt;= l; --p)</span><br><span class="line">        --cnt[p][c[l]], ++cnt[p][r];  <span class="comment">// 修改中间过程的信息</span></span><br><span class="line">      c[l] = r;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="type">int</span> sl = target[l], sr = target[r];</span><br><span class="line">      <span class="type">int</span> SL = sl, SR = sr;</span><br><span class="line">      <span class="comment">// sl、sr表示所需特征区间的左右端点。</span></span><br><span class="line">      <span class="keyword">if</span> (sl == sr) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = l; i &lt;= r; ++i)</span><br><span class="line">          <span class="keyword">if</span> (++CNT[c[i]] == <span class="number">1</span>) ++ima;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ima);  <span class="comment">// 细节：区间左右端点所属特征点相同，暴力计算</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = l; i &lt;= r; ++i) --CNT[c[i]];</span><br><span class="line">        <span class="comment">// 临时数组还原</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> t = nc; t &gt; tim[id[sl]][id[sr]]; --t) &#123;</span><br><span class="line">          <span class="keyword">if</span> (sl &lt;= change[t].p &amp;&amp; change[t].p &lt;= sr) &#123;</span><br><span class="line">            <span class="keyword">if</span> (++CNT[change[t].las] + <span class="built_in">getc</span>(sl, sr, change[t].las) == <span class="number">1</span>)</span><br><span class="line">              --ans[id[sl]][id[sr]];</span><br><span class="line">            <span class="keyword">if</span> (--CNT[change[t].col] + <span class="built_in">getc</span>(sl, sr, change[t].col) == <span class="number">0</span>)</span><br><span class="line">              ++ans[id[sl]][id[sr]];</span><br><span class="line">            <span class="comment">// 反向计算答案，即把原来带修莫队的东西反过来写，详情可以参考题解里普通带修莫队的修改方式做对照。</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> t = nc; t &gt; tim[id[sl]][id[sr]]; --t)</span><br><span class="line">          <span class="keyword">if</span> (sl &lt;= change[t].p &amp;&amp; change[t].p &lt;= sr) &#123;</span><br><span class="line">            --CNT[change[t].las];</span><br><span class="line">            ++CNT[change[t].col];</span><br><span class="line">          &#125;</span><br><span class="line">        <span class="comment">// 临时数组还原</span></span><br><span class="line">        tim[id[sl]][id[sr]] = nc;</span><br><span class="line">        ima = ans[id[sl]][id[sr]];</span><br><span class="line">        <span class="keyword">while</span> (sl &lt; l) <span class="built_in">del</span>(sl++, SL, SR);</span><br><span class="line">        <span class="keyword">while</span> (sl &gt; l) <span class="built_in">add</span>(--sl, SL, SR);</span><br><span class="line">        <span class="keyword">while</span> (sr &lt; r) <span class="built_in">add</span>(++sr, SL, SR);</span><br><span class="line">        <span class="keyword">while</span> (sr &gt; r) <span class="built_in">del</span>(sr--, SL, SR);</span><br><span class="line">        <span class="comment">// 可爱的四句莫队</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ima);</span><br><span class="line">        <span class="keyword">while</span> (SL &lt; l) <span class="built_in">add</span>(SL++, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">while</span> (SL &gt; l) <span class="built_in">del</span>(--SL, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">while</span> (SR &lt; r) <span class="built_in">del</span>(++SR, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">while</span> (SR &gt; r) <span class="built_in">add</span>(SR--, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="comment">// 临时数组还原</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><p>当然上述代码解决的只是<a href="https://www.luogu.com.cn/problem/P1903">P1903 [国家集训队] 数颜色 / 维护队列</a>原问题，只是我们自己强制自己把这道题写成了在线莫队。</p><p>实际上一些问题是强制在线的，不像P1903一样可以转化为离线问题，这时在线莫队就显得尤为重要，可以用相对简单的在线莫队解决相对困难的问题，比如树套树，主席树，Fenwike等等需要高级DS的问题。</p><p>具体可以看一下这道题<a href="https://www.luogu.com.cn/problem/U540166">U540166 【模板】诗乃莫队</a></p><details class="folding-tag" ><summary> 查看代码 </summary>              <div class='content'>              <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="comment">// #include &lt;bits/extc++.h&gt;</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">// using namespace __gnu_pbds;</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ture true</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> flase false</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pow power</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> all(x) begin(x), end(x)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mem(a, x) memset(a, x, sizeof(a))</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> gcd(a, b) gcdint(a, b)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lcm(a, b) (a / gcd(a, b) * b)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> sz(x) (int)x.size()</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lowbit(x) (x &amp; -x)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> time(a, b) (abs((b - a) / CLOCKS_PER_SEC))</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> EPS 1e-7</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int ll</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> i64 long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> i128 __int128</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fr first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> sc second</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> tcT template &lt;class T</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> tcTU tcT, class U</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">unsyncIO</span><span class="params">()</span> </span>&#123; cin.<span class="built_in">tie</span>(<span class="number">0</span>)-&gt;<span class="built_in">sync_with_stdio</span>(<span class="number">0</span>); &#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setPrec</span><span class="params">()</span> </span>&#123; cout &lt;&lt; fixed &lt;&lt; <span class="built_in">setprecision</span>(<span class="number">15</span>); &#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setIO</span><span class="params">()</span> </span>&#123; <span class="built_in">unsyncIO</span>(), <span class="built_in">setPrec</span>(); &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">gcdint</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; <span class="keyword">return</span> b ? <span class="built_in">gcdint</span>(b, a % b) : a; &#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> i128 <span class="title">gcd128</span><span class="params">(i128 a, i128 b)</span> </span>&#123; <span class="keyword">return</span> b ? <span class="built_in">gcd128</span>(b, a % b) : a; &#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">cdiv</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; <span class="keyword">return</span> a / b + ((a ^ b) &gt; <span class="number">0</span> &amp;&amp; a % b); &#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">fdiv</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; <span class="keyword">return</span> a / b - ((a ^ b) &lt; <span class="number">0</span> &amp;&amp; a % b); &#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; <span class="keyword">using</span> V = vector&lt;T&gt;;</span><br><span class="line">tcTU &gt; <span class="keyword">using</span> PR = pair&lt;T, U&gt;;</span><br><span class="line">tcTU &gt; <span class="keyword">using</span> MP = map&lt;T, U&gt;;</span><br><span class="line">tcTU &gt; <span class="keyword">using</span> VP = vector&lt;pair&lt;T, U&gt;&gt;;</span><br><span class="line">tcT &gt; <span class="keyword">using</span> pqg = priority_queue&lt;T, vector&lt;T&gt;, greater&lt;T&gt;&gt;;</span><br><span class="line">tcT &gt; <span class="keyword">using</span> pql = priority_queue&lt;T, vector&lt;T&gt;, less&lt;T&gt;&gt;;</span><br><span class="line"></span><br><span class="line">tcTU &gt; istream &amp;<span class="keyword">operator</span>&gt;&gt;(istream &amp;in, pair&lt;T, U&gt; &amp;a) &#123;</span><br><span class="line">  <span class="keyword">return</span> in &gt;&gt; a.first &gt;&gt; a.second;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; istream &amp;<span class="keyword">operator</span>&gt;&gt;(istream &amp;in, vector&lt;T&gt; &amp;a) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;x : a) &#123;</span><br><span class="line">    in &gt;&gt; x;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> in;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; ostream &amp;<span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, <span class="type">const</span> pair&lt;T, U&gt; &amp;a) &#123;</span><br><span class="line">  <span class="keyword">return</span> out &lt;&lt; a.first &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; a.second;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; ostream &amp;<span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, <span class="type">const</span> vector&lt;pair&lt;T, U&gt;&gt; &amp;a) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;x : a) &#123;</span><br><span class="line">    out &lt;&lt; x &lt;&lt; endl;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; ostream &amp;<span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, <span class="type">const</span> vector&lt;T&gt; &amp;a) &#123;</span><br><span class="line">  <span class="type">int</span> n = a.<span class="built_in">size</span>();</span><br><span class="line">  <span class="keyword">if</span> (!n) &#123;</span><br><span class="line">    <span class="keyword">return</span> out;</span><br><span class="line">  &#125;</span><br><span class="line">  out &lt;&lt; a[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">    out &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; a[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">std::ostream &amp;<span class="keyword">operator</span>&lt;&lt;(std::ostream &amp;os, i128 n) &#123;</span><br><span class="line">  std::string s;</span><br><span class="line">  <span class="keyword">while</span> (n) &#123;</span><br><span class="line">    s += <span class="string">&#x27;0&#x27;</span> + n % <span class="number">10</span>;</span><br><span class="line">    n /= <span class="number">10</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  std::<span class="built_in">reverse</span>(s.<span class="built_in">begin</span>(), s.<span class="built_in">end</span>());</span><br><span class="line">  <span class="keyword">return</span> os &lt;&lt; s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">power</span><span class="params">(<span class="type">int</span> a, i64 b, <span class="type">int</span> p = <span class="number">1e9</span> + <span class="number">7</span>)</span> </span>&#123;</span><br><span class="line">  <span class="type">int</span> res = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">for</span> (; b; b /= <span class="number">2</span>, a = <span class="number">1LL</span> * a * a % p) &#123;</span><br><span class="line">    <span class="keyword">if</span> (b % <span class="number">2</span>) &#123;</span><br><span class="line">      res = <span class="number">1LL</span> * res * a % p;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; <span class="function"><span class="type">bool</span> <span class="title">ckmin</span><span class="params">(T &amp;a, <span class="type">const</span> T &amp;b)</span> </span>&#123; <span class="keyword">return</span> b &lt; a ? a = b, <span class="number">1</span> : <span class="number">0</span>; &#125;</span><br><span class="line">tcT &gt; <span class="function"><span class="type">bool</span> <span class="title">ckmax</span><span class="params">(T &amp;a, <span class="type">const</span> T &amp;b)</span> </span>&#123; <span class="keyword">return</span> a &lt; b ? a = b, <span class="number">1</span> : <span class="number">0</span>; &#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; <span class="function"><span class="type">void</span> <span class="title">remDup</span><span class="params">(vector&lt;T&gt; &amp;v)</span> </span>&#123;</span><br><span class="line">  <span class="built_in">sort</span>(<span class="built_in">all</span>(v));</span><br><span class="line">  v.<span class="built_in">erase</span>(<span class="built_in">unique</span>(<span class="built_in">all</span>(v)), <span class="built_in">end</span>(v));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; <span class="function"><span class="type">void</span> <span class="title">erase</span><span class="params">(T &amp;t, <span class="type">const</span> U &amp;u)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">auto</span> it = t.<span class="built_in">find</span>(u);</span><br><span class="line">  <span class="built_in">assert</span>(it != <span class="built_in">end</span>(t));</span><br><span class="line">  t.<span class="built_in">erase</span>(it);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; <span class="function">T <span class="title">fstTrue</span><span class="params">(T lo, T hi, U f)</span> </span>&#123;</span><br><span class="line">  hi++;</span><br><span class="line">  <span class="built_in">assert</span>(lo &lt;= hi);</span><br><span class="line">  <span class="keyword">while</span> (lo &lt; hi) &#123;</span><br><span class="line">    T mid = lo + (hi - lo) / <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">f</span>(mid) ? hi = mid : lo = mid + <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> lo;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; <span class="function">T <span class="title">lstTrue</span><span class="params">(T lo, T hi, U f)</span> </span>&#123;</span><br><span class="line">  lo--;</span><br><span class="line">  <span class="built_in">assert</span>(lo &lt;= hi);</span><br><span class="line">  <span class="keyword">while</span> (lo &lt; hi) &#123;</span><br><span class="line">    T mid = lo + (hi - lo + <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">f</span>(mid) ? lo = mid : hi = mid - <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> lo;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> inf = <span class="number">0x7fffffff</span>;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> N = <span class="number">1.01e6</span>;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> M = <span class="number">2.01e3</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> LOCAL</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;C:/Users/70510/Desktop/Others/algo/debug.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> debug(...) 42</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> NMAX = <span class="number">50000</span> + <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">EventType</span> &#123; QUERY, MODIFY &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Query</span> &#123;</span><br><span class="line">  <span class="type">int</span> l, r, t, idx;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Modification</span> &#123;</span><br><span class="line">  <span class="type">int</span> pos;    <span class="comment">// 修改位置</span></span><br><span class="line">  <span class="type">int</span> type;   <span class="comment">// 1: 修改颜色, 2: 修改数字</span></span><br><span class="line">  <span class="type">int</span> prevC;  <span class="comment">// 若是颜色修改，原来的颜色</span></span><br><span class="line">  <span class="type">int</span> nowC;</span><br><span class="line">  <span class="type">int</span> prevA;  <span class="comment">// 若是数字修改，原来的数字</span></span><br><span class="line">  <span class="type">int</span> nowA;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> n, m, k;</span><br><span class="line"><span class="type">int</span> initA[NMAX], curA[NMAX];</span><br><span class="line"><span class="type">int</span> initC[NMAX], curC[NMAX];  <span class="comment">// curC 存储离散化后的颜色</span></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; compColors;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> totQuery = <span class="number">0</span>, totMod = <span class="number">0</span>;</span><br><span class="line">vector&lt;Query&gt; queries;</span><br><span class="line">vector&lt;Modification&gt; mods;</span><br><span class="line"></span><br><span class="line">ll ansArr[NMAX];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 优化：使用 vector 记录每个颜色（离散化后编号）的当前数字和</span></span><br><span class="line">vector&lt;ll&gt; colSumArr;  <span class="comment">// 下标范围 [1, totColors]</span></span><br><span class="line"></span><br><span class="line">ll curAns = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 快速计算 f(x) = x^k，其中 k=1,2,3</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> ll <span class="title">f</span><span class="params">(ll x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (k == <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (k == <span class="number">2</span>)</span><br><span class="line">    <span class="keyword">return</span> x * x;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">return</span> x * x * x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 内联更新函数：移除位置 pos 的贡献</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">removePos</span><span class="params">(<span class="type">int</span> pos)</span> </span>&#123;</span><br><span class="line">  <span class="type">int</span> color = curC[pos];  <span class="comment">// 范围 1..totColors</span></span><br><span class="line">  <span class="type">int</span> val = curA[pos];</span><br><span class="line">  ll oldVal = colSumArr[color];</span><br><span class="line">  ll newVal = oldVal - val;</span><br><span class="line">  curAns -= (<span class="built_in">f</span>(oldVal) - <span class="built_in">f</span>(newVal));</span><br><span class="line">  colSumArr[color] = newVal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 内联更新函数：添加位置 pos 的贡献</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">addPos</span><span class="params">(<span class="type">int</span> pos)</span> </span>&#123;</span><br><span class="line">  <span class="type">int</span> color = curC[pos];</span><br><span class="line">  <span class="type">int</span> val = curA[pos];</span><br><span class="line">  ll oldVal = colSumArr[color];</span><br><span class="line">  ll newVal = oldVal + val;</span><br><span class="line">  curAns += (<span class="built_in">f</span>(newVal) - <span class="built_in">f</span>(oldVal));</span><br><span class="line">  colSumArr[color] = newVal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 应用修改操作 modIdx（如果 pos 在当前区间内，先 remove 后 add）</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">applyModification</span><span class="params">(<span class="type">int</span> modIdx, <span class="type">int</span> L, <span class="type">int</span> R)</span> </span>&#123;</span><br><span class="line">  Modification &amp;mod = mods[modIdx];</span><br><span class="line">  <span class="type">int</span> pos = mod.pos;</span><br><span class="line">  <span class="keyword">if</span> (L &lt;= pos &amp;&amp; pos &lt;= R) <span class="built_in">removePos</span>(pos);</span><br><span class="line">  <span class="keyword">if</span> (mod.type == <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="comment">// 颜色修改：curC[pos] 从 prevC 变为 nowC</span></span><br><span class="line">    curC[pos] = mod.nowC;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    curA[pos] = mod.nowA;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (L &lt;= pos &amp;&amp; pos &lt;= R) <span class="built_in">addPos</span>(pos);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 撤销修改操作 modIdx</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">undoModification</span><span class="params">(<span class="type">int</span> modIdx, <span class="type">int</span> L, <span class="type">int</span> R)</span> </span>&#123;</span><br><span class="line">  Modification &amp;mod = mods[modIdx];</span><br><span class="line">  <span class="type">int</span> pos = mod.pos;</span><br><span class="line">  <span class="keyword">if</span> (L &lt;= pos &amp;&amp; pos &lt;= R) <span class="built_in">removePos</span>(pos);</span><br><span class="line">  <span class="keyword">if</span> (mod.type == <span class="number">1</span>) &#123;</span><br><span class="line">    curC[pos] = mod.prevC;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    curA[pos] = mod.prevA;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (L &lt;= pos &amp;&amp; pos &lt;= R) <span class="built_in">addPos</span>(pos);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  cin &gt;&gt; n &gt;&gt; m &gt;&gt; k;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    cin &gt;&gt; initA[i];</span><br><span class="line">    curA[i] = initA[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    cin &gt;&gt; initC[i];</span><br><span class="line">    compColors.<span class="built_in">push_back</span>(initC[i]);</span><br><span class="line">    curC[i] = initC[i];  <span class="comment">// 后续会进行离散化</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ll lastans = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">    <span class="type">char</span> op;</span><br><span class="line">    cin &gt;&gt; op;</span><br><span class="line">    <span class="keyword">if</span> (op == <span class="string">&#x27;Q&#x27;</span>) &#123;</span><br><span class="line">      <span class="type">int</span> l, r;</span><br><span class="line">      cin &gt;&gt; l &gt;&gt; r;</span><br><span class="line">      l ^= lastans;</span><br><span class="line">      r ^= lastans;</span><br><span class="line">      <span class="keyword">if</span> (l &gt; r) <span class="built_in">swap</span>(l, r);</span><br><span class="line">      queries.<span class="built_in">push_back</span>(&#123;l, r, (<span class="type">int</span>)totMod, (<span class="type">int</span>)totQuery&#125;);</span><br><span class="line">      totQuery++;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (op == <span class="string">&#x27;C&#x27;</span>) &#123;</span><br><span class="line">      <span class="type">int</span> x, y;</span><br><span class="line">      cin &gt;&gt; x &gt;&gt; y;</span><br><span class="line">      x ^= lastans;</span><br><span class="line">      y ^= lastans;</span><br><span class="line">      compColors.<span class="built_in">push_back</span>(y);</span><br><span class="line">      mods.<span class="built_in">push_back</span>(&#123;x, <span class="number">1</span>, curC[x], y, <span class="number">0</span>, <span class="number">0</span>&#125;);</span><br><span class="line">      curC[x] = y;</span><br><span class="line">      totMod++;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="type">int</span> x, y;</span><br><span class="line">      cin &gt;&gt; x &gt;&gt; y;</span><br><span class="line">      x ^= lastans;</span><br><span class="line">      y ^= lastans;</span><br><span class="line">      mods.<span class="built_in">push_back</span>(&#123;x, <span class="number">2</span>, <span class="number">0</span>, <span class="number">0</span>, curA[x], y&#125;);</span><br><span class="line">      curA[x] = y;</span><br><span class="line">      totMod++;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 离散化：压缩所有颜色</span></span><br><span class="line">  <span class="built_in">sort</span>(compColors.<span class="built_in">begin</span>(), compColors.<span class="built_in">end</span>());</span><br><span class="line">  compColors.<span class="built_in">erase</span>(<span class="built_in">unique</span>(compColors.<span class="built_in">begin</span>(), compColors.<span class="built_in">end</span>()),</span><br><span class="line">                   compColors.<span class="built_in">end</span>());</span><br><span class="line">  <span class="type">int</span> totColors = compColors.<span class="built_in">size</span>();</span><br><span class="line">  <span class="keyword">auto</span> getColorId = [&amp;](<span class="type">int</span> c) -&gt; <span class="type">int</span> &#123;</span><br><span class="line">    <span class="built_in">return</span> (<span class="type">int</span>)(<span class="built_in">lower_bound</span>(compColors.<span class="built_in">begin</span>(), compColors.<span class="built_in">end</span>(), c) -</span><br><span class="line">                 compColors.<span class="built_in">begin</span>()) +</span><br><span class="line">           <span class="number">1</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    initC[i] = <span class="built_in">getColorId</span>(initC[i]);</span><br><span class="line">    curC[i] = initC[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;mod : mods) &#123;</span><br><span class="line">    <span class="keyword">if</span> (mod.type == <span class="number">1</span>) &#123;</span><br><span class="line">      mod.prevC = <span class="built_in">getColorId</span>(mod.prevC);</span><br><span class="line">      mod.nowC = <span class="built_in">getColorId</span>(mod.nowC);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    curA[i] = initA[i];</span><br><span class="line">    curC[i] = initC[i];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 初始化 colSumArr，所有颜色贡献初始为 0</span></span><br><span class="line">  colSumArr.<span class="built_in">assign</span>(totColors + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">  curAns = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="type">int</span> blockSize = <span class="built_in">max</span>((ll)<span class="number">1</span>, (ll)<span class="built_in">pow</span>(n, <span class="number">2.0</span> / <span class="number">3.0</span>));</span><br><span class="line">  <span class="built_in">sort</span>(queries.<span class="built_in">begin</span>(), queries.<span class="built_in">end</span>(), [&amp;](<span class="type">const</span> Query &amp;A, <span class="type">const</span> Query &amp;B) &#123;</span><br><span class="line">    <span class="type">int</span> ablock = A.l / blockSize, bblock = B.l / blockSize;</span><br><span class="line">    <span class="keyword">if</span> (ablock != bblock) <span class="keyword">return</span> ablock &lt; bblock;</span><br><span class="line">    <span class="type">int</span> rblockA = A.r / blockSize, rblockB = B.r / blockSize;</span><br><span class="line">    <span class="keyword">if</span> (rblockA != rblockB) <span class="keyword">return</span> A.r &lt; B.r;</span><br><span class="line">    <span class="keyword">return</span> A.t &lt; B.t;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 恢复 curA, curC 为初始状态</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">    curA[i] = initA[i];</span><br><span class="line">    curC[i] = initC[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// colSumArr 已经初始化为 0，curAns = 0</span></span><br><span class="line">  <span class="type">int</span> L = <span class="number">1</span>, R = <span class="number">0</span>, curT = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;q : queries) &#123;</span><br><span class="line">    <span class="keyword">while</span> (curT &lt; q.t) &#123;</span><br><span class="line">      <span class="built_in">applyModification</span>(curT, L, R);</span><br><span class="line">      curT++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (curT &gt; q.t) &#123;</span><br><span class="line">      curT--;</span><br><span class="line">      <span class="built_in">undoModification</span>(curT, L, R);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (R &lt; q.r) &#123;</span><br><span class="line">      R++;</span><br><span class="line">      <span class="built_in">addPos</span>(R);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (R &gt; q.r) &#123;</span><br><span class="line">      <span class="built_in">removePos</span>(R);</span><br><span class="line">      R--;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (L &lt; q.l) &#123;</span><br><span class="line">      <span class="built_in">removePos</span>(L);</span><br><span class="line">      L++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (L &gt; q.l) &#123;</span><br><span class="line">      L--;</span><br><span class="line">      <span class="built_in">addPos</span>(L);</span><br><span class="line">    &#125;</span><br><span class="line">    ansArr[q.idx] = curAns;</span><br><span class="line">    lastans = curAns;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; totQuery; i++) &#123;</span><br><span class="line">    cout &lt;&lt; ansArr[i] &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="built_in">setIO</span>();</span><br><span class="line">  <span class="type">int</span> tt = <span class="number">1</span>;</span><br><span class="line">  <span class="comment">// cin &gt;&gt; tt;</span></span><br><span class="line">  <span class="keyword">while</span> (tt--) &#123;</span><br><span class="line">    <span class="built_in">solve</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><h3 id="二维莫队"><a href="#二维莫队" class="headerlink" title="二维莫队"></a>二维莫队</h3><p><a href="https://ouuan.github.io/post/%E4%BA%8C%E7%BB%B4%E8%8E%AB%E9%98%9F%E8%A7%A3%E9%A2%98%E6%8A%A5%E5%91%8A/">二维莫队解题报告</a></p><h3 id="莫队二次离线"><a href="#莫队二次离线" class="headerlink" title="莫队二次离线"></a>莫队二次离线</h3><p><a href="https://www.luogu.com.cn/article/jkcn8dfi">莫队二次离线</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> XCPC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Codeforces Round 1000 (Div. 2) D题题解</title>
      <link href="/posts/1f3637b8.html"/>
      <url>/posts/1f3637b8.html</url>
      
        <content type="html"><![CDATA[<p><a href="https://codeforces.com/contest/2063/problem/D">D. Game With Triangles</a></p><p>Even Little John needs money to buy a house. But he recently lost his job; how will he earn money now? Of course, by playing a game that gives him money as a reward! Oh well, maybe not those kinds of games you are thinking about.</p><p>There are $n+m$ distinct points $(a_{1},0), (a_{2},0), \dots , (a_{n},0), (b_{1},2), (b_{2},2), \dots, (b_{m},2)$ on the plane. Initially, your score is $0$. To increase your score, you can perform the following operation:</p><ul><li>Choose three distinct points which are not <a href="https://en.wikipedia.org/wiki/Collinearity">collinear</a>;</li><li>Increase your score by the area of the triangle formed by these three points;</li><li>Then, erase the three points from the plane.</li></ul><p><img src="https://espresso.codeforces.com/5f6a73286fffbc2708f1d388ed58ca5bc0d69d23.png" alt=""> An instance of the game, where the operation is performed twice.</p><p>Let $k_{max}$ be the maximum number of operations that can be performed. For example, if it is impossible to perform any operation, $ k_{max}$ is $0$. Additionally, define $f(k)$ as the maximum possible score achievable by performing the operation <strong>exactly $k$ times</strong>. Here, $f(k)$ is defined for all integers $k$ such that $0 \le k \le k_{max}$.</p><p>Find the value of $k_{max}$, and find the values of $f(x)$ for all integers $x=1,2,\dots,k_{max}$ independently.</p><p><strong>Input</strong></p><p>Each test contains multiple test cases. The first line contains the number of test cases $t$ $(1 \le t \le 3 \cdot 10^4)$. The description of the test cases follows.</p><p>The first line of each test case contains two integers $n$ and $m$ $(1 \le n,m \le 2 \cdot 10^5)$.</p><p>The second line of each test case contains $n$ pairwise distinct integers $a_1,a_2,\ldots,a_n$ — the points on $y=0$ $(-10^9 \le a_i \le 10^9)$.</p><p>The third line of each test case contains $m$ pairwise distinct integers $b_1,b_2,\ldots,b_m$ — the points on $y=2$ $(-10^9 \le b_i \le 10^9)$.</p><p>It is guaranteed that both the sum of $n$ and the sum of $m$ over all test cases do not exceed $2 \cdot 10^5$.</p><p><strong>Output</strong></p><p>For each test case, given that the maximum number of operations is $k_{\max}$, you must output at most two lines:</p><ul><li>The first line contains the value of $k_{\max}$;</li><li>The second line contains $k_{\max}$ integers denoting $f(1),f(2),\ldots,f(k_{\max})$. You are allowed to omit this line if $k_{\max}$ is $0$.</li></ul><p>Note that under the constraints of this problem, it can be shown that all values of $f(x)$ are integers no greater than $10^{16}$.</p><p><strong>Example</strong></p><p><strong>Input</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">1 3</span><br><span class="line">0</span><br><span class="line">0 1 -1</span><br><span class="line">2 4</span><br><span class="line">0 100</span><br><span class="line">-100 -50 0 50</span><br><span class="line">2 4</span><br><span class="line">0 1000</span><br><span class="line">-100 -50 0 50</span><br><span class="line">6 6</span><br><span class="line">20 1 27 100 43 42</span><br><span class="line">100 84 1 24 22 77</span><br><span class="line">8 2</span><br><span class="line">564040265 -509489796 469913620 198872582 -400714529 553177666 131159391 -20796763</span><br><span class="line">-1000000000 1000000000</span><br></pre></td></tr></table></figure><hr><p><strong>Output</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">2</span><br><span class="line">150 200</span><br><span class="line">2</span><br><span class="line">1000 200</span><br><span class="line">4</span><br><span class="line">99 198 260 283</span><br><span class="line">2</span><br><span class="line">2000000000 2027422256</span><br></pre></td></tr></table></figure><p><strong>Note</strong></p><p>On the first test case, there are $1+3=4$ points $(0,0),(0,2),(1,2),(-1,2)$.</p><p>It can be shown that you cannot perform two or more operations. The value of $k_{\max}$ is $1$, and you are only asked for the value of $f(1)$.</p><p>You can choose $(0,0)$, $(-1,2)$, and $(1,2)$ as the three vertices of the triangle. After that, your score is increased by the area of the triangle, which is $2$. Then, the three points are erased from the plane. It can be shown that the maximum value of your score after performing one operation is $2$. Therefore, the value of $f(1)$ is $2$.</p><p>On the fifth test case, there are $8+2=10$ points.</p><p>It can be shown that you cannot perform three or more operations. The value of $k_{\max}$ is $2$, and you are asked for the values $f(1)$ and $f(2)$.</p><p>To maximize the score with only one operation, you can choose three points $(198\,872\,582,0)$, $(-1\,000\,000\,000,2)$, and $(1\,000\,000\,000,2)$. Then, the three points are erased from the plane. It can be shown that the maximum value of your score after performing one operation is $2\,000\,000\,000$. Therefore, the value of $f(1)$ is $2\,000\,000\,000$.</p><p>To maximize the score with exactly two operations, you can choose the following sequence of operations.</p><ul><li>Choose three points $(-509\,489\,796,0)$, $(553\,177\,666,0)$, and $(-1\,000\,000\,000,2)$. The three points are erased.</li><li>Choose three points $(-400\,714\,529,0)$, $(564\,040\,265,0)$, and $(1\,000\,000\,000,2)$. The three points are erased.</li></ul><p>Then, the score after two operations becomes $2\,027\,422\,256$. It can be shown that the maximum value of your score after performing exactly two operations is $2\,027\,422\,256$. Therefore, the value of $f(2)$ is $2\,027\,422\,256$.</p><p><strong>Solution</strong></p><ol><li>要构造满足非共线的三点，需要从 $y=0$ 的点中选 $2$ 个、$y=2$ 的点中选 $1$ 个，或反过来。</li><li>每次选出的一组三点形成的三角形面积即对应行上选出的 $2$ 点的横坐标之差(因为高度为 $2$，$面积=\frac{1}{2}\times 底\times 高=差\times 1$)。</li><li>先对 $y=0$ 的所有点进行排序，计算“前后配对”的最大差值之和形成前缀数组 $preA$；同理对 $y=2$ 的所有点生成前缀数组 $preB$。$preA[i]$ 表示恰好在 $y=0$ 行完成 $i$ 次“2点配对”操作的总最大面积，同理 $preB[i]$ 针对 $y=2$ 行。</li><li>每次总共做 $k$ 次操作，需要在 $y=0$ 行做 $i$ 次、在 $y=2$ 行做 $(k - i)$ 次，要求 $2i+(k-i) \le n, i+2(k-i) \le m$。</li><li>用三分搜索或其它方法在可行区间内寻找 $i$，使得 $preA[i] + preB[k-i]$ 最大，记为 $f(k)$。</li><li>最后找出最大可行的 $k$ 值 $k_{max}$，并输出 $f(1) \dots f(k_{\max})$。</li></ol><details class="folding-tag" ><summary> 查看代码 </summary>              <div class='content'>              <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="comment">// #include &lt;bits/extc++.h&gt;</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">// using namespace __gnu_pbds;</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ture true</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> flase false</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pow power</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> all(x) begin(x), end(x)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mem(a, x) memset(a, x, sizeof(a))</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> gcd(a, b) gcdint(a, b)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lcm(a, b) (a / gcd(a, b) * b)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> sz(x) (int)x.size()</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> lowbit(x) (x &amp; -x)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> EPS 1e-7</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> int ll</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> i64 long long</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> i128 __int128</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> fr first</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> sc second</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> tcT template &lt;class T</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> tcTU tcT, class U</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">unsyncIO</span><span class="params">()</span> </span>&#123; cin.<span class="built_in">tie</span>(<span class="number">0</span>)-&gt;<span class="built_in">sync_with_stdio</span>(<span class="number">0</span>); &#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setPrec</span><span class="params">()</span> </span>&#123; cout &lt;&lt; fixed &lt;&lt; <span class="built_in">setprecision</span>(<span class="number">15</span>); &#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setIO</span><span class="params">()</span> </span>&#123; <span class="built_in">unsyncIO</span>(), <span class="built_in">setPrec</span>(); &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">gcdint</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; <span class="keyword">return</span> b ? <span class="built_in">gcdint</span>(b, a % b) : a; &#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> i128 <span class="title">gcd128</span><span class="params">(i128 a, i128 b)</span> </span>&#123; <span class="keyword">return</span> b ? <span class="built_in">gcd128</span>(b, a % b) : a; &#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">cdiv</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; <span class="keyword">return</span> a / b + ((a ^ b) &gt; <span class="number">0</span> &amp;&amp; a % b); &#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">fdiv</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> </span>&#123; <span class="keyword">return</span> a / b - ((a ^ b) &lt; <span class="number">0</span> &amp;&amp; a % b); &#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; <span class="keyword">using</span> V = vector&lt;T&gt;;</span><br><span class="line">tcTU &gt; <span class="keyword">using</span> PR = pair&lt;T, U&gt;;</span><br><span class="line">tcTU &gt; <span class="keyword">using</span> MP = map&lt;T, U&gt;;</span><br><span class="line">tcTU &gt; <span class="keyword">using</span> VP = vector&lt;pair&lt;T, U&gt;&gt;;</span><br><span class="line">tcT &gt; <span class="keyword">using</span> pqg = priority_queue&lt;T, vector&lt;T&gt;, greater&lt;T&gt;&gt;;</span><br><span class="line">tcT &gt; <span class="keyword">using</span> pql = priority_queue&lt;T, vector&lt;T&gt;, less&lt;T&gt;&gt;;</span><br><span class="line"></span><br><span class="line">tcTU &gt; istream &amp;<span class="keyword">operator</span>&gt;&gt;(istream &amp;in, pair&lt;T, U&gt; &amp;a) &#123;</span><br><span class="line">  <span class="keyword">return</span> in &gt;&gt; a.first &gt;&gt; a.second;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; istream &amp;<span class="keyword">operator</span>&gt;&gt;(istream &amp;in, vector&lt;T&gt; &amp;a) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;x : a) &#123;</span><br><span class="line">    in &gt;&gt; x;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> in;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; ostream &amp;<span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, <span class="type">const</span> pair&lt;T, U&gt; &amp;a) &#123;</span><br><span class="line">  <span class="keyword">return</span> out &lt;&lt; a.first &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; a.second;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; ostream &amp;<span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, <span class="type">const</span> vector&lt;pair&lt;T, U&gt;&gt; &amp;a) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;x : a) &#123;</span><br><span class="line">    out &lt;&lt; x &lt;&lt; endl;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; ostream &amp;<span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, <span class="type">const</span> vector&lt;T&gt; &amp;a) &#123;</span><br><span class="line">  <span class="type">int</span> n = a.<span class="built_in">size</span>();</span><br><span class="line">  <span class="keyword">if</span> (!n) &#123;</span><br><span class="line">    <span class="keyword">return</span> out;</span><br><span class="line">  &#125;</span><br><span class="line">  out &lt;&lt; a[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">    out &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; a[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">std::ostream &amp;<span class="keyword">operator</span>&lt;&lt;(std::ostream &amp;os, i128 n) &#123;</span><br><span class="line">  std::string s;</span><br><span class="line">  <span class="keyword">while</span> (n) &#123;</span><br><span class="line">    s += <span class="string">&#x27;0&#x27;</span> + n % <span class="number">10</span>;</span><br><span class="line">    n /= <span class="number">10</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  std::<span class="built_in">reverse</span>(s.<span class="built_in">begin</span>(), s.<span class="built_in">end</span>());</span><br><span class="line">  <span class="keyword">return</span> os &lt;&lt; s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">power</span><span class="params">(<span class="type">int</span> a, i64 b, <span class="type">int</span> p = <span class="number">1e9</span> + <span class="number">7</span>)</span> </span>&#123;</span><br><span class="line">  <span class="type">int</span> res = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">for</span> (; b; b /= <span class="number">2</span>, a = <span class="number">1LL</span> * a * a % p) &#123;</span><br><span class="line">    <span class="keyword">if</span> (b % <span class="number">2</span>) &#123;</span><br><span class="line">      res = <span class="number">1LL</span> * res * a % p;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; <span class="function"><span class="type">bool</span> <span class="title">ckmin</span><span class="params">(T &amp;a, <span class="type">const</span> T &amp;b)</span> </span>&#123; <span class="keyword">return</span> b &lt; a ? a = b, <span class="number">1</span> : <span class="number">0</span>; &#125;</span><br><span class="line">tcT &gt; <span class="function"><span class="type">bool</span> <span class="title">ckmax</span><span class="params">(T &amp;a, <span class="type">const</span> T &amp;b)</span> </span>&#123; <span class="keyword">return</span> a &lt; b ? a = b, <span class="number">1</span> : <span class="number">0</span>; &#125;</span><br><span class="line"></span><br><span class="line">tcT &gt; <span class="function"><span class="type">void</span> <span class="title">remDup</span><span class="params">(vector&lt;T&gt; &amp;v)</span> </span>&#123;</span><br><span class="line">  <span class="built_in">sort</span>(<span class="built_in">all</span>(v));</span><br><span class="line">  v.<span class="built_in">erase</span>(<span class="built_in">unique</span>(<span class="built_in">all</span>(v)), <span class="built_in">end</span>(v));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; <span class="function"><span class="type">void</span> <span class="title">erase</span><span class="params">(T &amp;t, <span class="type">const</span> U &amp;u)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">auto</span> it = t.<span class="built_in">find</span>(u);</span><br><span class="line">  <span class="built_in">assert</span>(it != <span class="built_in">end</span>(t));</span><br><span class="line">  t.<span class="built_in">erase</span>(it);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; <span class="function">T <span class="title">fstTrue</span><span class="params">(T lo, T hi, U f)</span> </span>&#123;</span><br><span class="line">  hi++;</span><br><span class="line">  <span class="built_in">assert</span>(lo &lt;= hi);</span><br><span class="line">  <span class="keyword">while</span> (lo &lt; hi) &#123;</span><br><span class="line">    T mid = lo + (hi - lo) / <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">f</span>(mid) ? hi = mid : lo = mid + <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> lo;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tcTU &gt; <span class="function">T <span class="title">lstTrue</span><span class="params">(T lo, T hi, U f)</span> </span>&#123;</span><br><span class="line">  lo--;</span><br><span class="line">  <span class="built_in">assert</span>(lo &lt;= hi);</span><br><span class="line">  <span class="keyword">while</span> (lo &lt; hi) &#123;</span><br><span class="line">    T mid = lo + (hi - lo + <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">f</span>(mid) ? lo = mid : hi = mid - <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> lo;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> inf = <span class="number">0x7fffffff</span>;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> N = <span class="number">1.01e6</span>;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="type">int</span> M = <span class="number">2.01e3</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> LOCAL</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;C:/Users/70510/Desktop/Others/algo/debug.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> debug(...) 42</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">buildPrefix</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;arr)</span> </span>&#123;</span><br><span class="line">  <span class="built_in">sort</span>(arr.<span class="built_in">begin</span>(), arr.<span class="built_in">end</span>());</span><br><span class="line">  <span class="type">int</span> half = arr.<span class="built_in">size</span>() / <span class="number">2</span>;</span><br><span class="line">  <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">diff</span><span class="params">(half)</span></span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; half; i++) &#123;</span><br><span class="line">    diff[i] = arr[arr.<span class="built_in">size</span>() - <span class="number">1</span> - i] - arr[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">sort</span>(diff.<span class="built_in">begin</span>(), diff.<span class="built_in">end</span>(), <span class="built_in">greater</span>&lt;<span class="type">int</span>&gt;());</span><br><span class="line">  <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">prefix</span><span class="params">(half + <span class="number">1</span>, <span class="number">0LL</span>)</span></span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= half; i++) &#123;</span><br><span class="line">    prefix[i] = prefix[i - <span class="number">1</span>] + diff[i - <span class="number">1</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> prefix;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">ternaryMax</span><span class="params">(<span class="type">const</span> vector&lt;<span class="type">int</span>&gt; &amp;A, <span class="type">const</span> vector&lt;<span class="type">int</span>&gt; &amp;B, <span class="type">int</span> k, <span class="type">int</span> low,</span></span></span><br><span class="line"><span class="params"><span class="function">               <span class="type">int</span> high)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (low &gt; high) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">auto</span> G = [&amp;](<span class="type">int</span> x) &#123; <span class="keyword">return</span> A[x] + B[k - x]; &#125;;</span><br><span class="line">  <span class="keyword">while</span> (high - low &gt;= <span class="number">3</span>) &#123;</span><br><span class="line">    <span class="type">int</span> m1 = low + (high - low) / <span class="number">3</span>;</span><br><span class="line">    <span class="type">int</span> m2 = high - (high - low) / <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">G</span>(m1) &lt; <span class="built_in">G</span>(m2))</span><br><span class="line">      low = m1 + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      high = m2 - <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="type">int</span> ret = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = low; i &lt;= high; i++) &#123;</span><br><span class="line">    ret = <span class="built_in">max</span>(ret, <span class="built_in">G</span>(i));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="type">int</span> n, m;</span><br><span class="line">  cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">  <span class="function">vector&lt;<span class="type">long</span> <span class="type">long</span>&gt; <span class="title">a</span><span class="params">(n)</span>, <span class="title">b</span><span class="params">(m)</span></span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">    cin &gt;&gt; a[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; j++) &#123;</span><br><span class="line">    cin &gt;&gt; b[j];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  vector&lt;<span class="type">long</span> <span class="type">long</span>&gt; preA = <span class="built_in">buildPrefix</span>(a);</span><br><span class="line">  vector&lt;<span class="type">long</span> <span class="type">long</span>&gt; preB = <span class="built_in">buildPrefix</span>(b);</span><br><span class="line">  <span class="type">int</span> maxPickA = (<span class="type">int</span>)preA.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">  <span class="type">int</span> maxPickB = (<span class="type">int</span>)preB.<span class="built_in">size</span>() - <span class="number">1</span>;</span><br><span class="line">  <span class="type">int</span> kmax = <span class="built_in">min</span>((n + m) / <span class="number">3LL</span>, (<span class="type">long</span> <span class="type">long</span>)maxPickA + maxPickB);</span><br><span class="line">  <span class="function">vector&lt;<span class="type">long</span> <span class="type">long</span>&gt; <span class="title">f</span><span class="params">(kmax + <span class="number">1</span>, <span class="number">0LL</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">1</span>; k &lt;= kmax; k++) &#123;</span><br><span class="line">    <span class="comment">// i的可行区间</span></span><br><span class="line">    <span class="comment">// 要满足 i + (k−i) = k，2*i + (k−i) &lt;= n =&gt; i &lt;= n-k</span></span><br><span class="line">    <span class="comment">//           i + 2*(k−i) &lt;= m =&gt; i &gt;= 2*k - m</span></span><br><span class="line">    <span class="comment">// 同时 i &gt;= 0, i &lt;= k, i &lt;= maxPickA, k−i &lt;= maxPickB</span></span><br><span class="line">    <span class="type">int</span> low = <span class="built_in">max</span>(<span class="number">0LL</span>, (<span class="type">int</span>)<span class="built_in">max</span>((<span class="type">long</span> <span class="type">long</span>)k - maxPickB, <span class="number">2LL</span> * k - m));</span><br><span class="line">    <span class="type">int</span> high = <span class="built_in">min</span>(k, <span class="built_in">min</span>(maxPickA, n - k));</span><br><span class="line">    <span class="keyword">if</span> (low &lt;= high) &#123;</span><br><span class="line">      <span class="keyword">auto</span> bestVal = <span class="built_in">ternaryMax</span>(preA, preB, k, low, high);</span><br><span class="line">      f[k] = bestVal;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (kmax &gt; <span class="number">0</span> &amp;&amp; f[kmax] == <span class="number">0</span>) kmax--;</span><br><span class="line"></span><br><span class="line">  cout &lt;&lt; kmax &lt;&lt; endl;</span><br><span class="line">  <span class="keyword">if</span> (kmax &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= kmax; i++) &#123;</span><br><span class="line">      cout &lt;&lt; f[i] &lt;&lt; (i &lt; kmax ? <span class="string">&#x27; &#x27;</span> : <span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="built_in">setIO</span>();</span><br><span class="line">  <span class="type">int</span> tt = <span class="number">1</span>;</span><br><span class="line">  cin &gt;&gt; tt;</span><br><span class="line">  <span class="keyword">while</span> (tt--) &#123;</span><br><span class="line">    <span class="built_in">solve</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details>]]></content>
      
      
      
        <tags>
            
            <tag> XCPC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>复现项目时遇到的相关问题汇总</title>
      <link href="/posts/dd7a46fd.html"/>
      <url>/posts/dd7a46fd.html</url>
      
        <content type="html"><![CDATA[<ul><li>java:程序包org.aspectj.weaver.reflect不存在</li></ul><p>更新Maven包，并在IDEA中同步所有Maven项目和重新加载所有Maven项目</p><ul><li>aspectjweaver-1.8.13.jar时出错</li></ul><p>右键项目文件夹，在Maven中选择生成源代码并更新文件夹</p><ul><li>base64decoder 找不到符号</li></ul><p>从Java 8开始，应使用java.util.Base64类来处理Base64编码和解码。这个类提供了Base64.Decoder和Base64.Encoder两个嵌套类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Java 8及更高版本使用java.util.Base64</span></span><br><span class="line">Base64.<span class="type">Decoder</span> <span class="variable">decoder</span> <span class="operator">=</span> Base64.getDecoder();</span><br><span class="line"><span class="type">byte</span>[] decodedBytes = decoder.decode(encodedString);</span><br><span class="line"></span><br><span class="line">Base64.<span class="type">Encoder</span> <span class="variable">encoder</span> <span class="operator">=</span> Base64.getEncoder();</span><br><span class="line"><span class="type">String</span> <span class="variable">encodedString</span> <span class="operator">=</span> encoder.encodeToString(byteArray);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 杂谈 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title></title>
      <link href="/manifest.json"/>
      <url>/manifest.json</url>
      
        <content type="html"><![CDATA[{"name":"LANSGANBS`Blog","short_name":"LANSGANBS","theme_color":"#3b70fc","background_color":"#3b70fc","display":"standalone","scope":"/","start_url":"/","icons":[{"src":"/img/siteicon/16.png","sizes":"16x16","type":"image/png"},{"src":"/img/siteicon/32.png","sizes":"32x32","type":"image/png"},{"src":"/img/siteicon/48.png","sizes":"48x48","type":"image/png"},{"src":"/img/siteicon/64.png","sizes":"64x64","type":"image/png"},{"src":"/img/siteicon/128.png","sizes":"128x128","type":"image/png"},{"src":"/img/siteicon/144.png","sizes":"144x144","type":"image/png"},{"src":"/img/siteicon/512.png","sizes":"512x512","type":"image/png"}],"splash_pages":null}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/coin.css"/>
      <url>/css/coin.css</url>
      
        <content type="html"><![CDATA[.tip-button {    border: 0;    border-radius: 0.25rem;    cursor: pointer;    font-size: 20px;    font-weight: 600;    height: 2.6rem;    margin-bottom: -4rem;    outline: 0;    position: relative;    top: 0;    transform-origin: 0% 100%;    transition: transform 50ms ease-in-out;    width: auto;    -webkit-tap-highlight-color: transparent;}.tip-button:active {    transform: rotate(4deg);}.tip-button.clicked {    animation: 150ms ease-in-out 1 shake;    pointer-events: none;}.tip-button.clicked .tip-button__text {    opacity: 0;    transition: opacity 100ms linear 200ms;}.tip-button.clicked::before {    height: 0.5rem;    width: 60%;    background: $button-hover-color;}.tip-button.clicked .coin {    transition: margin-bottom 1s linear 200ms;    margin-bottom: 0;}.tip-button.shrink-landing::before {    transition: width 200ms ease-in;    width: 0;}.tip-button.coin-landed::after {    opacity: 1;    transform: scale(1);    transform-origin: 50% 100%;}.tip-button.coin-landed .coin-wrapper {    background: radial-gradient(circle at 35% 97%, rgba(3, 16, 50, 0.4) 0.04rem, transparent 0.04rem), radial-gradient(circle at 45% 92%,            rgba(3, 16, 50, 0.4) 0.04rem,            transparent 0.02rem), radial-gradient(circle at 55% 98%, rgba(3, 16, 50, 0.4) 0.04rem, transparent 0.04rem), radial-gradient(circle at 65% 96%, rgba(3, 16, 50, 0.4) 0.06rem, transparent 0.06rem);    background-position: center bottom;    background-size: 100%;    bottom: -1rem;    opacity: 0;    transform: scale(2) translateY(-10px);}.tip-button__text {    color: #fff;    margin-right: 1.8rem;    opacity: 1;    position: relative;    transition: opacity 100ms linear 500ms;    z-index: 3;}.tip-button::before {    border-radius: 0.25rem;    bottom: 0;    content: "";    display: block;    height: 100%;    left: 50%;    position: absolute;    transform: translateX(-50%);    transition: height 250ms ease-in-out 400ms, width 250ms ease-in-out 300ms;    width: 100%;    z-index: 2;}.tip-button::after {    bottom: -1rem;    color: white;    content: "ヾ(≧O≦)〃嗷~";    /*点击后显示的内容*/    height: 110%;    left: 0;    opacity: 0;    position: absolute;    pointer-events: none;    text-align: center;    transform: scale(0);    transform-origin: 50% 20%;    transition: transform 200ms cubic-bezier(0, 0, 0.35, 1.43);    width: 100%;    z-index: 1;}.coin-wrapper {    background: none;    bottom: 0;    height: 18rem;    left: 0;    opacity: 1;    overflow: hidden;    pointer-events: none;    position: absolute;    transform: none;    transform-origin: 50% 100%;    transition: opacity 200ms linear 100ms, transform 300ms ease-out;    width: 100%;}.coin {    --front-y-multiplier: 0;    --back-y-multiplier: 0;    --coin-y-multiplier: 0;    --coin-x-multiplier: 0;    --coin-scale-multiplier: 0;    --coin-rotation-multiplier: 0;    --shine-opacity-multiplier: 0.4;    --shine-bg-multiplier: 50%;    bottom: calc(var(--coin-y-multiplier) * 1rem - 3.5rem);    height: 3.5rem;    margin-bottom: 3.05rem;    position: absolute;    right: calc(var(--coin-x-multiplier) * 34% + 16%);    transform: translateX(50%) scale(calc(0.4 + var(--coin-scale-multiplier))) rotate(calc(var(--coin-rotation-multiplier) * -1deg));    transition: opacity 100ms linear 200ms;    width: 3.5rem;    z-index: 3;}.coin__front,.coin__middle,.coin__back,.coin::before,.coin__front::after,.coin__back::after {    border-radius: 50%;    box-sizing: border-box;    height: 100%;    left: 0;    position: absolute;    width: 100%;    z-index: 3;}.coin__front {    background: radial-gradient(circle at 50% 50%, transparent 50%, rgba(115, 124, 153, 0.4) 54%, #c2cadf 54%),        linear-gradient(210deg, #8590b3 32%, transparent 32%), linear-gradient(150deg, #8590b3 32%, transparent 32%),        linear-gradient(to right, #8590b3 22%, transparent 22%, transparent 78%, #8590b3 78%), linear-gradient(to bottom,            #fcfaf9 44%,            transparent 44%,            transparent 65%,            #fcfaf9 65%,            #fcfaf9 71%,            #8590b3 71%), linear-gradient(to right, transparent 28%, #fcfaf9 28%, #fcfaf9 34%, #8590b3 34%, #8590b3 40%, #fcfaf9 40%, #fcfaf9 47%, #8590b3 47%, #8590b3 53%, #fcfaf9 53%, #fcfaf9 60%, #8590b3 60%, #8590b3 66%, #fcfaf9 66%, #fcfaf9 72%, transparent 72%);    background-color: #8590b3;    background-size: 100% 100%;    transform: translateY(calc(var(--front-y-multiplier) * 0.3181818182rem / 2)) scaleY(var(--front-scale-multiplier));}.coin__front::after {    background: rgba(0, 0, 0, 0.2);    content: "";    opacity: var(--front-y-multiplier);}.coin__middle {    background: #737c99;    transform: translateY(calc(var(--middle-y-multiplier) * 0.3181818182rem / 2)) scaleY(var(--middle-scale-multiplier));}.coin__back {    background: radial-gradient(circle at 50% 50%, transparent 50%, rgba(115, 124, 153, 0.4) 54%, #c2cadf 54%),        radial-gradient(circle at 50% 40%, #fcfaf9 23%, transparent 23%), radial-gradient(circle at 50% 100%, #fcfaf9 35%, transparent 35%);    background-color: #8590b3;    background-size: 100% 100%;    transform: translateY(calc(var(--back-y-multiplier) * 0.3181818182rem / 2)) scaleY(var(--back-scale-multiplier));}.coin__back::after {    background: rgba(0, 0, 0, 0.2);    content: "";    opacity: var(--back-y-multiplier);}.coin::before {    background: radial-gradient(circle at 25% 65%, transparent 50%, rgba(255, 255, 255, 0.9) 90%), linear-gradient(55deg, transparent calc(var(--shine-bg-multiplier) + 0%), #e9f4ff calc(var(--shine-bg-multiplier) + 0%), transparent calc(var(--shine-bg-multiplier) + 50%));    content: "";    opacity: var(--shine-opacity-multiplier);    transform: translateY(calc(var(--middle-y-multiplier) * 0.3181818182rem / -2)) scaleY(var(--middle-scale-multiplier)) rotate(calc(var(--coin-rotation-multiplier) * 1deg));    z-index: 10;}.coin::after {    background: #737c99;    content: "";    height: 0.3181818182rem;    left: 0;    position: absolute;    top: 50%;    transform: translateY(-50%);    width: 100%;    z-index: 2;}@keyframes shake {    0% {        transform: rotate(4deg);    }    66% {        transform: rotate(-4deg);    }    100% {        transform: rotate();    }}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/custom.css"/>
      <url>/css/custom.css</url>
      
        <content type="html"><![CDATA[/* @font-face {  font-family: Candyhome;  src: url(https://npm.elemecdn.com/anzhiyu-blog@1.1.6/fonts/Candyhome.ttf);  font-display: swap;  font-weight: lighter;} */@font-face {    font-family: ZhuZiAYuanJWD;    src: url(https://npm.elemecdn.com/anzhiyu-blog@1.1.6/fonts/ZhuZiAWan.woff2);    font-display: swap;    font-weight: lighter;}div#menus {    font-family: "ZhuZiAYuanJWD";}h1#site-title {    font-family: ZhuZiAYuanJWD;    font-size: 3em !important;}a.article-title,a.blog-slider__title,a.categoryBar-list-link,h1.post-title {    font-family: ZhuZiAYuanJWD;}.iconfont {    font-family: "iconfont" !important;    font-size: 3em;    /* 可以定义图标大小 */    font-style: normal;    -webkit-font-smoothing: antialiased;    -moz-osx-font-smoothing: grayscale;}/* 时间轴生肖icon */svg.icon {    /* 这里定义svg.icon，避免和Butterfly自带的note标签冲突 */    width: 1em;    height: 1em;    /* width和height定义图标的默认宽度和高度*/    vertical-align: -0.15em;    fill: currentColor;    overflow: hidden;}.icon-zhongbiao::before {    color: #f7c768;}/* bilibli番剧插件 */#article-container .bangumi-tab.bangumi-active {    background: var(--anzhiyu-theme);    color: var(--anzhiyu-ahoverbg);    border-radius: 10px;}a.bangumi-tab:hover {    text-decoration: none !important;}.bangumi-button:hover {    background: var(--anzhiyu-theme) !important;    border-radius: 10px !important;    color: var(--anzhiyu-ahoverbg) !important;}a.bangumi-button.bangumi-nextpage:hover {    text-decoration: none !important;}.bangumi-button {    padding: 5px 10px !important;}a.bangumi-tab {    padding: 5px 10px !important;}svg.icon.faa-tada {    font-size: 1.1em;}.bangumi-info-item {    border-right: 1px solid #f2b94b;}.bangumi-info-item span {    color: #f2b94b;}.bangumi-info-item em {    color: #f2b94b;}/* 解决artitalk的图标问题 */#uploadSource>svg {    width: 1.19em;    height: 1.5em;}/*top-img黑色透明玻璃效果移除，不建议加，除非你执着于完全一图流或者背景图对比色明显 */#page-header:not(.not-top-img):before {    background-color: transparent !important;}/* 首页文章卡片 */#recent-posts>.recent-post-item {    background: rgba(255, 255, 255, 0.9);}/* 首页侧栏卡片 */#aside-content .card-widget {    background: rgba(255, 255, 255, 0.9);}/* 文章页面正文背景 */div#post {    background: rgba(255, 255, 255, 0.9);}/* 分页页面 */div#page {    background: rgba(255, 255, 255, 0.9);}/* 归档页面 */div#archive {    background: rgba(255, 255, 255, 0.9);}/* 标签页面 */div#tag {    background: rgba(255, 255, 255, 0.9);}/* 分类页面 */div#category {    background: rgba(255, 255, 255, 0.9);}/*夜间模式伪类遮罩层透明*/[data-theme="dark"] #recent-posts>.recent-post-item {    background: #121212;}[data-theme="dark"] .card-widget {    background: #121212 !important;}[data-theme="dark"] div#post {    background: #121212 !important;}[data-theme="dark"] div#tag {    background: #121212 !important;}[data-theme="dark"] div#archive {    background: #121212 !important;}[data-theme="dark"] div#page {    background: #121212 !important;}[data-theme="dark"] div#category {    background: #121212 !important;}[data-theme="dark"] div#category {    background: transparent !important;}/* 页脚透明 */#footer {    background: transparent !important;}/* 头图透明 */#page-header {    background: transparent !important;}#rightside>div>button {    border-radius: 5px;}/* 滚动条 */::-webkit-scrollbar {    width: 10px;    height: 10px;}::-webkit-scrollbar-thumb {    background-color: #3b70fc;    border-radius: 2em;}::-webkit-scrollbar-corner {    background-color: transparent;}::-moz-selection {    color: #fff;    background-color: #3b70fc;}/* 音乐播放器 *//* .aplayer .aplayer-lrc {  display: none !important;} */.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {    left: -66px !important;    transition: all 0.3s;    /* 默认情况下缩进左侧66px，只留一点箭头部分 */}.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {    left: 0 !important;    transition: all 0.3s;    /* 鼠标悬停是左侧缩进归零，完全显示按钮 */}.aplayer.aplayer-fixed {    z-index: 999999 !important;}/* 评论框  */.vwrap {    box-shadow: 2px 2px 5px #bbb;    background: rgba(255, 255, 255, 0.3);    border-radius: 8px;    padding: 30px;    margin: 30px 0px 30px 0px;}/* 设置评论框 */.vcard {    box-shadow: 2px 2px 5px #bbb;    background: rgba(255, 255, 255, 0.3);    border-radius: 8px;    padding: 30px;    margin: 30px 0px 0px 0px;}/* md网站下划线 */#article-container a:hover {    text-decoration: none !important;}#article-container #hpp_talk p img {    display: inline;}/* 404页面 */#error-wrap {    position: absolute;    top: 40%;    right: 0;    left: 0;    margin: 0 auto;    padding: 0 1rem;    max-width: 1000px;    transform: translate(0, -50%);}#error-wrap .error-content {    display: flex;    flex-direction: row;    justify-content: center;    align-items: center;    margin: 0 1rem;    height: 18rem;    border-radius: 8px;    background: var(--card-bg);    box-shadow: var(--card-box-shadow);    transition: all 0.3s;}#error-wrap .error-content .error-img {    box-flex: 1;    flex: 1;    height: 100%;    border-top-left-radius: 8px;    border-bottom-left-radius: 8px;    background-color: #3b70fc;    background-position: center;    background-size: cover;}#error-wrap .error-content .error-info {    box-flex: 1;    flex: 1;    padding: 0.5rem;    text-align: center;    font-size: 14px;    font-family: Titillium Web, "PingFang SC", "Hiragino Sans GB", "Microsoft JhengHei", "Microsoft YaHei", sans-serif;}#error-wrap .error-content .error-info .error_title {    margin-top: -4rem;    font-size: 9em;}#error-wrap .error-content .error-info .error_subtitle {    margin-top: -3.5rem;    word-break: break-word;    font-size: 1.6em;}#error-wrap .error-content .error-info a {    display: inline-block;    margin-top: 0.5rem;    padding: 0.3rem 1.5rem;    background: var(--btn-bg);    color: var(--btn-color);}#body-wrap.error .aside-list {    display: flex;    flex-direction: row;    flex-wrap: nowrap;    bottom: 0px;    position: absolute;    padding: 1rem;    width: 100%;    overflow: scroll;}#body-wrap.error .aside-list .aside-list-group {    display: flex;    flex-direction: row;    flex-wrap: nowrap;    max-width: 1200px;    margin: 0 auto;}#body-wrap.error .aside-list .aside-list-item {    padding: 0.5rem;}#body-wrap.error .aside-list .aside-list-item img {    width: 100%;    object-fit: cover;    border-radius: 12px;}#body-wrap.error .aside-list .aside-list-item .thumbnail {    overflow: hidden;    width: 230px;    height: 143px;    background: var(--anzhiyu-card-bg);    display: flex;}#body-wrap.error .aside-list .aside-list-item .content .title {    -webkit-line-clamp: 2;    overflow: hidden;    display: -webkit-box;    -webkit-box-orient: vertical;    line-height: 1.5;    justify-content: center;    align-items: flex-end;    align-content: center;    padding-top: 0.5rem;    color: white;}#body-wrap.error .aside-list .aside-list-item .content time {    display: none;}/* 代码框主题 */#article-container figure.highlight {    border-radius: 10px;}.iconfont {    font-family: "iconfont" !important;    font-size: 3em;    /* 可以定义图标大小 */    font-style: normal;    -webkit-font-smoothing: antialiased;    -moz-osx-font-smoothing: grayscale;}/* 若已经在项目设置中勾选了彩色选项，则无需再定义图标颜色*/.icon-rat:before {    color: #85c3de;}.icon-ox:before {    color: #ffaf6e;}.icon-tiger:before {    color: #f7c768;}.icon-rabbit:before {    color: #ffbdd8;}.icon-dragon:before {    color: #ff8787;}.icon-snake:before {    color: #c3d686;}.icon-horse:before {    color: #ffaf6e;}.icon-goat:before {    color: #f7c768;}.icon-monkey:before {    color: #c3d686;}.icon-rooster:before {    color: #ff8787;}.icon-dog:before {    color: #85c3de;}.icon-boar:before {    color: #ffbdd8;}/* 文章页H1-H6图标样式效果 *//* 控制风车转动速度 4s那里可以自己调节快慢 */h1::before,h2::before,h3::before,h4::before,h5::before,h6::before {    -webkit-animation: ccc 4s linear infinite;    animation: ccc 4s linear infinite;}/* 控制风车转动方向 -1turn 为逆时针转动，1turn 为顺时针转动，相同数字部分记得统一修改 */@-webkit-keyframes ccc {    0% {        -webkit-transform: rotate(0deg);        transform: rotate(0deg);    }    to {        -webkit-transform: rotate(-1turn);        transform: rotate(-1turn);    }}@keyframes ccc {    0% {        -webkit-transform: rotate(0deg);        transform: rotate(0deg);    }    to {        -webkit-transform: rotate(-1turn);        transform: rotate(-1turn);    }}/* 设置风车颜色 */#content-inner.layout h1::before {    color: #ef50a8;    margin-left: -1.55rem;    font-size: 1.3rem;    margin-top: -0.23rem;}#content-inner.layout h2::before {    color: #fb7061;    margin-left: -1.35rem;    font-size: 1.1rem;    margin-top: -0.12rem;}#content-inner.layout h3::before {    color: #ffbf00;    margin-left: -1.22rem;    font-size: 0.95rem;    margin-top: -0.09rem;}#content-inner.layout h4::before {    color: #a9e000;    margin-left: -1.05rem;    font-size: 0.8rem;    margin-top: -0.09rem;}#content-inner.layout h5::before {    color: #57c850;    margin-left: -0.9rem;    font-size: 0.7rem;    margin-top: 0rem;}#content-inner.layout h6::before {    color: #5ec1e0;    margin-left: -0.9rem;    font-size: 0.66rem;    margin-top: 0rem;}/* s设置风车hover动效 6s那里可以自己调节快慢*/#content-inner.layout h1:hover,#content-inner.layout h2:hover,#content-inner.layout h3:hover,#content-inner.layout h4:hover,#content-inner.layout h5:hover,#content-inner.layout h6:hover {    color: var(--theme-color);}#content-inner.layout h1:hover::before,#content-inner.layout h2:hover::before,#content-inner.layout h3:hover::before,#content-inner.layout h4:hover::before,#content-inner.layout h5:hover::before,#content-inner.layout h6:hover::before {    color: var(--theme-color);    -webkit-animation: ccc 6s linear infinite;    animation: ccc 6s linear infinite;}/* 头像呼吸灯 */[data-theme="light"] .avatar-img {    animation: huxi_light 4s ease-in-out infinite;}[data-theme="dark"] .avatar-img {    animation: huxi_dark 4s ease-in-out infinite;}@keyframes huxi_light {    0% {        box-shadow: 0px 0px 1px 1px #e9f5fa;    }    50% {        box-shadow: 0px 0px 5px 5px #e9f5fa;    }    100% {        box-shadow: 0px 0px 1px 1px #e9f5fa;    }}@keyframes huxi_dark {    0% {        box-shadow: 0px 0px 1px 1px #39c5bb;    }    50% {        box-shadow: 0px 0px 5px 5px #39c5bb;    }    100% {        box-shadow: 0px 0px 1px 1px #39c5bb;    }}:root {    --mj-white: #fff;    --mj-card-bg: #fff;    --mj-theme: #425AEF;    --mj-main: #425AEF;    --mj-secondbg: #ededed;    --mj-card-border: #e3e8f7;    --style-border: 1px solid var(--mj-card-border);    --style-hover-border: 1px solid var(--mj-theme);}/* home top */#home_top {    max-width: 1500px;    width: 100%;    margin-top: .5rem;    padding: 0 15px;    margin: 0 auto;}.home_top_group {    border-radius: 12px;    overflow: auto;    width: 100%;    margin-bottom: 0;}.homeTopGroup {    display: flex;    flex-direction: row;    flex-wrap: nowrap;    width: 100%;    margin-top: 1rem;    overflow: auto;    overflow-x: score;    border-radius: 12px;}.homeTopGroup::-webkit-scrollbar {    display: none;}.homeTopGroup #banner_group {    display: flex;}div#banners {    display: none;}@media screen and (min-width: 1300px) {    .homeTopGroup #banner_group {        width: calc(100% - 600px - 1.5rem);        display: flex;        flex-direction: column;        justify-content: space-between;    }    div#banners {        display: flex;        width: 100%;        height: 100%;        background: var(--mj-main);        margin-bottom: .5rem;        margin-right: .5rem;        border: var(--style-border);        border-radius: 12px;        overflow: hidden;        position: relative;    }    div#banners:hover {        border: var(--style-hover-border);    }    .homeTopGroup .category_group {        flex-direction: row !important;    }    .homeTopGroup .category_item {        width: calc(100% / 3 - .33rem);        height: 100% !important;        margin-right: .5rem;    }    .homeTopGroup .category_item:nth-child(3) {        margin-right: 0;        display: flex !important;    }    #banner-page {        width: 100%;        height: 100%;    }    .top_post_group {        display: flex;        flex-direction: row;        flex-wrap: wrap;        justify-content: flex-end;        height: calc(328px + .5rem);        align-content: space-between;        width: calc(600px + 1.5rem);    }}.homeTopGroup .category_group {    display: flex;    flex-direction: column;    justify-content: space-between;    min-width: 200px;}.homeTopGroup .category_item {    overflow: hidden;    transform: scale(1);    transition: .3s;    height: 48%;    border-radius: 12px;}.homeTopGroup .category_item:nth-child(3) {    display: none;}.homeTopGroup .category_item a.category_button {    height: 100%;    width: 100%;    background: var(--mj-card-bg);    border-radius: 12px;    display: inline-block;    text-align: left;    line-height: 4em;    font-weight: 700;    font-size: .9rem;    color: var(--mj-white);    transition: all .4s cubic-bezier(.39, .575, .565, 1);    transform: scale(1);    overflow: hidden;    font-family: PingFang SC, Hiragino Sans GB, Microsoft YaHei;}.category_button_text {    padding-left: 25px;}a.category_button i {    font-size: 3rem;    opacity: .3;    position: absolute;    right: 15px;    top: 10%;    transition: .3s;    transform: rotate(-10deg);    /*width: 100px;    text-align: center;*/}a.category_button:hover i {    opacity: .8;    transition: .8s;    transition-delay: .15s;    transform: scale(1.1)}a.category_button:hover:after {    width: 3rem;    transition: .8s;}a.category_button:after {    top: 40px;    width: 1rem;    left: 25px;    height: 2px;    background: var(--mj-white);    content: "";    border-radius: 1px;    position: absolute;    transition: .8s;}@media screen and (max-width: 768px) {    #home_top {        padding: 0 5px;    }    .homeTopGroup .category_group {        min-width: 130px !important;    }    .top_post_group .top_post_item {        border-radius: 0;    }}.top_post_group {    display: flex;    position: relative;}.top_post_group .top_post_item {    display: flex;    width: 200px;    min-width: 200px;    height: 164px;    max-height: 164px;    flex-direction: column;    align-items: flex-start;    margin-left: .5rem;    background: var(--mj-card-bg);    border-radius: 12px;    overflow: hidden;    border: var(--style-border);}.top_post_group .top_post_item:hover {    border: var(--style-hover-border);}.top_post_group .top_post_item .post_cover {    width: 100%;    height: 110px;    position: relative;}.top_post_group .top_post_item .post_cover img {    object-fit: cover;    width: 100%;    height: 110px;    background: var(--mj-secondbg);}.top_post_group .top_post_item .post_cover .post_cover_info {    position: absolute;    top: 0;    width: 101%;    height: 100%;    opacity: 0;    background-color: rgba(0, 0, 0, 0.7) !important;    transition: all 0.3s ease;    display: flex;}.top_post_group .top_post_item:hover .post_cover .post_cover_info {    opacity: 1;}.top_post_group .top_post_item .post_cover .post_cover_info .post_cover_text {    color: #fff;    padding: 12px 14px;    font-size: 15px;    font-weight: 400;    margin: 20px 0;    -webkit-line-clamp: 2;    overflow: hidden;    display: -webkit-box;    -webkit-box-orient: vertical;}.top_post_group .top_post_item:hover .post_info,.top_post_group .top_post_item:focus .post_info {    /*background: var(--mj-theme);*/    box-shadow: inset 0 -60px 0 0 var(--mj-theme);}.top_post_group .top_post_item .post_info a {    color: var(--mj-fontcolor) !important;    transition: 0;}.top_post_group .top_post_item:hover .post_info a {    color: var(--mj-white) !important;}.top_post_group .top_post_item .post_info {    padding: .2rem .5rem .3rem .5rem !important;    transition: .3s;    width: 100%;    height: 100%;}.top_post_group .top_post_item .post_info .article-title {    -webkit-line-clamp: 2;    overflow: hidden;    display: -webkit-box;    -webkit-box-orient: vertical;    line-height: 1.4;    justify-content: center;    align-items: flex-end;    align-content: center;    font-weight: 600;    font-size: .8rem !important;    padding: 0 !important;}.loading-img {    background: url(https://www.helloimg.com/i/2024/12/30/6772b40f2159f.jpg) no-repeat center center;    background-size: cover;}/* 帧率检测 */#fps {    position: fixed;    right: 10px;    bottom: 10px;    z-index: 1919810;}[data-theme="light"] #fps {    background-color: rgba(255, 255, 255, 0.85);    backdrop-filter: var(--backdrop-filter);    padding: 4px;    border-radius: 4px;}[data-theme="dark"] #fps {    background-color: rgba(0, 0, 0, 0.72);    backdrop-filter: var(--backdrop-filter);    padding: 4px;    border-radius: 4px;}/* 鼠标样式 */#cursor {    position: fixed;    width: 16px;    height: 16px;    /* 改为青绿色 */    background: rgb(57, 197, 187);    /* 青绿色 */    border-radius: 8px;    opacity: 0.25;    z-index: 10086;    pointer-events: none;    transition: 0.2s ease-in-out;    /* 更快的跟随速度 */    transition-property: background, opacity, transform;}#cursor.hidden {    opacity: 0;}#cursor.hover {    opacity: 0.1;    transform: scale(2.5);    -webkit-transform: scale(2.5);    -moz-transform: scale(2.5);    -ms-transform: scale(2.5);    -o-transform: scale(2.5);}#cursor.active {    opacity: 0.35;    transform: scale(0.5);    -webkit-transform: scale(0.5);    -moz-transform: scale(0.5);    -ms-transform: scale(0.5);    -o-transform: scale(0.5);}/* 侧边栏个人信息卡片动态渐变色 */#aside-content>.card-widget.card-info {    background: linear-gradient(-45deg,            #e8d8b9,            #eccec5,            #a3e9eb,            #bdbdf0,            #eec1ea);    box-shadow: 0 0 5px rgb(66, 68, 68);    position: relative;    background-size: 400% 400%;    -webkit-animation: Gradient 10s ease infinite;    -moz-animation: Gradient 10s ease infinite;    animation: Gradient 10s ease infinite !important;}@-webkit-keyframes Gradient {    0% {        background-position: 0% 50%;    }    50% {        background-position: 100% 50%;    }    100% {        background-position: 0% 50%;    }}@-moz-keyframes Gradient {    0% {        background-position: 0% 50%;    }    50% {        background-position: 100% 50%;    }    100% {        background-position: 0% 50%;    }}@keyframes Gradient {    0% {        background-position: 0% 50%;    }    50% {        background-position: 100% 50%;    }    100% {        background-position: 0% 50%;    }}/* 黑夜模式适配 */[data-theme="dark"] #aside-content>.card-widget.card-info {    background: #191919ee;}/* 个人信息Follow me按钮 */#aside-content>.card-widget.card-info>#card-info-btn {    background-color: #3eb8be;    border-radius: 8px;}/* 一级菜单居中 */#nav .menus_items {    position: absolute !important;    width: fit-content !important;    left: 50% !important;    transform: translateX(-50%) !important;}/* 子菜单横向展示 */#nav .menus_items .menus_item:hover .menus_item_child {    display: flex !important;}/* 这里的2是代表导航栏的第2个元素，即有子菜单的元素，可以按自己需求修改 */.menus_items .menus_item:nth-child(2) .menus_item_child {    left: -125px;}.iconfont {    font-family: "iconfont" !important;    /* 这里可以自定义图标大小 */    font-size: 3em;    font-style: normal;    -webkit-font-smoothing: antialiased;    -moz-osx-font-smoothing: grayscale;}/* 翻页按钮居中#pagination {    width: 100%;    margin: auto;} *//* 波浪css */.main-hero-waves-area {    width: 100%;    position: absolute;    left: 0;    bottom: -11px;    z-index: 5;}.waves-area .waves-svg {    width: 100%;    height: 5rem;}/* Animation */.parallax>use {    animation: move-forever 25s cubic-bezier(0.55, 0.5, 0.45, 0.5) infinite;}.parallax>use:nth-child(1) {    animation-delay: -2s;    animation-duration: 7s;    fill: #b8ccffbd;}.parallax>use:nth-child(2) {    animation-delay: -3s;    animation-duration: 10s;    fill: #83a8ff82;}.parallax>use:nth-child(3) {    animation-delay: -4s;    animation-duration: 13s;    fill: #4e80fd36;}.parallax>use:nth-child(4) {    animation-delay: -5s;    animation-duration: 20s;    fill: #5879ce;}/* 黑色模式背景 */[data-theme="dark"] .parallax>use:nth-child(1) {    animation-delay: -2s;    animation-duration: 7s;    fill: #18171dc8;}[data-theme="dark"] .parallax>use:nth-child(2) {    animation-delay: -3s;    animation-duration: 10s;    fill: #18171d80;}[data-theme="dark"] .parallax>use:nth-child(3) {    animation-delay: -4s;    animation-duration: 13s;    fill: #18171d3e;}[data-theme="dark"] .parallax>use:nth-child(4) {    animation-delay: -5s;    animation-duration: 20s;    fill: #18171d;}@keyframes move-forever {    0% {        transform: translate3d(-90px, 0, 0);    }    100% {        transform: translate3d(85px, 0, 0);    }}/*Shrinking for mobile*/@media (max-width: 768px) {    .waves-area .waves-svg {        height: 40px;        min-height: 40px;    }}/* 设置文字内容 :nth-child(1)的作用是选择第几个 */.el-input.el-input--small.el-input-group.el-input-group--prepend:nth-child(1):before {    content: '输入QQ号会自动获取昵称和头像🐧';}.el-input.el-input--small.el-input-group.el-input-group--prepend:nth-child(2):before {    content: '收到回复将会发送到您的邮箱📧';}.el-input.el-input--small.el-input-group.el-input-group--prepend:nth-child(3):before {    content: '可以通过昵称访问您的网站🔗';}/* 当用户点击输入框时显示 */.el-input.el-input--small.el-input-group.el-input-group--prepend:focus-within::before,.el-input.el-input--small.el-input-group.el-input-group--prepend:focus-within::after {    display: block;}/* 主内容区 */.el-input.el-input--small.el-input-group.el-input-group--prepend::before {    /* 先隐藏起来 */    display: none;    /* 绝对定位 */    position: absolute;    /* 向上移动60像素 */    top: -60px;    /* 文字强制不换行，防止left:50%导致的文字换行 */    white-space: nowrap;    /* 圆角 */    border-radius: 10px;    /* 距离左边50% */    left: 50%;    /* 然后再向左边挪动自身的一半，即可实现居中 */    transform: translate(-50%);    /* 填充 */    padding: 14px 18px;    background: #444;    color: #fff;}/* 小角标 */.el-input.el-input--small.el-input-group.el-input-group--prepend::after {    display: none;    content: '';    position: absolute;    /* 内容大小（宽高）为0且边框大小不为0的情况下，每一条边（4个边）都是一个三角形，组成一个正方形。    我们先将所有边框透明，再给其中的一条边添加颜色就可以实现小三角图标 */    border: 12px solid transparent;    border-top-color: #444;    left: 50%;    transform: translate(-50%, -48px);}:root {    --zhang-welcome-color: #86e62c;}/* 欢迎信息 */#welcome-info {    background: transparent;    /* 设置背景为透明 */    border-radius: 18px;    padding: 8px;}[data-theme="dark"] #welcome-info {    background: transparent;    /* 在暗黑模式下也设置背景为透明 */}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/progress_bar.css"/>
      <url>/css/progress_bar.css</url>
      
        <content type="html"><![CDATA[.pace {    -webkit-pointer-events: none;    pointer-events: none;    -webkit-user-select: none;    -moz-user-select: none;    user-select: none;    z-index: 2000;    position: fixed;    margin: auto;    top: 10px;    left: 0;    right: 0;    height: 8px;    border-radius: 8px;    width: 4rem;    background: #eaecf2;    border: 1px #e3e8f7;    overflow: hidden;}.pace-inactive .pace-progress {    opacity: 0;    transition: 0.3s ease-in;}.pace .pace-progress {    -webkit-box-sizing: border-box;    -moz-box-sizing: border-box;    -ms-box-sizing: border-box;    -o-box-sizing: border-box;    box-sizing: border-box;    -webkit-transform: translate3d(0, 0, 0);    -moz-transform: translate3d(0, 0, 0);    -ms-transform: translate3d(0, 0, 0);    -o-transform: translate3d(0, 0, 0);    transform: translate3d(0, 0, 0);    max-width: 200px;    position: absolute;    z-index: 2000;    display: block;    top: 0;    right: 100%;    height: 100%;    width: 100%;    background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);    animation: gradient 1.5s ease infinite;    background-size: 200%;}.pace.pace-inactive {    opacity: 0;    transition: 0.3s;    top: -8px;}@keyframes gradient {    0% {        background-position: 0% 50%;    }    50% {        background-position: 100% 50%;    }    100% {        background-position: 0% 50%;    }}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/readPercent.css"/>
      <url>/css/readPercent.css</url>
      
        <content type="html"><![CDATA[/* 返回顶部 */button#go-up #percent {    display: none;    font-weight: bold;    font-size: 15px !important;}button#go-up span {    font-size: 12px !important;    margin-right: -1px;}/* 鼠标滑动到按钮上时显示返回顶部图标 */button#go-up:hover i {    display: block !important;}button#go-up:hover #percent {    display: none !important;}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/universe.css"/>
      <url>/css/universe.css</url>
      
        <content type="html"><![CDATA[/* 背景宇宙星光  */#universe {    display: block;    position: fixed;    margin: 0;    padding: 0;    border: 0;    outline: 0;    left: 0;    top: 0;    width: 100%;    height: 100%;    pointer-events: none;    /* 这个是调置顶的优先级的，-1在文章页下面，背景上面，个人推荐这种 */    z-index: -1;}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/ali_font.js"/>
      <url>/js/ali_font.js</url>
      
        <content type="html"><![CDATA[window._iconfont_svg_string_4799245 = '<svg><symbol id="icon-RSS" viewBox="0 0 1024 1024"><path d="M245.323116 913.111046a110.883142 110.883142 0 1 1-110.883141-110.883142A110.883142 110.883142 0 0 1 245.323116 913.111046zM155.901228 1.007785A118.484002 118.484002 0 0 0 61.114026 30.517008 115.801345 115.801345 0 0 0 21.768395 117.25624a117.589783 117.589783 0 0 0 104.1765 114.907126c327.731221 41.581178 603.597746 337.567629 641.15494 688.548541a114.460017 114.460017 0 0 0 114.907126 102.835171 118.036893 118.036893 0 0 0 89.421889-38.898521 113.118689 113.118689 0 0 0 28.615004-89.421889C949.520487 440.963475 586.46762 56.449355 155.901228 1.007785z m7.60086 381.831463A110.883142 110.883142 0 0 0 66.479339 403.406282a117.142674 117.142674 0 0 0-44.710944 92.551655 114.460017 114.460017 0 0 0 89.421889 112.22447c134.132833 32.19188 250.381287 163.642056 279.89051 318.789032a116.248455 116.248455 0 0 0 112.22447 93.445873 116.695564 116.695564 0 0 0 89.421888-42.028287 112.671579 112.671579 0 0 0 24.59102-93.445874C571.713009 643.056943 383.927043 436.492381 161.266541 383.733467z" fill="#FFAD08" ></path><path d="M62.008245 997.614731l155.146976-155.146977A109.541813 109.541813 0 0 1 245.323116 913.111046a110.883142 110.883142 0 0 1-110.883141 110.883142 109.541813 109.541813 0 0 1-72.43173-26.379457z m513.728749-513.28164a804.796995 804.796995 0 0 1 191.362841 436.378816 114.460017 114.460017 0 0 0 114.907126 102.835171 118.036893 118.036893 0 0 0 89.421889-38.898521 113.118689 113.118689 0 0 0 28.615004-89.421889A1035.058358 1035.058358 0 0 0 737.143502 320.691036z m-185.997528 444.426785a116.248455 116.248455 0 0 0 112.22447 93.445874 116.695564 116.695564 0 0 0 89.421888-42.028288 112.671579 112.671579 0 0 0 24.591019-93.445873 670.664163 670.664163 0 0 0-143.52213-301.351764l-162.747837 164.983384a439.061472 439.061472 0 0 1 80.03259 178.396667z" fill="#D68650" ></path></symbol><symbol id="icon-github" viewBox="0 0 1024 1024"><path d="M512 0C229.283787 0 0.142041 234.942803 0.142041 524.867683c0 231.829001 146.647305 428.553077 350.068189 497.952484 25.592898 4.819996 34.976961-11.38884 34.976961-25.294314 0-12.45521-0.469203-45.470049-0.725133-89.276559-142.381822 31.735193-172.453477-70.380469-172.453477-70.380469-23.246882-60.569859-56.816233-76.693384-56.816234-76.693385-46.493765-32.58829 3.540351-31.948468 3.540351-31.948467 51.356415 3.71097 78.356923 54.086324 78.356923 54.086324 45.683323 80.19108 119.817417 57.072162 148.993321 43.593236 4.649376-33.91059 17.915029-57.029508 32.50298-70.167195-113.675122-13.222997-233.151301-58.223843-233.1513-259.341366 0-57.285437 19.919806-104.163095 52.678715-140.846248-5.246544-13.265652-22.820334-66.626844 4.990615-138.884127 0 0 42.996069-14.076094 140.760939 53.787741 40.863327-11.644769 84.627183-17.445825 128.177764-17.6591 43.465272 0.213274 87.271782 6.014331 128.135109 17.6591 97.679561-67.906489 140.59032-53.787741 140.59032-53.787741 27.938914 72.257282 10.407779 125.618474 5.118579 138.884127 32.844219 36.683154 52.593405 83.560812 52.593405 140.846248 0 201.586726-119.646798 245.990404-233.663158 258.957473 18.341577 16.208835 34.721032 48.199958 34.721032 97.210357 0 70.167195-0.639822 126.7275-0.639823 143.960051 0 14.033439 9.213443 30.370239 35.190235 25.209005 203.250265-69.527373 349.769606-266.123484 349.769605-497.867175C1023.857959 234.942803 794.673558 0 512 0" fill="#3E75C3" ></path></symbol><symbol id="icon-steam" viewBox="0 0 1024 1024"><path d="M510.872 0.00004A511.738935 511.738935 0 0 0 0.578065 470.68598l274.473965 113.377986a144.332982 144.332982 0 0 1 89.621989-24.903997L486.810003 382.552991v-2.615999a193.084975 193.084975 0 1 1 193.049976 193.095975h-4.48L501.388001 697.214951c0 2.275 0.193 4.549999 0.193 6.823a144.799982 144.799982 0 0 1-286.766963 28.543996L18.227063 651.159957A511.965935 511.965935 0 1 0 510.792 0.00004h0.069zM321.404024 776.591941L258.540032 750.549945a108.772986 108.772986 0 1 0 59.599993-148.745981l64.967991 26.837996a80.09299 80.09299 0 1 1-61.646992 147.835981v0.114z m487.139938-396.767949A128.661984 128.661984 0 1 0 679.882979 508.439975a128.843984 128.843984 0 0 0 128.662983-128.616983z m-225.061971-0.228a96.661988 96.661988 0 1 1 96.661988 96.661988 96.433988 96.433988 0 0 1-96.661988-96.661988z" fill="#004986" ></path></symbol><symbol id="icon-QQ" viewBox="0 0 1024 1024"><path d="M666.122449 909.061224c-10.44898 0-21.420408-1.044898-31.869388-2.612244-39.183673-4.702041-74.710204-23.510204-100.832653-53.289796-13.583673 5.22449-28.212245 5.22449-41.795918 0-21.420408 28.212245-61.64898 48.065306-108.669388 53.289796-66.35102 7.314286-138.44898-11.493878-144.718367-55.379592-5.22449-34.481633 37.093878-61.126531 81.502041-75.755102-25.6-28.212245-43.363265-63.738776-51.2-101.355102l-0.522449 0.522449c-25.077551 31.346939-41.795918 50.155102-61.126531 50.155102-2.089796 0-4.179592-0.522449-6.269388-1.044898-7.314286-2.612245-13.061224-8.881633-17.240816-18.808164-16.195918-34.481633-9.404082-100.310204 15.15102-150.465306 0 0 0-0.522449 0.522449-0.522449 12.538776-22.465306 27.689796-43.363265 45.453061-62.171428-6.269388-11.493878-10.44898-24.032653-12.016326-37.093878v-3.134694c0.522449-19.330612 10.44898-37.093878 26.644898-47.542857-10.971429-73.142857 9.926531-147.330612 58.514286-203.232653 49.110204-56.946939 120.163265-88.816327 194.873469-86.204081h4.702041c65.306122 0 129.567347 26.122449 177.110204 72.097959 49.110204 47.542857 76.8 112.326531 77.844898 180.767347v7.314285c0.522449 9.926531 0 19.330612-1.044898 29.257143 14.106122 8.881633 21.420408 20.37551 21.420408 48.065306 0 13.583673-1.044898 27.689796-9.926531 36.04898 13.061224 17.763265 28.734694 42.840816 41.27347 62.693877l2.612245 4.179592c20.37551 32.391837 23.510204 74.187755 22.987755 96.130613 0 17.240816-2.089796 58.514286-18.285714 70.530612-3.657143 2.612245-7.314286 3.657143-12.016327 3.657143h-4.179592c-26.122449 0-41.273469-23.510204-57.991837-48.587755l-1.567347-2.089796c-8.881633 36.571429-26.122449 71.053061-50.677551 99.265306 27.167347 9.404082 83.069388 31.346939 75.755103 73.142857-5.746939 35.526531-55.902041 62.171429-114.416327 62.171428z m-388.702041-63.738775z m250.253061-11.493878z m276.375511-140.016326z m-47.020409-235.102041z" fill="#7BD4EF" ></path></symbol><symbol id="icon-bilibili" viewBox="0 0 1129 1024"><path d="M234.909 9.656a80.468 80.468 0 0 1 68.398 0 167.374 167.374 0 0 1 41.843 30.578l160.937 140.82h115.07l160.936-140.82a168.983 168.983 0 0 1 41.843-30.578A80.468 80.468 0 0 1 930.96 76.445a80.468 80.468 0 0 1-17.703 53.914 449.818 449.818 0 0 1-35.406 32.187 232.553 232.553 0 0 1-22.531 18.508h100.585a170.593 170.593 0 0 1 118.289 53.109 171.397 171.397 0 0 1 53.914 118.288v462.693a325.897 325.897 0 0 1-4.024 70.007 178.64 178.64 0 0 1-80.468 112.656 173.007 173.007 0 0 1-92.539 25.75h-738.7a341.186 341.186 0 0 1-72.421-4.024A177.835 177.835 0 0 1 28.91 939.065a172.202 172.202 0 0 1-27.36-92.539V388.662a360.498 360.498 0 0 1 0-66.789A177.03 177.03 0 0 1 162.487 178.64h105.414c-16.899-12.07-31.383-26.555-46.672-39.43a80.468 80.468 0 0 1-25.75-65.984 80.468 80.468 0 0 1 39.43-63.57M216.4 321.873a80.468 80.468 0 0 0-63.57 57.937 108.632 108.632 0 0 0 0 30.578v380.615a80.468 80.468 0 0 0 55.523 80.469 106.218 106.218 0 0 0 34.601 5.632h654.208a80.468 80.468 0 0 0 76.444-47.476 112.656 112.656 0 0 0 8.047-53.109v-354.06a135.187 135.187 0 0 0 0-38.625 80.468 80.468 0 0 0-52.304-54.719 129.554 129.554 0 0 0-49.89-7.242H254.22a268.764 268.764 0 0 0-37.82 0z m0 0" fill="#20B0E3" ></path><path d="M348.369 447.404a80.468 80.468 0 0 1 55.523 18.507 80.468 80.468 0 0 1 28.164 59.547v80.468a80.468 80.468 0 0 1-16.094 51.5 80.468 80.468 0 0 1-131.968-9.656 104.609 104.609 0 0 1-10.46-54.719v-80.468a80.468 80.468 0 0 1 70.007-67.593z m416.02 0a80.468 80.468 0 0 1 86.102 75.64v80.468a94.148 94.148 0 0 1-12.07 53.11 80.468 80.468 0 0 1-132.773 0 95.757 95.757 0 0 1-12.875-57.133V519.02a80.468 80.468 0 0 1 70.007-70.812z m0 0" fill="#20B0E3" ></path></symbol></svg>', (a => { var t = (e = (e = document.getElementsByTagName("script"))[e.length - 1]).getAttribute("data-injectcss"), e = e.getAttribute("data-disable-injectsvg"); if (!e) { var i, n, o, l, c, d = function (t, e) { e.parentNode.insertBefore(t, e) }; if (t && !a.__iconfont__svg__cssinject__) { a.__iconfont__svg__cssinject__ = !0; try { document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>") } catch (t) { console && console.log(t) } } i = function () { var t, e = document.createElement("div"); e.innerHTML = a._iconfont_svg_string_4799245, (e = e.getElementsByTagName("svg")[0]) && (e.setAttribute("aria-hidden", "true"), e.style.position = "absolute", e.style.width = 0, e.style.height = 0, e.style.overflow = "hidden", e = e, (t = document.body).firstChild ? d(e, t.firstChild) : t.appendChild(e)) }, document.addEventListener ? ~["complete", "loaded", "interactive"].indexOf(document.readyState) ? setTimeout(i, 0) : (n = function () { document.removeEventListener("DOMContentLoaded", n, !1), i() }, document.addEventListener("DOMContentLoaded", n, !1)) : document.attachEvent && (o = i, l = a.document, c = !1, m(), l.onreadystatechange = function () { "complete" == l.readyState && (l.onreadystatechange = null, s()) }) } function s() { c || (c = !0, o()) } function m() { try { l.documentElement.doScroll("left") } catch (t) { return void setTimeout(m, 50) } s() } })(window);]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/cursor.js"/>
      <url>/js/cursor.js</url>
      
        <content type="html"><![CDATA[var CURSOR;Math.lerp = (a, b, n) => (1 - n) * a + n * b;const getStyle = (el, attr) => {    try {        return window.getComputedStyle            ? window.getComputedStyle(el)[attr]            : el.currentStyle[attr];    } catch (e) { }    return "";};class Cursor {    constructor() {        this.pos = { curr: null, prev: null };        this.pt = [];        this.create();        this.init();        this.render();    }    move(left, top) {        this.cursor.style["left"] = `${left}px`;        this.cursor.style["top"] = `${top}px`;    }    create() {        if (!this.cursor) {            this.cursor = document.createElement("div");            this.cursor.id = "cursor";            this.cursor.classList.add("hidden");            document.body.append(this.cursor);        }        var el = document.getElementsByTagName('*');        for (let i = 0; i < el.length; i++)            if (getStyle(el[i], "cursor") == "pointer")                this.pt.push(el[i].outerHTML);        document.body.appendChild((this.scr = document.createElement("style")));        // 这里改变鼠标指针的颜色 由svg生成        this.scr.innerHTML = `* {cursor: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8' width='8px' height='8px'><circle cx='4' cy='4' r='4' opacity='.5'/></svg>") 4 4, auto}`;    }    refresh() {        this.scr.remove();        this.cursor.classList.remove("hover");        this.cursor.classList.remove("active");        this.pos = { curr: null, prev: null };        this.pt = [];        this.create();        this.init();        this.render();    }    init() {        document.onmouseover = e => this.pt.includes(e.target.outerHTML) && this.cursor.classList.add("hover");        document.onmouseout = e => this.pt.includes(e.target.outerHTML) && this.cursor.classList.remove("hover");        document.onmousemove = e => { (this.pos.curr == null) && this.move(e.clientX - 8, e.clientY - 8); this.pos.curr = { x: e.clientX - 8, y: e.clientY - 8 }; this.cursor.classList.remove("hidden"); };        document.onmouseenter = e => this.cursor.classList.remove("hidden");        document.onmouseleave = e => this.cursor.classList.add("hidden");        document.onmousedown = e => this.cursor.classList.add("active");        document.onmouseup = e => this.cursor.classList.remove("active");    }    render() {        if (this.pos.prev) {            this.pos.prev.x = Math.lerp(this.pos.prev.x, this.pos.curr.x, 0.15);            this.pos.prev.y = Math.lerp(this.pos.prev.y, this.pos.curr.y, 0.15);            this.move(this.pos.prev.x, this.pos.prev.y);        } else {            this.pos.prev = this.pos.curr;        }        requestAnimationFrame(() => this.render());    }}(() => {    CURSOR = new Cursor();    // 需要重新获取列表时，使用 CURSOR.refresh()})();]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/custom.js"/>
      <url>/js/custom.js</url>
      
        <content type="html"><![CDATA[document.addEventListener('keydown', function (event) {    if (event.key === 'F12') {        new Vue({            data: function () {                this.$notify({                    title: "你已被发现😜",                    message: "小伙子，扒源记住要遵循GPL协议！",                    position: 'top-left',                    offset: 50,                    showClose: true,                    type: "warning",                    duration: 5000                });            }        });    }});]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/debounce.js"/>
      <url>/js/debounce.js</url>
      
        <content type="html"><![CDATA[// 防抖全局计时器let TT = null; // 用来控制事件的触发// 防抖函数: fn -> 逻辑, time -> 防抖时间function debounce(fn, time) {    if (TT !== null) clearTimeout(TT); // 如果有正在运行的计时器，先清除    TT = setTimeout(fn, time); // 设置新的计时器}// 复制提醒document.addEventListener("copy", function () {    debounce(function () {        new Vue({            data: function () {                this.$notify({                    title: "哎嘿！复制成功🍬",                    message: "若要转载最好保留原文链接哦",                    position: 'top-left',                    offset: 50,                    showClose: true,                    type: "success",                    duration: 5000                });            }        });    }, 300); // 300ms 的防抖时间});]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/fps.js"/>
      <url>/js/fps.js</url>
      
        <content type="html"><![CDATA[if (window.localStorage.getItem("fpson") == undefined || window.localStorage.getItem("fpson") == "1") {    var rAF = function () {        return (            window.requestAnimationFrame ||            window.webkitRequestAnimationFrame ||            function (callback) {                window.setTimeout(callback, 1000 / 60);            }        );    }();    var frame = 0;    var allFrameCount = 0;    var lastTime = Date.now();    var lastFameTime = Date.now();    var loop = function () {        var now = Date.now();        var fs = (now - lastFameTime);        var fps = Math.round(1000 / fs);        lastFameTime = now;        // 不置 0，在动画的开头及结尾记录此值的差值算出 FPS        allFrameCount++;        frame++;        if (now > 1000 + lastTime) {            var fps = Math.round((frame * 1000) / (now - lastTime));            if (fps <= 5) {                var kd = `<span style="color:#bd0000">卡成ppt🤢</span>`            } else if (fps <= 15) {                var kd = `<span style="color:red">电竞级帧率😖</span>`            } else if (fps <= 25) {                var kd = `<span style="color:orange">有点难受😨</span>`            } else if (fps < 35) {                var kd = `<span style="color:#9338e6">不太流畅🙄</span>`            } else if (fps <= 45) {                var kd = `<span style="color:#08b7e4">还不错哦😁</span>`            } else {                var kd = `<span style="color:#39c5bb">十分流畅🤣</span>`            }            document.getElementById("fps").innerHTML = `FPS:${fps} ${kd}`;            frame = 0;            lastTime = now;        };        rAF(loop);    }    loop();} else {    document.getElementById("fps").style = "display:none!important"}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/hexo_githubcalendar.js"/>
      <url>/js/hexo_githubcalendar.js</url>
      
        <content type="html"><![CDATA[function GithubCalendar(git_githubapiurl, git_color, git_user) {    if (document.getElementById('github_container')) {        var github_canlendar = (git_user, git_githubapiurl, git_color) => {            var git_fixed = 'fixed';            var git_px = 'px';            var git_month = ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'];            var git_monthchange = [];            var git_oneyearbeforeday = '';            var git_thisday = '';            var git_amonthago = '';            var git_aweekago = '';            var git_weekdatacore = 0;            var git_datacore = 0;            var git_total = 0;            var git_datadate = '';            var git_git_data = [];            var git_positionplusdata = [];            var git_firstweek = [];            var git_lastweek = [];            var git_beforeweek = [];            var git_thisweekdatacore = 0;            var git_mounthbeforeday = 0;            var git_mounthfirstindex = 0;            var git_crispedges = 'crispedges';            var git_thisdayindex = 0;            var git_amonthagoindex = 0;            var git_amonthagoweek = [];            var git_firstdate = [];            var git_first2date = [];            var git_montharrbefore = [];            var git_monthindex = 0;            var retinaCanvas = (canvas, context, ratio) => {                if (ratio > 1) {                    var canvasWidth = canvas.width;                    var canvasHeight = canvas.height;                    canvas.width = canvasWidth * ratio;                    canvas.height = canvasHeight * ratio;                    canvas.style.width = '100%';                    canvas.style.height = canvasHeight + 'px';                    context.scale(ratio, ratio);                }            }            var responsiveChart = () => {                if (document.getElementById("gitcanvas")) {                    var git_tooltip_container = document.getElementById('git_tooltip_container');                    var ratio = window.devicePixelRatio || 1                    var git_x = '';                    var git_y = '';                    var git_span1 = '';                    var git_span2 = '';                    var github_calendar_c = document.getElementById("gitcanvas");                    github_calendar_c.style.width = '100%';                    github_calendar_c.style.height = '';                    var cmessage = document.getElementById("gitmessage");                    var github_calendar_ctx = github_calendar_c.getContext("2d");                    width = github_calendar_c.width = document.getElementById("gitcalendarcanvasbox").offsetWidth;                    height = github_calendar_c.height = 9 * 0.96 * github_calendar_c.width / git_data.length;                    retinaCanvas(github_calendar_c, github_calendar_ctx, ratio)                    var linemaxwitdh = height / 9;                    var lineminwitdh = 0.8 * linemaxwitdh;                    var setposition = { x: 0.02 * width, y: 0.025 * width };                    for (var week in git_data) {                        weekdata = git_data[week];                        for (var day in weekdata) {                            var dataitem = { date: "", count: "", x: 0, y: 0 };                            git_positionplusdata.push(dataitem);                            github_calendar_ctx.fillStyle = git_thiscolor(git_color, weekdata[day].count);                            setposition.y = Math.round(setposition.y * 100) / 100;                            dataitem.date = weekdata[day].date;                            dataitem.count = weekdata[day].count;                            dataitem.x = setposition.x;                            dataitem.y = setposition.y;                            github_calendar_ctx.fillRect(setposition.x, setposition.y, lineminwitdh, lineminwitdh);                            setposition.y = setposition.y + linemaxwitdh                        }                        setposition.y = 0.025 * width;                        setposition.x = setposition.x + linemaxwitdh;                    }                    if (document.body.clientWidth > 700) {                        github_calendar_ctx.font = "600  Arial";                        github_calendar_ctx.fillStyle = '#aaa';                        github_calendar_ctx.fillText("日", 0, 1.9 * linemaxwitdh);                        github_calendar_ctx.fillText("二", 0, 3.9 * linemaxwitdh);                        github_calendar_ctx.fillText("四", 0, 5.9 * linemaxwitdh);                        github_calendar_ctx.fillText("六", 0, 7.9 * linemaxwitdh);                        var monthindexlist = github_calendar_c.width / 24;                        for (var index in git_monthchange) {                            github_calendar_ctx.fillText(git_monthchange[index], monthindexlist, 0.7 * linemaxwitdh);                            monthindexlist = monthindexlist + github_calendar_c.width / 12                        }                    }                    github_calendar_c.onmousemove = function (event) {                        if (document.querySelector('.gitmessage')) {                            git_tooltip_container.innerHTML = ""                        }                        getMousePos(github_calendar_c, event)                    };                    git_tooltip_container.onmousemove = function (event) {                        if (document.querySelector('.gitmessage')) {                            git_tooltip_container.innerHTML = ""                        }                    };                    var getMousePos = (canvas, event) => {                        var rect = canvas.getBoundingClientRect();                        var x = event.clientX - rect.left * (canvas.width / rect.width);                        var y = event.clientY - rect.top * (canvas.height / rect.height);                        for (var item of git_positionplusdata) {                            var lenthx = x - item.x;                            var lenthy = y - item.y;                            if (0 < lenthx && lenthx < lineminwitdh) {                                if (0 < lenthy && lenthy < lineminwitdh) {                                    git_span1 = item.date;                                    git_span2 = item.count;                                    git_x = event.clientX - 100;                                    git_y = event.clientY - 60;                                    html = tooltip_html(git_x, git_y, git_span1, git_span2);                                    append_div_gitcalendar(git_tooltip_container, html)                                }                            }                        }                    }                }            }            var addlastmonth = () => {                if (git_thisdayindex === 0) {                    thisweekcore(52);                    thisweekcore(51);                    thisweekcore(50);                    thisweekcore(49);                    thisweekcore(48);                    git_thisweekdatacore += git_firstdate[6].count;                    git_amonthago = git_firstdate[6].date                } else {                    thisweekcore(52);                    thisweekcore(51);                    thisweekcore(50);                    thisweekcore(49);                    thisweek2core();                    git_amonthago = git_first2date[git_thisdayindex - 1].date                }            }            var thisweek2core = () => {                for (var i = git_thisdayindex - 1; i < git_first2date.length; i++) {                    git_thisweekdatacore += git_first2date[i].count                }            }            var thisweekcore = (index) => {                for (var item of git_data[index]) {                    git_thisweekdatacore += item.count                }            }            var addlastweek = () => {                for (var item of git_lastweek) {                    git_weekdatacore += item.count                }            }            var addbeforeweek = () => {                for (var i = git_thisdayindex; i < git_beforeweek.length; i++) {                    git_weekdatacore += git_beforeweek[i].count                }            }            var addweek = (data) => {                if (git_thisdayindex === 6) {                    git_aweekago = git_lastweek[0].date;                    addlastweek()                } else {                    lastweek = data.contributions[51];                    git_aweekago = lastweek[git_thisdayindex + 1].date;                    addlastweek();                    addbeforeweek()                }            }            fetch(git_githubapiurl).then(data => data.json()).then(data => {                if (document.getElementById('github_loading')) {                    document.getElementById('github_loading').remove()                };                git_data = data.contributions;                git_total = data.total;                git_first2date = git_data[48];                git_firstdate = git_data[47];                git_firstweek = data.contributions[0];                git_lastweek = data.contributions[52];                git_beforeweek = data.contributions[51];                git_thisdayindex = git_lastweek.length - 1;                git_thisday = git_lastweek[git_thisdayindex].date;                git_oneyearbeforeday = git_firstweek[0].date;                git_monthindex = git_thisday.substring(5, 7) * 1;                git_montharrbefore = git_month.splice(git_monthindex, 12 - git_monthindex);                git_monthchange = git_montharrbefore.concat(git_month);                addweek(data);                addlastmonth();                var html = github_main_box(git_monthchange, git_data, git_user, git_color, git_total, git_thisweekdatacore, git_weekdatacore, git_oneyearbeforeday, git_thisday, git_aweekago, git_amonthago);                append_div_gitcalendar(github_container, html);                responsiveChart()            }).catch(function (error) {                console.log(error)            });            window.onresize = function () {                responsiveChart()            };            window.onscroll = function () {                if (document.querySelector('.gitmessage')) {                    git_tooltip_container.innerHTML = ""                }            };            var git_thiscolor = (color, x) => {                if (x === 0) {                    var i = parseInt(x / 2);                    return color[0]                } else if (x < 2) {                    return color[1]                } else if (x < 20) {                    var i = parseInt(x / 2);                    return color[i]                } else {                    return color[9]                }            };            var tooltip_html = (x, y, span1, span2) => {                var html = '';                html += '<div class="gitmessage" style="top:' + y + 'px;left:' + x + 'px;position: fixed;z-index:9999"><div class="angle-wrapper" style="display:block;"><span>' + span1 + '&nbsp;</span><span>' + span2 + ' 次上传</span></div></div>';                return html            };            var github_canvas_box = () => {                var html = '<div id="gitcalendarcanvasbox"> <canvas id="gitcanvas" style="animation: none;"></canvas></div>';                return html            };            var github_info_box = (user, color) => {                var html = '';                html += '<div id="git_tooltip_container"></div><div class="contrib-footer clearfix mt-1 mx-3 px-3 pb-1"><div class="float-left text-gray">数据来源 <a href="https://github.com/' + user + '" target="blank">@' + user + '</a></div><div class="contrib-legend text-gray">Less <ul class="legend"><li style="background-color:' + color[0] + '"></li><li style="background-color:' + color[2] + '"></li><li style="background-color:' + color[4] + '"></li><li style="background-color:' + color[6] + '"></li><li style="background-color:' + color[8] + '"></li></ul>More </div></div>';                return html            };            var github_main_box = (monthchange, git_data, user, color, total, thisweekdatacore, weekdatacore, oneyearbeforeday, thisday, aweekago, amonthago) => {                var html = '';                var canvasbox = github_canvas_box();                var infobox = github_info_box(user, color);                var style = github_main_style();                html += '<div class="position-relative"><div class="border py-2 graph-before-activity-overview"><div class="js-gitcalendar-graph mx-md-2 mx-3 d-flex flex-column flex-items-end flex-xl-items-center overflow-hidden pt-1 is-graph-loading graph-canvas gitcalendar-graph height-full text-center">' + canvasbox + '</div>' + infobox + '</div></div>';                html += '<div style="display:flex;width:100%"><div class="contrib-column contrib-column-first table-column"><span class="text-muted">过去一年提交</span><span class="contrib-number">' + total + '</span><span class="text-muted">' + oneyearbeforeday + '&nbsp;-&nbsp;' + thisday + '</span></div><div class="contrib-column table-column"><span class="text-muted">最近一月提交</span><span class="contrib-number">' + thisweekdatacore + '</span><span class="text-muted">' + amonthago + '&nbsp;-&nbsp;' + thisday + '</span></div><div class="contrib-column table-column"><span class="text-muted">最近一周提交</span><span class="contrib-number">' + weekdatacore + '</span><span class="text-muted">' + aweekago + '&nbsp;-&nbsp;' + thisday + '</span></div></div>' + style;                return html            };            var github_main_style = () => {                style = '<style>#github_container{text-align:center;margin:0 auto;width:100%;display:flex;display:-webkit-flex;justify-content:center;align-items:center;flex-wrap:wrap;}.gitcalendar-graph text.wday,.gitcalendar-graph text.month{font-size:10px;fill:#aaa;}.contrib-legend{text-align:right;padding:0 14px 10px 0;display:inline-block;float:right;}.contrib-legend .legend{display:inline-block;list-style:none;margin:0 5px;position:relative;bottom:-1px;padding:0;}.contrib-legend .legend li{display:inline-block;width:10px;height:10px;}.text-small{font-size:12px;color:#767676;}.gitcalendar-graph{padding:15px 0 0;text-align:center;}.contrib-column{text-align:center;border-top:1px dashed #818181;font-size:11px;}.contrib-column-first{border-left:0;}.table-column{padding:10px;display:table-cell;flex:1;vertical-align:top;}.contrib-number{font-weight:300;line-height:1.3em;font-size:24px;display:block;}.gitcalendar img.spinner{width:70px;margin-top:50px;min-height:70px;}.monospace{text-align:center;color:#000;font-family:monospace;}.monospace a{color:#1D75AB;text-decoration:none;}.contrib-footer{font-size:11px;padding:0 10px 12px;text-align:left;width:100%;box-sizing:border-box;height:26px;}.left.text-muted{float:left;margin-left:9px;color:#767676;}.left.text-muted a{color:#4078c0;text-decoration:none;}.left.text-muted a:hover,.monospace a:hover{text-decoration:underline;}h2.f4.text-normal.mb-3{display:none;}.float-left.text-gray{float:left;}#user-activity-overview{display:none;}.day-tooltip{white-space:nowrap;position:absolute;z-index:99999;padding:10px;font-size:12px;color:#959da5;text-align:center;background:rgba(0,0,0,.85);border-radius:3px;display:none;pointer-events:none;}.day-tooltip strong{color:#dfe2e5;}.day-tooltip.is-visible{display:block;}.day-tooltip:after{position:absolute;bottom:-10px;left:50%;width:5px;height:5px;box-sizing:border-box;margin:0 0 0 -5px;content:" ";border:5px solid transparent;border-top-color:rgba(0,0,0,.85)}.position-relative{width:100%;}@media screen and (max-width:650px){.contrib-column{display:none}}.angle-wrapper{z-index:9999;display:inline;width:200px;height:40px;position:relative;padding:5px 0;background:rgba(0,0,0,0.8);border-radius:8px;text-align:center;color:white;}.angle-box{position:fixed;padding:10px}.angle-wrapper span{padding-bottom:1em;}.angle-wrapper:before{content:"";width:0;height:0;border:10px solid transparent;border-top-color:rgba(0,0,0,0.8);position:absolute;left:47.5%;top:100%;}</style>';                return style            }        };        var append_div_gitcalendar = (parent, text) => {            if (typeof text === 'string') {                var temp = document.createElement('div');                temp.innerHTML = text;                var frag = document.createDocumentFragment();                while (temp.firstChild) {                    frag.appendChild(temp.firstChild)                }                parent.appendChild(frag)            } else {                parent.appendChild(text)            }        };        var github_container = document.getElementById('github_container');        var github_loading = document.getElementById('github_loading');        github_canlendar(git_user, git_githubapiurl, git_color)    }}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/readPercent.js"/>
      <url>/js/readPercent.js</url>
      
        <content type="html"><![CDATA[window.onscroll = percent;// 执行函数// 页面百分比function percent() {    let a = document.documentElement.scrollTop || window.pageYOffset, // 卷去高度        b = Math.max(document.body.scrollHeight, document.documentElement.scrollHeight, document.body.offsetHeight, document.documentElement.offsetHeight, document.body.clientHeight, document.documentElement.clientHeight) - document.documentElement.clientHeight, // 整个网页高度        result = Math.round(a / b * 100), // 计算百分比        up = document.querySelector("#go-up") // 获取按钮    if (result <= 95) {        up.childNodes[0].style.display = 'none'        up.childNodes[1].style.display = 'block'        up.childNodes[1].innerHTML = result;    } else {        up.childNodes[1].style.display = 'none'        up.childNodes[0].style.display = 'block'    }}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/share.js"/>
      <url>/js/share.js</url>
      
        <content type="html"><![CDATA[// 分享本页function share_() {    let url = window.location.origin + window.location.pathname    try {        // 截取标题        var title = document.title;        var subTitle = title.endsWith("| LANSGANBS🥝") ? title.substring(0, title.length - 14) : title;        navigator.clipboard.writeText('LANSGANBS🥝的站内分享\n标题：' + subTitle + '\n链接：' + url + '\n欢迎来访！🍭🍭🍭');        new Vue({            data: function () {                this.$notify({                    title: "成功复制分享信息🎉",                    message: "您现在可以通过粘贴直接跟小伙伴分享了！",                    position: 'top-left',                    offset: 50,                    showClose: true,                    type: "success",                    duration: 5000                });                // return { visible: false }            }        })    } catch (err) {        console.error('复制失败！', err);    }    // new ClipboardJS(".share", { text: function () { return '标题：' + document.title + '\n链接：' + url } });    // btf.snackbarShow("本页链接已复制到剪切板，快去分享吧~")}// 防抖function share() {    debounce(share_, 300);}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/title.js"/>
      <url>/js/title.js</url>
      
        <content type="html"><![CDATA[//动态标题var OriginTitile = document.title;var titleTime;document.addEventListener('visibilitychange', function () {    if (document.hidden) {        //离开当前页面时标签显示内容        document.title = '👀跑哪里去了~';        clearTimeout(titleTime);    } else {        //返回当前页面时标签显示内容        document.title = '🐖抓到你啦～';        //两秒后变回正常标题        titleTime = setTimeout(function () {            document.title = OriginTitile;        }, 2000);    }});]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/txmap.js"/>
      <url>/js/txmap.js</url>
      
        <content type="html"><![CDATA[//get请求$.ajax({    type: 'get',    url: 'https://apis.map.qq.com/ws/location/v1/ip',    data: {        key: 'COJBZ-YMB6L-ONRPD-MTKQX-E62TS-ERF5D',        output: 'jsonp',    },    dataType: 'jsonp',    success: function (res) {        ipLoacation = res;    }})function getDistance(e1, n1, e2, n2) {    const R = 6371    const { sin, cos, asin, PI, hypot } = Math    let getPoint = (e, n) => {        e *= PI / 180        n *= PI / 180        return { x: cos(n) * cos(e), y: cos(n) * sin(e), z: sin(n) }    }    let a = getPoint(e1, n1)    let b = getPoint(e2, n2)    let c = hypot(a.x - b.x, a.y - b.y, a.z - b.z)    let r = asin(c / 2) * 2 * R    return Math.round(r);}function showWelcome() {    let dist = getDistance(125.974348, 41.734034, ipLoacation.result.location.lng, ipLoacation.result.location.lat);    let pos = ipLoacation.result.ad_info.nation;    let ip;    let posdesc;    //根据国家、省份、城市信息自定义欢迎语    switch (ipLoacation.result.ad_info.nation) {        case "日本":            posdesc = "よろしく，一起去看樱花吗";            break;        case "美国":            posdesc = "Let us live in peace!";            break;        case "英国":            posdesc = "想同你一起夜乘伦敦眼";            break;        case "俄罗斯":            posdesc = "干了这瓶伏特加！";            break;        case "法国":            posdesc = "C'est La Vie";            break;        case "德国":            posdesc = "Die Zeit verging im Fluge.";            break;        case "澳大利亚":            posdesc = "一起去大堡礁吧！";            break;        case "加拿大":            posdesc = "拾起一片枫叶赠予你";            break;        case "中国":            pos = ipLoacation.result.ad_info.province + " " + ipLoacation.result.ad_info.city + " " + ipLoacation.result.ad_info.district;            ip = ipLoacation.result.ip;            switch (ipLoacation.result.ad_info.province) {                case "北京市":                    posdesc = "北——京——欢迎你~~~";                    break;                case "天津市":                    posdesc = "讲段相声吧。";                    break;                case "河北省":                    posdesc = "山势巍巍成壁垒，天下雄关。铁马金戈由此向，无限江山。";                    break;                case "山西省":                    posdesc = "展开坐具长三尺，已占山河五百余。";                    break;                case "内蒙古自治区":                    posdesc = "天苍苍，野茫茫，风吹草低见牛羊。";                    break;                case "辽宁省":                    posdesc = "我想吃烤鸡架！";                    break;                case "吉林省":                    switch (ipLoacation.result.ad_info.city) {                        case "通化市":                            posdesc = "这是我的家乡，不妨在夜晚去龙兴里逛一逛。";                            break;                        default:                            posdesc = "状元阁就是东北烧烤之王。";                            break;                    }                    break;                case "黑龙江省":                    posdesc = "很喜欢哈尔滨大剧院。";                    break;                case "上海市":                    posdesc = "众所周知，中国只有两个城市。";                    break;                case "江苏省":                    switch (ipLoacation.result.ad_info.city) {                        case "南京市":                            posdesc = "这是我挺想去的城市啦。";                            break;                        case "苏州市":                            posdesc = "上有天堂，下有苏杭。";                            break;                        default:                            posdesc = "散装是必须要散装的。";                            break;                    }                    break;                case "浙江省":                    posdesc = "东风渐绿西湖柳，雁已还人未南归。";                    break;                case "河南省":                    switch (ipLoacation.result.ad_info.city) {                        case "郑州市":                            posdesc = "豫州之域，天地之中。";                            break;                        case "南阳市":                            posdesc = "臣本布衣，躬耕于南阳。此南阳非彼南阳！";                            break;                        case "驻马店市":                            posdesc = "峰峰有奇石，石石挟仙气。嵖岈山的花很美哦！";                            break;                        case "开封市":                            posdesc = "刚正不阿包青天。";                            break;                        case "洛阳市":                            posdesc = "洛阳牡丹甲天下。";                            break;                        default:                            posdesc = "可否带我品尝河南烩面啦？";                            break;                    }                    break;                case "安徽省":                    posdesc = "蚌埠住了，芜湖起飞。";                    break;                case "福建省":                    posdesc = "井邑白云间，岩城远带山。";                    break;                case "江西省":                    posdesc = "落霞与孤鹜齐飞，秋水共长天一色。";                    break;                case "山东省":                    posdesc = "遥望齐州九点烟，一泓海水杯中泻。";                    break;                case "湖北省":                    posdesc = "来碗热干面！";                    break;                case "湖南省":                    posdesc = "74751，长沙斯塔克。";                    break;                case "广东省":                    posdesc = "老板来两斤福建人。";                    break;                case "广西壮族自治区":                    posdesc = "桂林山水甲天下。";                    break;                case "海南省":                    posdesc = "朝观日出逐白浪，夕看云起收霞光。";                    break;                case "四川省":                    posdesc = "康康川妹子。";                    break;                case "贵州省":                    posdesc = "茅台，学生，再塞200。";                    break;                case "云南省":                    posdesc = "玉龙飞舞云缠绕，万仞冰川直耸天。";                    break;                case "西藏自治区":                    posdesc = "躺在茫茫草原上，仰望蓝天。";                    break;                case "陕西省":                    posdesc = "来份臊子面加馍。";                    break;                case "甘肃省":                    posdesc = "羌笛何须怨杨柳，春风不度玉门关。";                    break;                case "青海省":                    posdesc = "牛肉干和老酸奶都好好吃。";                    break;                case "宁夏回族自治区":                    posdesc = "大漠孤烟直，长河落日圆。";                    break;                case "新疆维吾尔自治区":                    posdesc = "驼铃古道丝绸路，胡马犹闻唐汉风。";                    break;                case "台湾省":                    posdesc = "我在这头，大陆在那头。";                    break;                case "香港特别行政区":                    posdesc = "永定贼有残留地鬼嚎，迎击光非岁玉。";                    break;                case "澳门特别行政区":                    posdesc = "性感荷官，在线发牌。";                    break;                default:                    posdesc = "带我去你的城市逛逛吧！";                    break;            }            break;        default:            posdesc = "带我去你的国家逛逛吧。";            break;    }    //根据本地时间切换欢迎语    let timeChange;    let date = new Date();    if (date.getHours() >= 5 && date.getHours() < 11) timeChange = "<span>上午好</span>，一日之计在于晨！";    else if (date.getHours() >= 11 && date.getHours() < 13) timeChange = "<span>中午好</span>，该摸鱼吃午饭了。";    else if (date.getHours() >= 13 && date.getHours() < 15) timeChange = "<span>下午好</span>，懒懒地睡个午觉吧！";    else if (date.getHours() >= 15 && date.getHours() < 16) timeChange = "<span>三点几啦</span>，一起饮茶呀！";    else if (date.getHours() >= 16 && date.getHours() < 19) timeChange = "<span>夕阳无限好！</span>";    else if (date.getHours() >= 19 && date.getHours() < 24) timeChange = "<span>晚上好</span>，夜生活嗨起来！";    else timeChange = "夜深了，早点休息，少熬夜。";    try {        //自定义文本和需要放的位置        document.getElementById("welcome-info").innerHTML =            `<b><center>🎉 欢迎信息 🎉</center>&emsp;&emsp;欢迎来自 <span style="color:var(--theme-color)">${pos}</span> 的小伙伴，${timeChange}您现在距离站长家约 <span style="color:var(--theme-color)">${dist}</span> 公里， ${posdesc}</b>`;    } catch (err) {        // console.log("Pjax无法获取#welcome-info元素🙄🙄🙄")    }}window.onload = showWelcome;// 如果使用了pjax在加上下面这行代码document.addEventListener('pjax:complete', showWelcome);]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/universe.js"/>
      <url>/js/universe.js</url>
      
        <content type="html"><![CDATA[function dark() { window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame; var n, e, i, h, t = .05, s = document.getElementById("universe"), o = !0, a = "180,184,240", r = "226,225,142", d = "226,225,224", c = []; function f() { n = window.innerWidth, e = window.innerHeight, i = .216 * n, s.setAttribute("width", n), s.setAttribute("height", e) } function u() { h.clearRect(0, 0, n, e); for (var t = c.length, i = 0; i < t; i++) { var s = c[i]; s.move(), s.fadeIn(), s.fadeOut(), s.draw() } } function y() { this.reset = function () { this.giant = m(3), this.comet = !this.giant && !o && m(10), this.x = l(0, n - 10), this.y = l(0, e), this.r = l(1.1, 2.6), this.dx = l(t, 6 * t) + (this.comet + 1 - 1) * t * l(50, 120) + 2 * t, this.dy = -l(t, 6 * t) - (this.comet + 1 - 1) * t * l(50, 120), this.fadingOut = null, this.fadingIn = !0, this.opacity = 0, this.opacityTresh = l(.2, 1 - .4 * (this.comet + 1 - 1)), this.do = l(5e-4, .002) + .001 * (this.comet + 1 - 1) }, this.fadeIn = function () { this.fadingIn && (this.fadingIn = !(this.opacity > this.opacityTresh), this.opacity += this.do) }, this.fadeOut = function () { this.fadingOut && (this.fadingOut = !(this.opacity < 0), this.opacity -= this.do / 2, (this.x > n || this.y < 0) && (this.fadingOut = !1, this.reset())) }, this.draw = function () { if (h.beginPath(), this.giant) h.fillStyle = "rgba(" + a + "," + this.opacity + ")", h.arc(this.x, this.y, 2, 0, 2 * Math.PI, !1); else if (this.comet) { h.fillStyle = "rgba(" + d + "," + this.opacity + ")", h.arc(this.x, this.y, 1.5, 0, 2 * Math.PI, !1); for (var t = 0; t < 30; t++)h.fillStyle = "rgba(" + d + "," + (this.opacity - this.opacity / 20 * t) + ")", h.rect(this.x - this.dx / 4 * t, this.y - this.dy / 4 * t - 2, 2, 2), h.fill() } else h.fillStyle = "rgba(" + r + "," + this.opacity + ")", h.rect(this.x, this.y, this.r, this.r); h.closePath(), h.fill() }, this.move = function () { this.x += this.dx, this.y += this.dy, !1 === this.fadingOut && this.reset(), (this.x > n - n / 4 || this.y < 0) && (this.fadingOut = !0) }, setTimeout(function () { o = !1 }, 50) } function m(t) { return Math.floor(1e3 * Math.random()) + 1 < 10 * t } function l(t, i) { return Math.random() * (i - t) + t } f(), window.addEventListener("resize", f, !1), function () { h = s.getContext("2d"); for (var t = 0; t < i; t++)c[t] = new y, c[t].reset(); u() }(), function t() { document.getElementsByTagName('html')[0].getAttribute('data-theme') == 'dark' && u(), window.requestAnimationFrame(t) }() };dark()]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>link</title>
      <link href="/link/index.html"/>
      <url>/link/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/gitcalendar/css/gitcalendar.css"/>
      <url>/gitcalendar/css/gitcalendar.css</url>
      
        <content type="html"><![CDATA[.calendar {    font-family: SourceHanSans-Medium;    border: 1px solid #DDDDDD;    border-radius: 3px;    min-height: 120px;    text-align: center;    margin: 0 auto;    border-width: 0px;    width: 100%;    display: flex;    display: -webkit-flex;    justify-content: center;    align-items: center;    flex-wrap: wrap;}.calendar-graph text.wday,.calendar-graph text.month {    font-size: 10px;    fill: #aaa;}.contrib-legend {    text-align: right;    padding: 0 14px 10px 0;    display: inline-block;    float: right;}.contrib-legend .legend {    display: inline-block;    list-style: none;    margin: 0 5px;    position: relative;    bottom: -1px;    padding: 0;}.contrib-legend .legend li {    display: inline-block;    width: 10px;    height: 10px;}.text-small {    font-size: 12px;    color: #767676;}.calendar-graph {    padding: 5px 0 0;    text-align: center;}.contrib-column {    text-align: center;    border-left: 1px solid #ddd;    border-top: 1px solid #ddd;    font-size: 11px;}.contrib-column-first {    border-left: 0;}.table-column {    padding: 10px;    display: table-cell;    width: 33%;    vertical-align: top;}.contrib-number {    font-weight: 300;    line-height: 1.3em;    font-size: 24px;    display: block;}.calendar img.spinner {    width: 70px;    margin-top: 50px;    min-height: 70px;}.monospace {    text-align: center;    color: #000;    font-family: monospace;}.monospace a {    color: #1D75AB;    text-decoration: none;}.contrib-footer {    font-size: 11px;    padding: 0 10px 12px;    text-align: left;    width: 100%;    box-sizing: border-box;    height: 26px;}.left.text-muted {    float: left;    margin-left: 9px;    color: #767676;}.left.text-muted a {    color: #4078c0;    text-decoration: none;}.left.text-muted a:hover,.monospace a:hover {    text-decoration: underline;}h2.f4.text-normal.mb-3 {    display: none;}.float-left.text-gray {    float: left;}#user-activity-overview {    display: none;}.day-tooltip {    white-space: nowrap;    position: absolute;    z-index: 99999;    padding: 10px;    font-size: 12px;    color: #959da5;    text-align: center;    background: rgba(0, 0, 0, .85);    border-radius: 3px;    display: none;    pointer-events: none;}.day-tooltip strong {    color: #dfe2e5;}.day-tooltip.is-visible {    display: block;}.day-tooltip:after {    position: absolute;    bottom: -10px;    left: 50%;    width: 5px;    height: 5px;    box-sizing: border-box;    margin: 0 0 0 -5px;    content: " ";    border: 5px solid transparent;    border-top-color: rgba(0, 0, 0, .85)}.position-relative {    width: 100%;    margin-left: 20px;    margin-right: 20px;}@media screen and (max-width: 650px) {    .contrib-column {        display: none    }}.angle-wrapper {    z-index: 9999;    display: inline;    display: none;    width: 200px;    height: 40px;    position: relative;    padding: 5px 0;    background: rgba(0, 0, 0, 0.8);    border-radius: 8px;    text-align: center;    color: white;}.angle-box {    position: fixed;    padding: 10px}.angle-wrapper span {    padding-bottom: 1em;}.angle-wrapper:before {    content: '';    width: 0;    height: 0;    border: 10px solid transparent;    border-top-color: rgba(0, 0, 0, 0.8);    position: absolute;    left: 47.5%;    top: 100%;}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/gitcalendar/js/gitcalendar.js"/>
      <url>/gitcalendar/js/gitcalendar.js</url>
      
        <content type="html"><![CDATA[const calendar = new Vue({    el: '#calendar',    data: {        //---------------------------------------------------------------//        user: 'LANSGANBS', //用户名称,请填写你的github用户名称        //---------------------------------------------------------------//        fixed: 'fixed',        px: 'px',        x: '',        y: '',        span1: '',        span2: '',        month: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'],        monthchange: [],        oneyearbeforeday: '',        thisday: '',        amonthago: '',        aweekago: '',        weekdatacore: 0,        datacore: 0,        total: 0,        datadate: '',        data: [],        firstweek: [],        lastweek: [],        beforeweek: [],        thisweekdatacore: 0,        mounthbeforeday: 0,        mounthfirstindex: 0,        crispedges: 'crispedges',        thisdayindex: 0,        amonthagoindex: 0,        amonthagoweek: [],        firstdate: [],        first2date: [],        montharrbefore: [],        monthindex: 0,        purple: [            '#ebedf0',            '#fdcdec',            '#fc9bd9',            '#fa6ac5',            '#f838b2',            '#f5089f',            '#c4067e',            '#92055e',            '#540336',            '#48022f',            '#30021f',        ],        green: [//绿色            '#ebedf0',            '#f0fff4',            '#dcffe4',            '#bef5cb',            '#85e89d',            '#34d058',            '#28a745',            '#22863a',            '#176f2c',            '#165c26',            '#144620'        ],        blue: [            '#ebedf0',            '#f1f8ff',            '#dbedff',            '#c8e1ff',            '#79b8ff',            '#2188ff',            '#0366d6',            '#005cc5',            '#044289',            '#032f62',            '#05264c',        ],        color: [ //这里是颜色配置，当前为蓝色，若需更换请对应数组内容进行替换            '#EBEDF0',            '#CDE8FF',            '#AEDBFF',            '#8FCFFF',            '#72C4FF',            '#55B9FF',            '#3BAFFE',            '#2198F3',            '#036FD7',            '#0252A9',            '#003267'        ]    },    methods: {        selectStyle(data, event) {            $('.angle-wrapper').show();            this.span1 = data.date;            this.span2 = data.count;            this.x = event.clientX - 100;            this.y = event.clientY - 60;            console.log(event);        },        outStyle() {            $('.angle-wrapper').hide();            console.log();        },        thiscolor(x) {            if (x === 0) {                let i = parseInt(x / 2);                return this.color[0]            }            else if (x < 2) {                return this.color[1]            }            else if (x < 20) {                let i = parseInt(x / 2);                return this.color[i]            }            else {                return this.color[9]            }        },    }})let githubapiurl = "https://githubcalender.lansganbs.cn/api?user=" + calendar.user$(function () {    $.ajax({        //请求方式        type: "GET",        //文件位置        url: githubapiurl,        //返回数据格式为json,也可以是其他格式如        dataType: "json",        beforeSend: function (XMLHttpRequest) {            //alert('远程调用开始...');        },        //请求成功后要执行的函数，拼接html        success: function (data) {            //console.log(data);            calendar.data = data.contributions;            calendar.total = data.total;            calendar.first2date = calendar.data[48];            calendar.firstdate = calendar.data[47];            calendar.firstweek = data.contributions[0];            calendar.lastweek = data.contributions[52];            calendar.beforeweek = data.contributions[51];            calendar.thisdayindex = calendar.lastweek.length - 1;            calendar.thisday = calendar.lastweek[calendar.thisdayindex].date;            calendar.oneyearbeforeday = calendar.firstweek[0].date;            //calendar.amonthagoindex =  6 - (30-calendar.lastweek.length)%7;            //calendar.mounthfirstindex = 52 - Math.ceil((30- calendar.lastweek.length*1)/7);            //calendar.amonthagoweek =  calendar.data[calendar.mounthfirstindex];            // calendar.amonthago = calendar.amonthagoweek[calendar.amonthagoindex].date;            calendar.monthindex = calendar.thisday.substring(5, 7) * 1;            calendar.montharrbefore = calendar.month.splice(calendar.monthindex, 12 - calendar.monthindex);            calendar.monthchange = calendar.montharrbefore.concat(calendar.month);            addweek();            addlastmonth();            function addlastmonth() {                if (calendar.thisdayindex === 0) {                    thisweekcore(52);                    thisweekcore(51);                    thisweekcore(50);                    thisweekcore(49);                    thisweekcore(48);                    calendar.thisweekdatacore += calendar.firstdate[6].count                    //console.log('月'+ calendar.firstdate[6].date);                    calendar.amonthago = calendar.firstdate[6].date                }                else {                    thisweekcore(52);                    thisweekcore(51);                    thisweekcore(50);                    thisweekcore(49);                    thisweek2core();                    calendar.amonthago = calendar.first2date[calendar.thisdayindex - 1].date;                }            };            function thisweek2core() {                for (let i = calendar.thisdayindex - 1; i < calendar.first2date.length; i++) {                    calendar.thisweekdatacore += calendar.first2date[i].count;                    //console.log('月'+ calendar.first2date[i].date + ' '+ calendar.first2date[i].count);                }            };            function thisweekcore(index) {                for (let item of calendar.data[index]) {                    calendar.thisweekdatacore += item.count;                    //console.log('月'+ item.date);                }            };            function addlastweek() {                for (let item of calendar.lastweek) {                    calendar.weekdatacore += item.count;                    //console.log('日'+ item.date);                }            };            function addbeforeweek() {                for (let i = calendar.thisdayindex; i < calendar.beforeweek.length; i++) {                    calendar.weekdatacore += calendar.beforeweek[i].count;                    //console.log('日'+ calendar.beforeweek[i].date);                }            };            function addweek() {                if (calendar.thisdayindex === 6) {                    calendar.aweekago = calendar.lastweek[0].date;                    addlastweek();                } else {                    lastweek = data.contributions[51];                    calendar.aweekago = lastweek[calendar.thisdayindex + 1].date;                    addlastweek();                    addbeforeweek();                };            }        }    });});]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/coin/coin.js"/>
      <url>/js/coin/coin.js</url>
      
        <content type="html"><![CDATA[var tipButtons = document.querySelectorAll(".tip-button");function coinAudio() {    var coinAudio = document.getElementById("coinAudio");    if (coinAudio) {        coinAudio.play(); //有音频时播放    }}// Loop through all buttons (allows for multiple buttons on page)tipButtons.forEach(button => {    var coin = button.querySelector(".coin");    // The larger the number, the slower the animation    coin.maxMoveLoopCount = 90;    button.addEventListener("click", () => {        if (/Android|webOS|BlackBerry/i.test(navigator.userAgent)) return true; //媒体选择        if (button.clicked) return;        button.classList.add("clicked");        // Wait to start flipping th coin because of the button tilt animation        setTimeout(() => {            // Randomize the flipping speeds just for fun            coin.sideRotationCount = Math.floor(Math.random() * 5) * 90;            coin.maxFlipAngle = (Math.floor(Math.random() * 4) + 3) * Math.PI;            button.clicked = true;            flipCoin();            coinAudio();        }, 50);    });    var flipCoin = () => {        coin.moveLoopCount = 0;        flipCoinLoop();    };    var resetCoin = () => {        coin.style.setProperty("--coin-x-multiplier", 0);        coin.style.setProperty("--coin-scale-multiplier", 0);        coin.style.setProperty("--coin-rotation-multiplier", 0);        coin.style.setProperty("--shine-opacity-multiplier", 0.4);        coin.style.setProperty("--shine-bg-multiplier", "50%");        coin.style.setProperty("opacity", 1);        // Delay to give the reset animation some time before you can click again        setTimeout(() => {            button.clicked = false;        }, 300);    };    var flipCoinLoop = () => {        coin.moveLoopCount++;        var percentageCompleted = coin.moveLoopCount / coin.maxMoveLoopCount;        coin.angle = -coin.maxFlipAngle * Math.pow(percentageCompleted - 1, 2) + coin.maxFlipAngle;        // Calculate the scale and position of the coin moving through the air        coin.style.setProperty("--coin-y-multiplier", -11 * Math.pow(percentageCompleted * 2 - 1, 4) + 11);        coin.style.setProperty("--coin-x-multiplier", percentageCompleted);        coin.style.setProperty("--coin-scale-multiplier", percentageCompleted * 0.6);        coin.style.setProperty("--coin-rotation-multiplier", percentageCompleted * coin.sideRotationCount);        // Calculate the scale and position values for the different coin faces        // The math uses sin/cos wave functions to similate the circular motion of 3D spin        coin.style.setProperty("--front-scale-multiplier", Math.max(Math.cos(coin.angle), 0));        coin.style.setProperty("--front-y-multiplier", Math.sin(coin.angle));        coin.style.setProperty("--middle-scale-multiplier", Math.abs(Math.cos(coin.angle), 0));        coin.style.setProperty("--middle-y-multiplier", Math.cos((coin.angle + Math.PI / 2) % Math.PI));        coin.style.setProperty("--back-scale-multiplier", Math.max(Math.cos(coin.angle - Math.PI), 0));        coin.style.setProperty("--back-y-multiplier", Math.sin(coin.angle - Math.PI));        coin.style.setProperty("--shine-opacity-multiplier", 4 * Math.sin((coin.angle + Math.PI / 2) % Math.PI) - 3.2);        coin.style.setProperty("--shine-bg-multiplier", -40 * (Math.cos((coin.angle + Math.PI / 2) % Math.PI) - 0.5) + "%");        // Repeat animation loop        if (coin.moveLoopCount < coin.maxMoveLoopCount) {            if (coin.moveLoopCount === coin.maxMoveLoopCount - 6) button.classList.add("shrink-landing");            window.requestAnimationFrame(flipCoinLoop);        } else {            button.classList.add("coin-landed");            coin.style.setProperty("opacity", 0);            setTimeout(() => {                button.classList.remove("clicked", "shrink-landing", "coin-landed");                setTimeout(() => {                    resetCoin();                }, 300);            }, 1500);        }    };});]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/runtime/runtime.js"/>
      <url>/js/runtime/runtime.js</url>
      
        <content type="html"><![CDATA[var now = new Date;function createtime() {    var t = new Date("12/29/2024 00:00:00");    now.setTime(now.getTime() + 250);    var e = (now - t) / 1e3 / 60 / 60 / 24, a = Math.floor(e), n = (now - t) / 1e3 / 60 / 60 - 24 * a, r = Math.floor(n);    1 == String(r).length && (r = "0" + r);    var s = (now - t) / 1e3 / 60 - 1440 * a - 60 * r, i = Math.floor(s);    1 == String(i).length && (i = "0" + i);    var o = (now - t) / 1e3 - 86400 * a - 3600 * r - 60 * i, l = Math.round(o);    1 == String(l).length && (l = "0" + l);    let g = "";    g = r < 18 && r >= 9 ? `<img class='boardsign' src='' title=''><span class='textTip'> <br> 本站居然运行了 ${a} 天</span><span id='runtime'> ${r} 小时 ${i} 分 ${l} 秒 </span> <i class='fas fa-heartbeat' style='color:red'></i>` : `<img class='boardsign' src='' title=''><span class='textTip'> <br> 本站居然运行了 ${a} 天</span><span id='runtime'> ${r} 小时 ${i} 分 ${l} 秒 </span> <i class='fas fa-heartbeat' style='color:red'></i>`;    document.getElementById("workboard") && (document.getElementById("workboard").innerHTML = g);}setInterval(() => { createtime() }, 250);]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/js/runtime/runtime.min.js"/>
      <url>/js/runtime/runtime.min.js</url>
      
        <content type="html"><![CDATA[var now = new Date; function createtime() { var t = new Date("12/29/2024 00:00:00"); now.setTime(now.getTime() + 250); var e = (now - t) / 1e3 / 60 / 60 / 24, a = Math.floor(e), n = (now - t) / 1e3 / 60 / 60 - 24 * a, r = Math.floor(n); 1 == String(r).length && (r = "0" + r); var s = (now - t) / 1e3 / 60 - 1440 * a - 60 * r, i = Math.floor(s); 1 == String(i).length && (i = "0" + i); var o = (now - t) / 1e3 - 86400 * a - 3600 * r - 60 * i, l = Math.round(o); 1 == String(l).length && (l = "0" + l); let g = ""; g = r < 18 && r >= 9 ? `<img class='boardsign' src='' title=''><span class='textTip'> <br> 本站居然运行了 ${a} 天</span><span id='runtime'> ${r} 小时 ${i} 分 ${l} 秒 </span> <i class='fas fa-heartbeat' style='color:red'></i>` : `<img class='boardsign' src='' title=''><span class='textTip'> <br> 本站居然运行了 ${a} 天</span><span id='runtime'> ${r} 小时 ${i} 分 ${l} 秒 </span> <i class='fas fa-heartbeat' style='color:red'></i>`, document.getElementById("workboard") && (document.getElementById("workboard").innerHTML = g) } setInterval(() => { createtime() }, 250);]]></content>
      
    </entry>
    
    
  
</search>
